# AQUANIKA — многостраничный сайт салона красоты

Полноценный проект многостраничного сайта салона красоты AQUANIKA на Vite 5 с модульной архитектурой, адаптивной вёрсткой, ленивой загрузкой изображений, продуманной структурой страниц и конфигурацией для локальной разработки и продакшен-сборки.

Сайт: aquanika74.ru (боевой хостинг)
Демо (репозиторий/артефакты): gana74.github.io/AQUANIKA


## Содержание
- Обзор
- Технологии
- Структура проекта
- Требования окружения
- Установка и запуск
- Скрипты npm
- Конфигурация сборки (Vite)
- Маршрутизация и входные точки
- Работа с ассетами и производительность
- Безопасность и заголовки
- Качество кода
- Деплой (варианты)
- Типичные задачи разработки
- FAQ / Траблшутинг
- Автор


## Обзор
Проект реализует многостраничный сайт с отдельными HTML-страницами под основные разделы: главная, о нас, команда, отзывы, вакансии, галерея, прайс, контакты и крупные категории услуг (SPA и массаж, косметология, ногтевой сервис, брови/ресницы, эпиляция, парикмахерские услуги, макияж, мужские услуги и т. п.). Каждая страница имеет собственный HTML-энтрипоинт, а повторно используемые части (header, footer, боковое меню) выделены в частичные компоненты.

Сборка основана на Vite 5: быстрое локальное развитие, оптимизация, разбиение по чанкам, копирование публичных файлов, явная конфигурация входных точек Rollup, alias-пути и загрузка SVG как модулей.


## Технологии
- HTML5
- CSS3 (адаптивная сетка, методология BEM, code-splitting CSS)
- JavaScript ES6+ (модули)
- Vite 5 (dev-сервер, сборка, оптимизация)
- Rollup (в составе Vite) — многовходовая сборка
- Font Awesome (@fortawesome/fontawesome-free) — иконки
- lazysizes — ленивая загрузка изображений
- ESLint, Stylelint — качество кода


## Структура проекта
Корень репозитория:
- src/ — исходники
  - assets/ — изображения, шрифты, видео, иконки и др.
  - components/partials/ — HTML-фрагменты (header, footer, side-menu)
  - js/ — JS-модули (главная логика, компоненты, утилиты)
  - pages/ — отдельные HTML-страницы разделов
  - styles/ — стили (базовые, компоненты, страницы)
  - index.html — корневой HTML
- public/ — статические файлы, копируются «как есть» в сборку
- dist/ — выходная директория production-сборки (создаётся Vite)
- docs/ — может использоваться как артефакты для GitHub Pages (если включено)
- package.json — скрипты, зависимости, browserslist
- vite.config.js — конфигурация Vite/Rollup, dev-server rewrites, alias, плагины
- copy-fonts.js — утилита копирования шрифтов из Font Awesome
- .gitignore, README.md и пр.

Примечание: актуальная outDir в vite.config.js — dist (../dist от корня). Ранее мог использоваться docs для GitHub Pages. В этом репозитории присутствует папка docs/ с артефактами — это допустимо, но сборка по умолчанию идёт в dist/.


## Требования окружения
- Node.js 18+ (Vite 5 требует Node >= 18)
- npm 9+ (или соответствующая версия к Node)

Проверка версий:
- node -v
- npm -v


## Установка и запуск
1) Клонировать репозиторий:
- git clone https://github.com/Gana74/AQUANIKA.git
- cd AQUANIKA

2) Установить зависимости:
- npm install

3) Запустить dev-сервер:
- npm run dev

По умолчанию сервер стартует на http://localhost:3000 и открывает браузер автоматически.


## Скрипты npm
- dev — запуск Vite dev-сервера (порт 3000, open: true)
- build — production-сборка (предварительно копирует шрифты Font Awesome)
- preview — локальный предпросмотр собранного проекта
- lint:js — проверка JS-файлов (eslint src/**/*.js)
- lint:css — проверка CSS-файлов (stylelint src/**/*.css)
- clean — удаление папки docs (наследие/служебный скрипт)
- deploy — выполнить build и вывести подсказку по выгрузке содержимого dist на боевой хостинг
- copy:fonts — копирование woff2 шрифтов из @fortawesome в assets

Команды запускаются через:
- npm run <script>


## Конфигурация сборки (Vite)
Файл vite.config.js:
- root: src — корень исходников для dev и build
- base: / — базовый путь (для деплоя на поддомен/подпуть при необходимости меняется)
- publicDir: ../public — содержимое копируется как есть
- build:
  - outDir: ../dist — итоговая папка сборки (в корне)
  - emptyOutDir: true — очистка папки перед сборкой
  - assetsDir: assets — каталог для статики внутри dist
  - cssCodeSplit: true — разбиение CSS по чанкам
  - minify: true — минификация
  - sourcemap: false — исходные карты в продакшене выключены
  - copyPublicDir: true
  - rollupOptions.input — список HTML-энтрипоинтов (каждая страница/часть)
  - rollupOptions.output.manualChunks — явное выделение чанка sideMenu
- server:
  - port: 3000, open: true
  - historyApiFallback.rewrites — правила для «красивых» путей в dev-режиме
- resolve.alias: { '@': 'src' }
- assetsInclude: ["**/*.svg"]
- plugins: простой pre-плагин для импорта SVG как строк-модулей


## Маршрутизация и входные точки
Проект — не SPA, а MPA: каждая страница имеет свой HTML-вход в rollupOptions.input, например:
- src/pages/home.html — home
- src/pages/about.html — about
- src/pages/price.html — price
- src/pages/cosmetology.html — cosmetology
- и т. д. (см. полный список в vite.config.js)

Для удобства разработки настроены rewrites dev-сервера, позволяющие открывать адреса вида:
- /services/cosmetology/face-care → /pages/face-care.html
- /services/nails/manicure → /pages/manicure.html
- /services/men/haircut → /pages/men-haircut.html
и т. п., без ручного перехода по файлам.

Повторяющиеся части (header, footer, side-menu) вынесены в components/partials и могут динамически подгружаться из JS (см. src/js/components/* и использование в страницах/шаблонах).


## Работа с ассетами и производительность
- Изображения и медиа — в src/assets (в продакшене попадают в dist/assets). Для изображений используется lazysizes: добавляйте data-src и класс lazyload для ленивой загрузки.
- Иконки — @fortawesome/fontawesome-free. Шрифты woff2 копируются командой copy:fonts (автоматически вызывается внутри npm run build) в нужную директорию ассетов.
- CSS разрезается по чанкам (cssCodeSplit), что уменьшает размер критического пути и ускоряет загрузку.
- SVG импортируются как модули (плагин в vite.config.js), что позволяет инлайнить или обрабатывать их как строки.

Рекомендации по изображениям:
- Использовать современные форматы (WebP/AVIF) с fallback при необходимости
- Настраивать размеры и атрибуты width/height
- Применять responsive изображения (srcset, sizes) на ключевых блоках


## Безопасность и заголовки
- В публичных артефактах (public/.htaccess, public/_headers) предусмотрены заголовки безопасности и кэширования для деплоя на Apache/Netlify/аналогах: HSTS, CSP (при необходимости включить/адаптировать), Referrer-Policy, X-Content-Type-Options, Permissions-Policy и др.
- Формы могут отправляться через Formspree; онлайн-запись — через YCLIENTS (открытие во внешнем окне). При интеграции уточняйте ключи/идентификаторы в соответствующих JS-модулей форм/виджетов.


## Качество кода
- ESLint: npm run lint:js — проверяет все JS-файлы в src
- Stylelint: npm run lint:css — проверяет все CSS-файлы в src

Рекомендации:
- Соблюдать BEM в классах
- Разбивать стили по компонентам/страницам
- Избегать глобальных утечек в JS, использовать ES-модули
- Держать общие утилиты в src/js/components или src/js/utils


## Деплой (варианты)
1) Веб-хостинг (боевой):
- npm run build
- Загрузить содержимое папки dist на сервер (корень сайта или соответствующую директорию в зависимости от настроек домена aquanika74.ru)
- Убедиться, что заголовки из public/.htaccess применяются (для Apache). Для Nginx перенести правила в конфиг.

2) GitHub Pages (вариант с «/docs»):
- В текущей конфигурации outDir = dist, но можно поменять на docs или использовать Actions
- Либо включить Pages из ветки main, папка /docs (при этом скорректировать outDir и base)

3) GitHub Pages (через gh-pages):
- Можно использовать пакет gh-pages (уже в devDependencies) и скрипт deploy (нужна доработка под push). В текущем скрипте deploy выводит инструкцию после build. При желании заменить на автоматическую публикацию в gh-pages.

Важные моменты:
- Если проект разворачивается на подпути (например, /AQUANIKA/), обязательно установить корректный base в vite.config.js (сейчас установлен "/"). Для GitHub Pages под репозиторием обычно требуется base: "/AQUANIKA/".
- После смены base пересоберите проект: npm run build.


## Типичные задачи разработки
- Добавить новую страницу:
  1) Создать файл в src/pages/<имя>.html
  2) Добавить запись во входные точки rollupOptions.input в vite.config.js
  3) При необходимости добавить rewrite для dev-сервера в server.historyApiFallback.rewrites
  4) Подключить необходимые стили/скрипты и общие partials

- Добавить новый компонент:
  1) Разместить HTML-фрагмент в src/components/partials
  2) При динамической загрузке — добавить JS-инициализацию в src/js/components
  3) Подключить стили компонента в соответствующий CSS

- Подключить новый шрифт:
  1) Добавить файлы в src/assets/fonts (или расширить copy-fonts.js)
  2) Описать @font-face в стилях


## FAQ / Траблшутинг
- Белый экран после деплоя на подпуть:
  - Проверьте, что base в vite.config.js соответствует конечному URL (например, "/AQUANIKA/").
- 404 в dev при переходах по «красивым» URL:
  - Убедитесь, что есть правило в rewrites для данного пути, и оно указывает на нужный HTML-файл в /pages.
- Иконки Font Awesome не отображаются:
  - Убедитесь, что выполнено копирование шрифтов (npm run build вызывает copy:fonts), либо запустите npm run copy:fonts вручную в dev и проверьте пути.
- Неприменяются заголовки безопасности/ке��ирования:
  - Для Apache проверьте, что AllowOverride включён и .htaccess читается сервером; для других серверов адаптируйте правила.


## Автор
- Gana74 — https://github.com/Gana74
