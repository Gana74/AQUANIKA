/* empty css             */import{b as ge,i as Oe}from"./sideMenu-D1uie_U2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const v of u)if(v.type==="childList")for(const n of v.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function c(u){const v={};return u.integrity&&(v.integrity=u.integrity),u.referrerPolicy&&(v.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?v.credentials="include":u.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function i(u){if(u.ep)return;u.ep=!0;const v=c(u);fetch(u.href,v)}})();var Ie={exports:{}};(function(e){(function(s,c){var i=c(s,s.document,Date);s.lazySizes=i,e.exports&&(e.exports=i)})(typeof window<"u"?window:{},function(c,i,u){var v,n;if(function(){var f,d={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};n=c.lazySizesConfig||c.lazysizesConfig||{};for(f in d)f in n||(n[f]=d[f])}(),!i||!i.getElementsByClassName)return{init:function(){},cfg:n,noSupport:!0};var C=i.documentElement,A=c.HTMLPictureElement,l="addEventListener",r="getAttribute",t=c[l].bind(c),o=c.setTimeout,m=c.requestAnimationFrame||o,h=c.requestIdleCallback,g=/^picture$/i,_=["load","error","lazyincluded","_lazyloaded"],b={},I=Array.prototype.forEach,q=function(f,d){return b[d]||(b[d]=new RegExp("(\\s|^)"+d+"(\\s|$)")),b[d].test(f[r]("class")||"")&&b[d]},R=function(f,d){q(f,d)||f.setAttribute("class",(f[r]("class")||"").trim()+" "+d)},re=function(f,d){var y;(y=q(f,d))&&f.setAttribute("class",(f[r]("class")||"").replace(y," "))},se=function(f,d,y){var S=y?l:"removeEventListener";y&&se(f,d),_.forEach(function(k){f[S](k,d)})},Y=function(f,d,y,S,k){var E=i.createEvent("Event");return y||(y={}),y.instance=v,E.initEvent(d,!S,!k),E.detail=y,f.dispatchEvent(E),E},ie=function(f,d){var y;!A&&(y=c.picturefill||n.pf)?(d&&d.src&&!f[r]("srcset")&&f.setAttribute("srcset",d.src),y({reevaluate:!0,elements:[f]})):d&&d.src&&(f.src=d.src)},G=function(f,d){return(getComputedStyle(f,null)||{})[d]},ce=function(f,d,y){for(y=y||f.offsetWidth;y<n.minSize&&d&&!f._lazysizesWidth;)y=d.offsetWidth,d=d.parentNode;return y},J=function(){var f,d,y=[],S=[],k=y,E=function(){var w=k;for(k=y.length?S:y,f=!0,d=!1;w.length;)w.shift()();f=!1},z=function(w,x){f&&!x?w.apply(this,arguments):(k.push(w),d||(d=!0,(i.hidden?o:m)(E)))};return z._lsFlush=E,z}(),ee=function(f,d){return d?function(){J(f)}:function(){var y=this,S=arguments;J(function(){f.apply(y,S)})}},we=function(f){var d,y=0,S=n.throttleDelay,k=n.ricTimeout,E=function(){d=!1,y=u.now(),f()},z=h&&k>49?function(){h(E,{timeout:k}),k!==n.ricTimeout&&(k=n.ricTimeout)}:ee(function(){o(E)},!0);return function(w){var x;(w=w===!0)&&(k=33),!d&&(d=!0,x=S-(u.now()-y),x<0&&(x=0),w||x<9?z():o(z,x))}},de=function(f){var d,y,S=99,k=function(){d=null,f()},E=function(){var z=u.now()-y;z<S?o(E,S-z):(h||k)(k)};return function(){y=u.now(),d||(d=o(E,S))}},ue=function(){var f,d,y,S,k,E,z,w,x,F,$,U,Le=/^img$/i,xe=/^iframe$/i,Ce="onscroll"in c&&!/(gle|ing)bot/.test(navigator.userAgent),ke=0,X=0,P=0,K=-1,fe=function(a){P--,(!a||P<0||!a.target)&&(P=0)},me=function(a){return U==null&&(U=G(i.body,"visibility")=="hidden"),U||!(G(a.parentNode,"visibility")=="hidden"&&G(a,"visibility")=="hidden")},Se=function(a,p){var L,M=a,B=me(a);for(w-=p,$+=p,x-=p,F+=p;B&&(M=M.offsetParent)&&M!=i.body&&M!=C;)B=(G(M,"opacity")||1)>0,B&&G(M,"overflow")!="visible"&&(L=M.getBoundingClientRect(),B=F>L.left&&x<L.right&&$>L.top-1&&w<L.bottom+1);return B},pe=function(){var a,p,L,M,B,O,W,j,D,H,V,Q,T=v.elements;if((S=n.loadMode)&&P<8&&(a=T.length)){for(p=0,K++;p<a;p++)if(!(!T[p]||T[p]._lazyRace)){if(!Ce||v.prematureUnveil&&v.prematureUnveil(T[p])){Z(T[p]);continue}if((!(j=T[p][r]("data-expand"))||!(O=j*1))&&(O=X),H||(H=!n.expand||n.expand<1?C.clientHeight>500&&C.clientWidth>500?500:370:n.expand,v._defEx=H,V=H*n.expFactor,Q=n.hFac,U=null,X<V&&P<1&&K>2&&S>2&&!i.hidden?(X=V,K=0):S>1&&K>1&&P<6?X=H:X=ke),D!==O&&(E=innerWidth+O*Q,z=innerHeight+O,W=O*-1,D=O),L=T[p].getBoundingClientRect(),($=L.bottom)>=W&&(w=L.top)<=z&&(F=L.right)>=W*Q&&(x=L.left)<=E&&($||F||x||w)&&(n.loadHidden||me(T[p]))&&(d&&P<3&&!j&&(S<3||K<4)||Se(T[p],O))){if(Z(T[p]),B=!0,P>9)break}else!B&&d&&!M&&P<4&&K<4&&S>2&&(f[0]||n.preloadAfterLoad)&&(f[0]||!j&&($||F||x||w||T[p][r](n.sizesAttr)!="auto"))&&(M=f[0]||T[p])}M&&!B&&Z(M)}},N=we(pe),ve=function(a){var p=a.target;if(p._lazyCache){delete p._lazyCache;return}fe(a),R(p,n.loadedClass),re(p,n.loadingClass),se(p,he),Y(p,"lazyloaded")},Ae=ee(ve),he=function(a){Ae({target:a.target})},ze=function(a,p){var L=a.getAttribute("data-load-mode")||n.iframeLoadMode;L==0?a.contentWindow.location.replace(p):L==1&&(a.src=p)},Me=function(a){var p,L=a[r](n.srcsetAttr);(p=n.customMedia[a[r]("data-media")||a[r]("media")])&&a.setAttribute("media",p),L&&a.setAttribute("srcset",L)},Be=ee(function(a,p,L,M,B){var O,W,j,D,H,V;(H=Y(a,"lazybeforeunveil",p)).defaultPrevented||(M&&(L?R(a,n.autosizesClass):a.setAttribute("sizes",M)),W=a[r](n.srcsetAttr),O=a[r](n.srcAttr),B&&(j=a.parentNode,D=j&&g.test(j.nodeName||"")),V=p.firesLoad||"src"in a&&(W||O||D),H={target:a},R(a,n.loadingClass),V&&(clearTimeout(y),y=o(fe,2500),se(a,he,!0)),D&&I.call(j.getElementsByTagName("source"),Me),W?a.setAttribute("srcset",W):O&&!D&&(xe.test(a.nodeName)?ze(a,O):a.src=O),B&&(W||D)&&ie(a,{src:O})),a._lazyRace&&delete a._lazyRace,re(a,n.lazyClass),J(function(){var Q=a.complete&&a.naturalWidth>1;(!V||Q)&&(Q&&R(a,n.fastLoadedClass),ve(H),a._lazyCache=!0,o(function(){"_lazyCache"in a&&delete a._lazyCache},9)),a.loading=="lazy"&&P--},!0)}),Z=function(a){if(!a._lazyRace){var p,L=Le.test(a.nodeName),M=L&&(a[r](n.sizesAttr)||a[r]("sizes")),B=M=="auto";(B||!d)&&L&&(a[r]("src")||a.srcset)&&!a.complete&&!q(a,n.errorClass)&&q(a,n.lazyClass)||(p=Y(a,"lazyunveilread").detail,B&&le.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,P++,Be(a,p,B,M,L))}},qe=de(function(){n.loadMode=3,N()}),ye=function(){n.loadMode==3&&(n.loadMode=2),qe()},ne=function(){if(!d){if(u.now()-k<999){o(ne,999);return}d=!0,n.loadMode=3,N(),t("scroll",ye,!0)}};return{_:function(){k=u.now(),v.elements=i.getElementsByClassName(n.lazyClass),f=i.getElementsByClassName(n.lazyClass+" "+n.preloadClass),t("scroll",N,!0),t("resize",N,!0),t("pageshow",function(a){if(a.persisted){var p=i.querySelectorAll("."+n.loadingClass);p.length&&p.forEach&&m(function(){p.forEach(function(L){L.complete&&Z(L)})})}}),c.MutationObserver?new MutationObserver(N).observe(C,{childList:!0,subtree:!0,attributes:!0}):(C[l]("DOMNodeInserted",N,!0),C[l]("DOMAttrModified",N,!0),setInterval(N,999)),t("hashchange",N,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(a){i[l](a,N,!0)}),/d$|^c/.test(i.readyState)?ne():(t("load",ne),i[l]("DOMContentLoaded",N),o(ne,2e4)),v.elements.length?(pe(),J._lsFlush()):N()},checkElems:N,unveil:Z,_aLSL:ye}}(),le=function(){var f,d=ee(function(E,z,w,x){var F,$,U;if(E._lazysizesWidth=x,x+="px",E.setAttribute("sizes",x),g.test(z.nodeName||""))for(F=z.getElementsByTagName("source"),$=0,U=F.length;$<U;$++)F[$].setAttribute("sizes",x);w.detail.dataAttr||ie(E,w.detail)}),y=function(E,z,w){var x,F=E.parentNode;F&&(w=ce(E,F,w),x=Y(E,"lazybeforesizes",{width:w,dataAttr:!!z}),x.defaultPrevented||(w=x.detail.width,w&&w!==E._lazysizesWidth&&d(E,F,x,w)))},S=function(){var E,z=f.length;if(z)for(E=0;E<z;E++)y(f[E])},k=de(S);return{_:function(){f=i.getElementsByClassName(n.autosizesClass),t("resize",k)},checkElems:k,updateElem:y}}(),te=function(){!te.i&&i.getElementsByClassName&&(te.i=!0,le._(),ue._())};return o(function(){n.init&&te()}),v={cfg:n,autoSizer:le,loader:ue,init:te,uP:ie,aC:R,rC:re,hC:q,fire:Y,gW:ce,rAF:J},v})})(Ie);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("toTopButton");e&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))});const be="/AQUANIKA/assets/home-BCn1Fb8x.mp4";function Fe(){const e=document.getElementById("videoBlock"),s=document.getElementById("playButton"),c=document.getElementById("videoModal"),i=document.getElementById("aboutVideo"),u=document.getElementById("closeModal");if(!e||!s||!c||!i||!u)return;try{be&&(i.src=be,i.setAttribute("preload","none"))}catch(l){console.warn("Не удалось назначить src для видео:",l)}async function v(){c.style.display="block",document.body.style.overflow="hidden",document.body.style.paddingRight=C()+"px";const l=c.querySelector(".video-container")||i;try{l.requestFullscreen?await l.requestFullscreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen():i.webkitEnterFullscreen&&i.webkitEnterFullscreen()}catch(r){console.warn("Fullscreen error:",r)}try{await i.play()}catch(r){console.log("Автовоспроизведение не разрешено:",r)}}async function n(){try{i.pause()}catch{}c.style.display="none",document.body.style.overflow="auto",document.body.style.paddingRight="";try{document.fullscreenElement&&document.exitFullscreen?await document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(l){console.warn("Exit fullscreen error:",l)}}function C(){return window.innerWidth-document.documentElement.clientWidth}e.addEventListener("click",function(l){l.target!==s&&!s.contains(l.target)&&v()}),s.addEventListener("click",v),u.addEventListener("click",n),c.addEventListener("click",function(l){l.target===c&&n()}),document.addEventListener("keydown",function(l){l.key==="Escape"&&c.style.display==="block"&&n()});const A=document.querySelector(".modal-content");A&&A.addEventListener("click",function(l){l.stopPropagation()}),console.log("Modal video initialized successfully")}function Ne(){const e=document,s=e.getElementById("galleryMasonry");if(!s)return;const c=e.querySelectorAll(".gallery-filter .filter-button");c.forEach(o=>{o.addEventListener("click",()=>{c.forEach(g=>g.classList.remove("active")),o.classList.add("active");const m=o.getAttribute("data-filter");s.querySelectorAll(".gallery-item").forEach(g=>{const _=g.getAttribute("data-category"),b=m==="all"||_===m;g.style.display=b?"":"none"})})});const i=e.getElementById("galleryModal");if(!i)return;const u=i.querySelector(".gallery-modal__image"),v=i.querySelector(".gallery-modal__caption"),n=i.querySelector(".gallery-modal__close"),C=i.querySelector(".gallery-modal__prev"),A=i.querySelector(".gallery-modal__next");let l=-1;const r=()=>Array.from(s.querySelectorAll(".gallery-item")).filter(o=>o.style.display!=="none");function t(o){const m=r();if(!m.length)return;l=(o+m.length)%m.length;const h=m[l].querySelector("img");u.src=h.src,u.alt=h.alt||"",v.textContent=h.alt||"",i.classList.add("is-open")}s.addEventListener("click",o=>{let m=o.target.closest("img"),h=o.target.closest(".gallery-item");if(!m&&h&&(m=h.querySelector("img")),!m||!h)return;const _=r().indexOf(h);t(_)}),n.addEventListener("click",()=>i.classList.remove("is-open")),i.addEventListener("click",o=>{o.target===i&&i.classList.remove("is-open")}),C.addEventListener("click",()=>t(l-1)),A.addEventListener("click",()=>t(l+1)),window.addEventListener("keydown",o=>{i.classList.contains("is-open")&&(o.key==="Escape"&&i.classList.remove("is-open"),o.key==="ArrowLeft"&&t(l-1),o.key==="ArrowRight"&&t(l+1))})}let Ee=!1;function Te(){if(document.getElementById("formsModalOverlay"))return;const e=(t,o,m={},h)=>{const g=document.createElement(t);o&&(g.className=o);for(const[_,b]of Object.entries(m))b!=null&&g.setAttribute(_,String(b));return h!==void 0&&(g.textContent=h),g},s=e("div","modal-overlay",{id:"formsModalOverlay"}),c={callback:"AQUANIKA: Заказать звонок",question:"AQUANIKA: Вопрос",review:"AQUANIKA: Отзыв",resume:"AQUANIKA: Резюме"},i=()=>e("span","form__req",{},"*"),u=(t,o,m,h)=>{const g=e("div","form__row"),_=e("label","form__label");_.append(document.createTextNode(o)),m&&_.append(i());const b=e("input","form__input",h);return m&&(b.required=!0),_.append(b),g.append(_),t.append(g),b},v=(t,o,m,h,g)=>{const _=e("div","form__row"),b=e("label","form__label");b.append(document.createTextNode(o));const I=e("select","form__input",{name:h});return g.forEach(q=>{const R=document.createElement("option");typeof q=="object"?(q.value!==void 0&&(R.value=String(q.value)),R.textContent=q.text!==void 0?String(q.text):String(q.value??"")):R.textContent=String(q),I.append(R)}),b.append(I),_.append(b),t.append(_),I},n=(t,o,m,h)=>{const g=e("div","form__row"),_=e("label","form__label");_.append(document.createTextNode(o)),m&&_.append(i());const b=e("textarea","form__textarea",h);return m&&(b.required=!0),_.append(b),g.append(_),t.append(g),b},C=t=>{const o=e("div","form__agree"),m=document.createElement("label"),h=document.createElement("input");h.type="checkbox",h.name="consent",h.required=!0;const g=document.createElement("span");g.textContent="Соглашаюсь с обработкой персональных данных",m.append(h,g),o.append(m),t.append(o)},A=t=>{const o=e("div","form__actions"),m=e("button","button button--primary",{type:"submit"},"Отправить");o.append(m),t.append(o)},l=(t,o)=>{const m=e("input",null,{type:"hidden",name:"type",value:o}),h=e("input",null,{type:"hidden",name:"page",value:""}),g=e("input",null,{type:"hidden",name:"_subject",value:c[o]||"AQUANIKA"}),_=e("input",null,{type:"text",name:"_gotcha",tabindex:"-1",autocomplete:"off",style:"display:none"});t.append(m,h,g,_)},r=(t,o,m)=>{const h=e("div","forms-modal",{"data-modal":t,"aria-hidden":"true",role:"dialog","aria-modal":"true"}),g=e("div","forms-modal__content"),_=e("button","forms-modal__close",{"aria-label":"Закрыть"},"×"),b=e("h3","forms-modal__title",{},o),I=e("form","modal__form",{action:"https://formspree.io/f/xldpwwpb",method:"POST"});l(I,t),m(I),C(I),A(I),g.append(_,b,I),h.append(g),s.append(h)};r("callback","Заказать звонок",t=>{u(t,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),u(t,"Телефон",!0,{type:"tel",name:"phone",placeholder:"+7 (___) ___-__-__"}),v(t,"Удобное время",!1,"preferred_time",[{value:"",text:"Не важно"},{value:"10:00 - 12:00"},{value:"12:00 - 15:00"},{value:"15:00 - 18:00"},{value:"18:00 - 21:00"}]),n(t,"Комментарий",!1,{name:"message",rows:"4",placeholder:"Опишите вопрос"})}),r("question","Задать вопрос",t=>{u(t,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),n(t,"Сообщение",!0,{name:"message",rows:"5",placeholder:"Ваш вопрос"})}),r("resume","Отправить резюме",t=>{u(t,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),u(t,"Email",!0,{type:"email",name:"email",placeholder:"name@example.com"}),u(t,"Телефон",!1,{type:"tel",name:"phone",placeholder:"+7 (___) ___-__-__"}),u(t,"Должность/направление",!1,{type:"text",name:"position",placeholder:"Например: Косметолог"}),n(t,"Сопроводительное письмо",!1,{name:"message",rows:"5",placeholder:"Коротко о вашем опыте и ожиданиях"})}),r("review","Оставить отзыв",t=>{u(t,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),v(t,"Оценка",!1,"rating",[{value:"",text:"—"},{value:"5"},{value:"4"},{value:"3"},{value:"2"},{value:"1"}]),n(t,"Отзыв",!0,{name:"message",rows:"5",placeholder:"Ваш отзыв"})}),document.body.appendChild(s)}function Re(){const e=window.innerWidth-document.documentElement.clientWidth;document.body.dataset.prevOverflow=document.body.style.overflow||"",document.body.dataset.prevPaddingRight=document.body.style.paddingRight||"",document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=e+"px")}function Pe(){document.body.style.overflow=document.body.dataset.prevOverflow||"",document.body.style.paddingRight=document.body.dataset.prevPaddingRight||"",delete document.body.dataset.prevOverflow,delete document.body.dataset.prevPaddingRight}function $e(){document.querySelectorAll('#formsModalOverlay form input[name="page"]').forEach(s=>s.value=window.location.href)}function oe(e){const s=document.getElementById("formsModalOverlay");if(!s)return;$e(),s.querySelectorAll(".forms-modal").forEach(u=>u.setAttribute("aria-hidden","true"));const i=s.querySelector(`.forms-modal[data-modal="${e}"]`);i&&(s.classList.add("is-open"),i.setAttribute("aria-hidden","false"),Re())}function ae(){const e=document.getElementById("formsModalOverlay");e&&(e.classList.remove("is-open"),e.querySelectorAll(".forms-modal").forEach(s=>s.setAttribute("aria-hidden","true")),Pe())}window.closeFormsModal=ae;function We(){const e=document.getElementById("formsModalOverlay");e&&(e.addEventListener("click",s=>{s.target===e&&ae()}),e.addEventListener("click",s=>{s.target.closest(".forms-modal__close")&&ae()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&e.classList.contains("is-open")&&ae()}),document.addEventListener("click",s=>{const c=s.target.closest("[data-open-modal]");if(c){s.preventDefault();const n=c.dataset.openModal||"question";oe(n);try{const C=document.getElementById("formsModalOverlay"),A=C&&C.querySelector(`.forms-modal[data-modal="${n}"]`),l=A&&A.querySelector("form");if(l){const r=c.dataset.message;if(r){const o=l.querySelector('textarea[name="message"]');o&&(o.value=r)}const t=c.dataset.subject;if(t){const o=l.querySelector('input[name="_subject"]');o&&(o.value=t)}}}catch{}return}const i=s.target.closest(".sidebar__button");if(i&&i.dataset.action){s.preventDefault(),oe(i.dataset.action);return}if(s.target.closest(".contacts-message-btn")){s.preventDefault(),oe("question");return}if(s.target.closest(".mobile-nav__action-btn")){s.preventDefault(),oe("question");return}}))}function je(){Ee||(Te(),We(),Ee=!0,console.log("Модальные формы инициализированы"))}async function _e(e,s){var c;try{const i=s.startsWith("/")?`${ge}${s}`:`${ge}/${s}`,u=await fetch(i);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const v=await u.text(),n=document.getElementById(e);if(n)try{const C=window.sanitizeHTML?window.sanitizeHTML(v):v,A=document.createElement("template");A.innerHTML=C,n.replaceChildren(),n.append(A.content.cloneNode(!0));try{(c=window.secureExternalLinks)==null||c.call(window,n)}catch{}}catch{const A=document.createElement("template");A.innerHTML=v,n.replaceChildren(),n.append(A.content.cloneNode(!0))}else console.warn(`Элемент с ID ${e} не найден`)}catch(i){console.error(`Ошибка при загрузке компонента ${s}:`,i)}}class He{constructor(){this.sidebar=document.querySelector(".mobile-nav__sidebar"),this.slides=document.querySelector(".mobile-nav__slides"),this.mainSlide=document.querySelector(".mobile-nav__slide-main"),this.submenuSlide=document.querySelector(".mobile-nav__slide-submenu"),this.menuBtn=document.querySelector(".mobile-nav__menu-btn"),this.closeBtn=document.querySelector(".mobile-nav__close"),this.backBtn=document.querySelector(".mobile-nav__back"),this.servicesBtn=document.querySelector(".mobile-nav__category-btn"),this.categoriesList=document.querySelector(".mobile-nav__categories"),this.subcategoryBtns=document.querySelectorAll(".mobile-nav__subcategory-btn"),this.submenus=document.querySelectorAll(".mobile-nav__subsubmenu"),this.isOpen=!1,this.isSubmenuOpen=!1,this.isCategoriesOpen=!1,this.toggleMenu=this.toggleMenu.bind(this),this.closeMenu=this.closeMenu.bind(this),this.toggleCategories=this.toggleCategories.bind(this),this.showSubmenu=this.showSubmenu.bind(this),this.hideSubmenu=this.hideSubmenu.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.initEventListeners()}initEventListeners(){this.menuBtn.addEventListener("click",this.toggleMenu),this.closeBtn.addEventListener("click",this.closeMenu),this.servicesBtn.addEventListener("click",this.toggleCategories),this.subcategoryBtns.forEach(s=>{s.addEventListener("click",()=>{const c=s.dataset.category;this.showSubmenu(c)})}),this.backBtn.addEventListener("click",this.hideSubmenu),document.addEventListener("click",this.handleClickOutside),this.sidebar.addEventListener("click",s=>{s.target.closest("a")&&this.closeMenu()}),this.addInteractiveEffects()}addInteractiveEffects(){this.sidebar.querySelectorAll("a, button").forEach(c=>{c.addEventListener("mouseenter",()=>{c.style.transition="all 0.2s ease",c.style.transform="translateY(-1px)"}),c.addEventListener("mouseleave",()=>{c.style.transform="translateY(0)"}),c.addEventListener("mousedown",()=>{c.style.transform="translateY(1px)"}),c.addEventListener("mouseup",()=>{c.style.transform="translateY(-1px)"})})}toggleMenu(){this.isOpen?this.closeMenu():this.openMenu()}openMenu(){this.isOpen=!0,this.sidebar.classList.add("is-open"),document.body.style.overflow="hidden"}closeMenu(){this.isOpen=!1,this.isSubmenuOpen=!1,this.isCategoriesOpen=!1,this.sidebar.classList.remove("is-open"),this.slides.classList.remove("show-submenu"),this.servicesBtn.classList.remove("is-open"),this.categoriesList.classList.remove("is-open"),document.body.style.overflow=""}toggleCategories(){this.isCategoriesOpen=!this.isCategoriesOpen,this.servicesBtn.classList.toggle("is-open"),this.categoriesList.classList.toggle("is-open")}showSubmenu(s){this.isSubmenuOpen=!0,this.slides.classList.add("show-submenu"),this.submenus.forEach(c=>{c.dataset.category===s?c.classList.add("is-active"):c.classList.remove("is-active")})}hideSubmenu(){this.isSubmenuOpen=!1,this.slides.classList.remove("show-submenu"),this.submenus.forEach(s=>{s.classList.remove("is-active")})}handleClickOutside(s){this.isOpen&&!this.sidebar.contains(s.target)&&!this.menuBtn.contains(s.target)&&this.closeMenu()}}class De{constructor(){this.init()}init(){console.log("Инициализация форм"),document.querySelectorAll('form:not([data-form-initialized="true"])').forEach(l=>{l.addEventListener("submit",c),l.dataset.formInitialized="true"});async function c(l){var g,_;l.preventDefault();const r=l.target,t=r.querySelector('[type="submit"]'),o=new FormData(r);if(Object.fromEntries(o.entries()),!i(r))return;const m=r.querySelector('input[name="type"]'),h=m?m.value:"";if(h==="question"||h==="review"){try{const b="79227445287",I=C(h,Object.fromEntries(new FormData(r).entries())),q=`https://wa.me/${b}?text=${encodeURIComponent(I)}`;window.open(q,"_blank","noopener,noreferrer"),n(r,"Откроется WhatsApp для отправки сообщения.","success"),r.reset();try{(g=window.closeFormsModal)==null||g.call(window)}catch{}}catch(b){n(r,"Не удалось открыть WhatsApp.","error"),console.error("WhatsApp open error:",b)}return}try{t.classList.add("button--loading"),t.disabled=!0;const b=await A(r);n(r,"Сообщение отправлено успешно!","success"),r.reset();try{(_=window.closeFormsModal)==null||_.call(window)}catch{}}catch(b){n(r,"Произошла ошибка. Попробуйте позже.","error"),console.error("Form submission error:",b)}finally{t.classList.remove("button--loading"),t.disabled=!1}}function i(l){const r=l.querySelectorAll("input, textarea");let t=!0;return r.forEach(o=>{v(o),o.required&&!o.value.trim()&&(u(o,"Это поле обязательно для заполнения"),t=!1),o.type==="email"&&o.value&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value)||(u(o,"Введите корректный email"),t=!1)),o.type==="tel"&&o.value&&(/^\+?[0-9\s-()]{10,}$/.test(o.value)||(u(o,"Введите корректный номер телефона"),t=!1))}),t}function u(l,r){const t=document.createElement("div");t.className="form__error",t.textContent=r,l.classList.add("input--error"),l.parentNode.appendChild(t)}function v(l){const r=l.parentNode.querySelector(".form__error");r&&r.remove(),l.classList.remove("input--error")}function n(l,r,t){const o=document.createElement("div");o.className=`form__message form__message--${t}`,o.textContent=r;const m=l.querySelector(".form__message");m&&m.remove(),l.appendChild(o),setTimeout(()=>{o.remove()},5e3)}function C(l,r){const t=[];return l==="question"?t.push("Здравствуйте! Хочу задать вопрос."):l==="review"&&t.push("Здравствуйте! Хочу оставить отзыв."),r.name&&t.push(`Имя: ${r.name}`),r.phone&&t.push(`Телефон: ${r.phone}`),r.email&&t.push(`Email: ${r.email}`),r.preferred_time&&t.push(`Удобное время: ${r.preferred_time}`),r.rating&&t.push(`Оценка: ${r.rating}`),r.message&&t.push(`Сообщение: ${r.message}`),r.page&&t.push(`Страница: ${r.page}`),t.join(`
`)}async function A(l){const r=l.getAttribute("action")||"/api/send-form",t=(l.getAttribute("method")||"POST").toUpperCase(),o=new FormData(l);if(r.includes("formspree.io")){const g=await fetch(r,{method:t,body:o,headers:{Accept:"application/json"}});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);try{return await g.json()}catch{return{}}}const m=Object.fromEntries(o.entries()),h=await fetch(r,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);return await h.json()}}}function Ue(){return console.log("Запуск инициализации форм"),new De}window.initVideoModal=Fe;window.initGalleryModal=Ne;window.initForms=Ue;window.sanitizeHTML=window.sanitizeHTML||(e=>e);function Ve(){if(document.getElementById("cookieBannerStyles"))return;const e=document.createElement("style");e.id="cookieBannerStyles",e.textContent=`
  .cookie-banner { position: fixed; left: 16px; right: 16px; bottom: 16px; z-index: 1100; display: flex; gap: 16px; align-items: flex-start; padding: 16px; background: var(--color-background, #fff); color: var(--color-dark, #222); border: 1px solid var(--color-border, #e0e0e0); border-radius: 12px; box-shadow: var(--shadow-lg, 0 10px 30px rgba(0,0,0,.15)); max-width: 960px; margin: 0 auto; }
  .cookie-banner__text { flex: 1; line-height: 1.5; font-size: 14px; }
  .cookie-banner__actions { display: flex; gap: 12px; flex-wrap: wrap; }
  .cookie-banner__link { color: var(--color-secondary, #a78b3d); text-decoration: underline; }
  .cookie-banner__btn { white-space: nowrap; }
  @media (max-width: 640px){ .cookie-banner{ flex-direction: column; gap: 12px; padding: 12px; } }
  `,document.head.appendChild(e)}function Ke(){if(document.getElementById("cookieBanner"))return;const e=document.createElement("div");e.id="cookieBanner",e.className="cookie-banner",e.setAttribute("role","region"),e.setAttribute("aria-label","Уведомление об использовании cookies");const s=document.createElement("p");s.className="cookie-banner__text";const c=document.createElement("span");c.textContent="Мы обрабатываем cookies, чтобы пользоваться сайтом было удобнее. Вы можете запретить обработку cookies в настройках браузера. Пожалуйста, ознакомьтесь с ";const i=document.createElement("a");i.className="cookie-banner__link",i.href="/privacy",i.textContent="политикой конфиденциальности",i.setAttribute("rel","noopener"),i.setAttribute("target","_self");const u=document.createElement("span");u.textContent=".",s.append(c,i,u);const v=document.createElement("div");v.className="cookie-banner__actions";const n=document.createElement("button");n.className="button button--primary cookie-banner__btn",n.type="button",n.textContent="Понятно",n.addEventListener("click",()=>{try{localStorage.setItem("cookieConsent","accepted")}catch{}e.remove()}),v.append(n),e.append(s,v),document.body.appendChild(e)}function Qe(){try{if(localStorage.getItem("cookieConsent")==="accepted")return}catch{}Ve(),Ke()}async function Ye(){try{document.getElementById("header-placeholder")&&await _e("header-placeholder","/components/partials/header.html"),document.getElementById("footer-placeholder")&&await _e("footer-placeholder","/components/partials/footer.html")}catch(e){console.warn("Layout components loading failed:",e)}}document.addEventListener("DOMContentLoaded",async()=>{console.log("🚀 Aqvanika loaded in",window.location.hostname.includes("github.io")?"GitHub Pages":window.location.hostname==="localhost"?"Local development":"Production","mode"),await Promise.all([Ye(),new Promise(e=>{new He,e()})]);try{je()}catch(e){console.warn("initFormsModals failed",e)}try{Qe()}catch(e){console.warn("initCookieBanner failed",e)}Oe()});
//# sourceMappingURL=main-JbauDLWd.js.map
