/* empty css             */import{b as ge,i as Ne}from"./sideMenu-B-HCbgL4.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const t of m.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&r(t)}).observe(document,{childList:!0,subtree:!0});function l(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function r(d){if(d.ep)return;d.ep=!0;const m=l(d);fetch(d.href,m)}})();var Oe={exports:{}};(function(e){(function(a,l){var r=l(a,a.document,Date);a.lazySizes=r,e.exports&&(e.exports=r)})(typeof window<"u"?window:{},function(l,r,d){var m,t;if(function(){var f,u={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};t=l.lazySizesConfig||l.lazysizesConfig||{};for(f in u)f in t||(t[f]=u[f])}(),!r||!r.getElementsByClassName)return{init:function(){},cfg:t,noSupport:!0};var E=r.documentElement,L=l.HTMLPictureElement,c="addEventListener",i="getAttribute",n=l[c].bind(l),o=l.setTimeout,p=l.requestAnimationFrame||o,v=l.requestIdleCallback,y=/^picture$/i,b=["load","error","lazyincluded","_lazyloaded"],_={},N=Array.prototype.forEach,q=function(f,u){return _[u]||(_[u]=new RegExp("(\\s|^)"+u+"(\\s|$)")),_[u].test(f[i]("class")||"")&&_[u]},R=function(f,u){q(f,u)||f.setAttribute("class",(f[i]("class")||"").trim()+" "+u)},re=function(f,u){var g;(g=q(f,u))&&f.setAttribute("class",(f[i]("class")||"").replace(g," "))},se=function(f,u,g){var A=g?c:"removeEventListener";g&&se(f,u),b.forEach(function(S){f[A](S,u)})},Y=function(f,u,g,A,S){var x=r.createEvent("Event");return g||(g={}),g.instance=m,x.initEvent(u,!A,!S),x.detail=g,f.dispatchEvent(x),x},ie=function(f,u){var g;!L&&(g=l.picturefill||t.pf)?(u&&u.src&&!f[i]("srcset")&&f.setAttribute("srcset",u.src),g({reevaluate:!0,elements:[f]})):u&&u.src&&(f.src=u.src)},G=function(f,u){return(getComputedStyle(f,null)||{})[u]},ce=function(f,u,g){for(g=g||f.offsetWidth;g<t.minSize&&u&&!f._lazysizesWidth;)g=u.offsetWidth,u=u.parentNode;return g},J=function(){var f,u,g=[],A=[],S=g,x=function(){var w=S;for(S=g.length?A:g,f=!0,u=!1;w.length;)w.shift()();f=!1},z=function(w,C){f&&!C?w.apply(this,arguments):(S.push(w),u||(u=!0,(r.hidden?o:p)(x)))};return z._lsFlush=x,z}(),ee=function(f,u){return u?function(){J(f)}:function(){var g=this,A=arguments;J(function(){f.apply(g,A)})}},we=function(f){var u,g=0,A=t.throttleDelay,S=t.ricTimeout,x=function(){u=!1,g=d.now(),f()},z=v&&S>49?function(){v(x,{timeout:S}),S!==t.ricTimeout&&(S=t.ricTimeout)}:ee(function(){o(x)},!0);return function(w){var C;(w=w===!0)&&(S=33),!u&&(u=!0,C=A-(d.now()-g),C<0&&(C=0),w||C<9?z():o(z,C))}},de=function(f){var u,g,A=99,S=function(){u=null,f()},x=function(){var z=d.now()-g;z<A?o(x,A-z):(v||S)(S)};return function(){g=d.now(),u||(u=o(x,A))}},ue=function(){var f,u,g,A,S,x,z,w,C,O,$,V,ke=/^img$/i,Le=/^iframe$/i,Ce="onscroll"in l&&!/(gle|ing)bot/.test(navigator.userAgent),Se=0,X=0,P=0,K=-1,fe=function(s){P--,(!s||P<0||!s.target)&&(P=0)},me=function(s){return V==null&&(V=G(r.body,"visibility")=="hidden"),V||!(G(s.parentNode,"visibility")=="hidden"&&G(s,"visibility")=="hidden")},Ae=function(s,h){var k,M=s,B=me(s);for(w-=h,$+=h,C-=h,O+=h;B&&(M=M.offsetParent)&&M!=r.body&&M!=E;)B=(G(M,"opacity")||1)>0,B&&G(M,"overflow")!="visible"&&(k=M.getBoundingClientRect(),B=O>k.left&&C<k.right&&$>k.top-1&&w<k.bottom+1);return B},pe=function(){var s,h,k,M,B,I,W,j,H,D,U,Q,T=m.elements;if((A=t.loadMode)&&P<8&&(s=T.length)){for(h=0,K++;h<s;h++)if(!(!T[h]||T[h]._lazyRace)){if(!Ce||m.prematureUnveil&&m.prematureUnveil(T[h])){Z(T[h]);continue}if((!(j=T[h][i]("data-expand"))||!(I=j*1))&&(I=X),D||(D=!t.expand||t.expand<1?E.clientHeight>500&&E.clientWidth>500?500:370:t.expand,m._defEx=D,U=D*t.expFactor,Q=t.hFac,V=null,X<U&&P<1&&K>2&&A>2&&!r.hidden?(X=U,K=0):A>1&&K>1&&P<6?X=D:X=Se),H!==I&&(x=innerWidth+I*Q,z=innerHeight+I,W=I*-1,H=I),k=T[h].getBoundingClientRect(),($=k.bottom)>=W&&(w=k.top)<=z&&(O=k.right)>=W*Q&&(C=k.left)<=x&&($||O||C||w)&&(t.loadHidden||me(T[h]))&&(u&&P<3&&!j&&(A<3||K<4)||Ae(T[h],I))){if(Z(T[h]),B=!0,P>9)break}else!B&&u&&!M&&P<4&&K<4&&A>2&&(f[0]||t.preloadAfterLoad)&&(f[0]||!j&&($||O||C||w||T[h][i](t.sizesAttr)!="auto"))&&(M=f[0]||T[h])}M&&!B&&Z(M)}},F=we(pe),he=function(s){var h=s.target;if(h._lazyCache){delete h._lazyCache;return}fe(s),R(h,t.loadedClass),re(h,t.loadingClass),se(h,ve),Y(h,"lazyloaded")},ze=ee(he),ve=function(s){ze({target:s.target})},Me=function(s,h){var k=s.getAttribute("data-load-mode")||t.iframeLoadMode;k==0?s.contentWindow.location.replace(h):k==1&&(s.src=h)},Be=function(s){var h,k=s[i](t.srcsetAttr);(h=t.customMedia[s[i]("data-media")||s[i]("media")])&&s.setAttribute("media",h),k&&s.setAttribute("srcset",k)},qe=ee(function(s,h,k,M,B){var I,W,j,H,D,U;(D=Y(s,"lazybeforeunveil",h)).defaultPrevented||(M&&(k?R(s,t.autosizesClass):s.setAttribute("sizes",M)),W=s[i](t.srcsetAttr),I=s[i](t.srcAttr),B&&(j=s.parentNode,H=j&&y.test(j.nodeName||"")),U=h.firesLoad||"src"in s&&(W||I||H),D={target:s},R(s,t.loadingClass),U&&(clearTimeout(g),g=o(fe,2500),se(s,ve,!0)),H&&N.call(j.getElementsByTagName("source"),Be),W?s.setAttribute("srcset",W):I&&!H&&(Le.test(s.nodeName)?Me(s,I):s.src=I),B&&(W||H)&&ie(s,{src:I})),s._lazyRace&&delete s._lazyRace,re(s,t.lazyClass),J(function(){var Q=s.complete&&s.naturalWidth>1;(!U||Q)&&(Q&&R(s,t.fastLoadedClass),he(D),s._lazyCache=!0,o(function(){"_lazyCache"in s&&delete s._lazyCache},9)),s.loading=="lazy"&&P--},!0)}),Z=function(s){if(!s._lazyRace){var h,k=ke.test(s.nodeName),M=k&&(s[i](t.sizesAttr)||s[i]("sizes")),B=M=="auto";(B||!u)&&k&&(s[i]("src")||s.srcset)&&!s.complete&&!q(s,t.errorClass)&&q(s,t.lazyClass)||(h=Y(s,"lazyunveilread").detail,B&&le.updateElem(s,!0,s.offsetWidth),s._lazyRace=!0,P++,qe(s,h,B,M,k))}},Ie=de(function(){t.loadMode=3,F()}),ye=function(){t.loadMode==3&&(t.loadMode=2),Ie()},ne=function(){if(!u){if(d.now()-S<999){o(ne,999);return}u=!0,t.loadMode=3,F(),n("scroll",ye,!0)}};return{_:function(){S=d.now(),m.elements=r.getElementsByClassName(t.lazyClass),f=r.getElementsByClassName(t.lazyClass+" "+t.preloadClass),n("scroll",F,!0),n("resize",F,!0),n("pageshow",function(s){if(s.persisted){var h=r.querySelectorAll("."+t.loadingClass);h.length&&h.forEach&&p(function(){h.forEach(function(k){k.complete&&Z(k)})})}}),l.MutationObserver?new MutationObserver(F).observe(E,{childList:!0,subtree:!0,attributes:!0}):(E[c]("DOMNodeInserted",F,!0),E[c]("DOMAttrModified",F,!0),setInterval(F,999)),n("hashchange",F,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(s){r[c](s,F,!0)}),/d$|^c/.test(r.readyState)?ne():(n("load",ne),r[c]("DOMContentLoaded",F),o(ne,2e4)),m.elements.length?(pe(),J._lsFlush()):F()},checkElems:F,unveil:Z,_aLSL:ye}}(),le=function(){var f,u=ee(function(x,z,w,C){var O,$,V;if(x._lazysizesWidth=C,C+="px",x.setAttribute("sizes",C),y.test(z.nodeName||""))for(O=z.getElementsByTagName("source"),$=0,V=O.length;$<V;$++)O[$].setAttribute("sizes",C);w.detail.dataAttr||ie(x,w.detail)}),g=function(x,z,w){var C,O=x.parentNode;O&&(w=ce(x,O,w),C=Y(x,"lazybeforesizes",{width:w,dataAttr:!!z}),C.defaultPrevented||(w=C.detail.width,w&&w!==x._lazysizesWidth&&u(x,O,C,w)))},A=function(){var x,z=f.length;if(z)for(x=0;x<z;x++)g(f[x])},S=de(A);return{_:function(){f=r.getElementsByClassName(t.autosizesClass),n("resize",S)},checkElems:S,updateElem:g}}(),te=function(){!te.i&&r.getElementsByClassName&&(te.i=!0,le._(),ue._())};return o(function(){t.init&&te()}),m={cfg:t,autoSizer:le,loader:ue,init:te,uP:ie,aC:R,rC:re,hC:q,fire:Y,gW:ce,rAF:J},m})})(Oe);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("toTopButton");e&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))});const be="/AQUANIKA/assets/home-BCn1Fb8x.mp4";function Fe(){const e=document.getElementById("videoBlock"),a=document.getElementById("playButton"),l=document.getElementById("videoModal"),r=document.getElementById("aboutVideo"),d=document.getElementById("closeModal");if(!e||!a||!l||!r||!d)return;try{be&&(r.src=be,r.setAttribute("preload","none"))}catch(c){console.warn("Не удалось назначить src для видео:",c)}async function m(){l.style.display="block",document.body.style.overflow="hidden",document.body.style.paddingRight=E()+"px";const c=l.querySelector(".video-container")||r;try{c.requestFullscreen?await c.requestFullscreen():c.webkitRequestFullscreen?c.webkitRequestFullscreen():r.webkitEnterFullscreen&&r.webkitEnterFullscreen()}catch(i){console.warn("Fullscreen error:",i)}try{await r.play()}catch(i){console.log("Автовоспроизведение не разрешено:",i)}}async function t(){try{r.pause()}catch{}l.style.display="none",document.body.style.overflow="auto",document.body.style.paddingRight="";try{document.fullscreenElement&&document.exitFullscreen?await document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(c){console.warn("Exit fullscreen error:",c)}}function E(){return window.innerWidth-document.documentElement.clientWidth}e.addEventListener("click",function(c){c.target!==a&&!a.contains(c.target)&&m()}),a.addEventListener("click",m),d.addEventListener("click",t),l.addEventListener("click",function(c){c.target===l&&t()}),document.addEventListener("keydown",function(c){c.key==="Escape"&&l.style.display==="block"&&t()});const L=document.querySelector(".modal-content");L&&L.addEventListener("click",function(c){c.stopPropagation()}),console.log("Modal video initialized successfully")}function Te(){const e=document,a=e.getElementById("galleryMasonry");if(!a)return;const l=e.querySelectorAll(".gallery-filter .filter-button");l.forEach(o=>{o.addEventListener("click",()=>{l.forEach(y=>y.classList.remove("active")),o.classList.add("active");const p=o.getAttribute("data-filter");a.querySelectorAll(".gallery-item").forEach(y=>{const b=y.getAttribute("data-category"),_=p==="all"||b===p;y.style.display=_?"":"none"})})});const r=e.getElementById("galleryModal");if(!r)return;const d=r.querySelector(".gallery-modal__image"),m=r.querySelector(".gallery-modal__caption"),t=r.querySelector(".gallery-modal__close"),E=r.querySelector(".gallery-modal__prev"),L=r.querySelector(".gallery-modal__next");let c=-1;const i=()=>Array.from(a.querySelectorAll(".gallery-item")).filter(o=>o.style.display!=="none");function n(o){const p=i();if(!p.length)return;c=(o+p.length)%p.length;const v=p[c].querySelector("img");d.src=v.src,d.alt=v.alt||"",m.textContent=v.alt||"",r.classList.add("is-open")}a.addEventListener("click",o=>{let p=o.target.closest("img"),v=o.target.closest(".gallery-item");if(!p&&v&&(p=v.querySelector("img")),!p||!v)return;const b=i().indexOf(v);n(b)}),t.addEventListener("click",()=>r.classList.remove("is-open")),r.addEventListener("click",o=>{o.target===r&&r.classList.remove("is-open")}),E.addEventListener("click",()=>n(c-1)),L.addEventListener("click",()=>n(c+1)),window.addEventListener("keydown",o=>{r.classList.contains("is-open")&&(o.key==="Escape"&&r.classList.remove("is-open"),o.key==="ArrowLeft"&&n(c-1),o.key==="ArrowRight"&&n(c+1))})}let Ee=!1;function Re(){if(document.getElementById("formsModalOverlay"))return;const e=(n,o,p={},v)=>{const y=document.createElement(n);o&&(y.className=o);for(const[b,_]of Object.entries(p))_!=null&&y.setAttribute(b,String(_));return v!==void 0&&(y.textContent=v),y},a=e("div","modal-overlay",{id:"formsModalOverlay"}),l={callback:"AQUANIKA: Заказать звонок",question:"AQUANIKA: Вопрос",review:"AQUANIKA: Отзыв",resume:"AQUANIKA: Резюме"},r=()=>e("span","form__req",{},"*"),d=(n,o,p,v)=>{const y=e("div","form__row"),b=e("label","form__label");b.append(document.createTextNode(o)),p&&b.append(r());const _=e("input","form__input",v);return p&&(_.required=!0),b.append(_),y.append(b),n.append(y),_},m=(n,o,p,v,y)=>{const b=e("div","form__row"),_=e("label","form__label");_.append(document.createTextNode(o));const N=e("select","form__input",{name:v});return y.forEach(q=>{const R=document.createElement("option");typeof q=="object"?(q.value!==void 0&&(R.value=String(q.value)),R.textContent=q.text!==void 0?String(q.text):String(q.value??"")):R.textContent=String(q),N.append(R)}),_.append(N),b.append(_),n.append(b),N},t=(n,o,p,v)=>{const y=e("div","form__row"),b=e("label","form__label");b.append(document.createTextNode(o)),p&&b.append(r());const _=e("textarea","form__textarea",v);return p&&(_.required=!0),b.append(_),y.append(b),n.append(y),_},E=n=>{const o=e("div","form__agree"),p=document.createElement("label"),v=document.createElement("input");v.type="checkbox",v.name="consent",v.required=!0;const y=document.createElement("span"),b=document.createElement("a");b.href="/privacy",b.textContent=" политикой конфиденциальности",b.target="_blank",b.rel="noopener noreferrer",b.className="highlight-link",y.textContent="Соглашаюсь с ",y.appendChild(b),p.append(v,y),o.append(p),n.append(o)},L=n=>{const o=e("div","form__actions"),p=e("button","button button--primary",{type:"submit"},"Отправить");o.append(p),n.append(o)},c=(n,o)=>{const p=e("input",null,{type:"hidden",name:"type",value:o}),v=e("input",null,{type:"hidden",name:"page",value:""}),y=e("input",null,{type:"hidden",name:"_subject",value:l[o]||"AQUANIKA"}),b=e("input",null,{type:"text",name:"_gotcha",tabindex:"-1",autocomplete:"off",style:"display:none"});n.append(p,v,y,b)},i=(n,o,p)=>{const v=e("div","forms-modal",{"data-modal":n,"aria-hidden":"true",role:"dialog","aria-modal":"true"}),y=e("div","forms-modal__content"),b=e("button","forms-modal__close",{"aria-label":"Закрыть"},"×"),_=e("h3","forms-modal__title",{},o),N=e("form","modal__form",{action:"https://formspree.io/f/xldpwwpb",method:"POST"});c(N,n),p(N),E(N),L(N),y.append(b,_,N),v.append(y),a.append(v)};i("callback","Заказать звонок",n=>{d(n,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),d(n,"Телефон",!0,{type:"tel",name:"phone",placeholder:"+7 (___) ___-__-__"}),m(n,"Удобное время",!1,"preferred_time",[{value:"",text:"Не важно"},{value:"10:00 - 12:00"},{value:"12:00 - 15:00"},{value:"15:00 - 18:00"},{value:"18:00 - 21:00"}]),t(n,"Комментарий",!1,{name:"message",rows:"4",placeholder:"Опишите вопрос"})}),i("question","Задать вопрос",n=>{d(n,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),t(n,"Сообщение",!0,{name:"message",rows:"5",placeholder:"Ваш вопрос"})}),i("resume","Отправить резюме",n=>{d(n,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),d(n,"Email",!0,{type:"email",name:"email",placeholder:"name@example.com"}),d(n,"Телефон",!1,{type:"tel",name:"phone",placeholder:"+7 (___) ___-__-__"}),d(n,"Должность/направление",!1,{type:"text",name:"position",placeholder:"Например: Косметолог"}),t(n,"Сопроводительное письмо",!1,{name:"message",rows:"5",placeholder:"Коротко о вашем опыте и ожиданиях"})}),i("review","Оставить отзыв",n=>{d(n,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),m(n,"Оценка",!1,"rating",[{value:"",text:"—"},{value:"5"},{value:"4"},{value:"3"},{value:"2"},{value:"1"}]),t(n,"Отзыв",!0,{name:"message",rows:"5",placeholder:"Ваш отзыв"})}),document.body.appendChild(a)}function Pe(){const e=window.innerWidth-document.documentElement.clientWidth;document.body.dataset.prevOverflow=document.body.style.overflow||"",document.body.dataset.prevPaddingRight=document.body.style.paddingRight||"",document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=e+"px")}function $e(){document.body.style.overflow=document.body.dataset.prevOverflow||"",document.body.style.paddingRight=document.body.dataset.prevPaddingRight||"",delete document.body.dataset.prevOverflow,delete document.body.dataset.prevPaddingRight}function We(){document.querySelectorAll('#formsModalOverlay form input[name="page"]').forEach(a=>a.value=window.location.href)}function oe(e){const a=document.getElementById("formsModalOverlay");if(!a)return;We(),a.querySelectorAll(".forms-modal").forEach(d=>d.setAttribute("aria-hidden","true"));const r=a.querySelector(`.forms-modal[data-modal="${e}"]`);r&&(a.classList.add("is-open"),r.setAttribute("aria-hidden","false"),Pe())}function ae(){const e=document.getElementById("formsModalOverlay");e&&(e.classList.remove("is-open"),e.querySelectorAll(".forms-modal").forEach(a=>a.setAttribute("aria-hidden","true")),$e())}window.closeFormsModal=ae;function je(){const e=document.getElementById("formsModalOverlay");e&&(e.addEventListener("click",a=>{a.target===e&&ae()}),e.addEventListener("click",a=>{a.target.closest(".forms-modal__close")&&ae()}),document.addEventListener("keydown",a=>{a.key==="Escape"&&e.classList.contains("is-open")&&ae()}),document.addEventListener("click",a=>{const l=a.target.closest("[data-open-modal]");if(l){a.preventDefault();const t=l.dataset.openModal||"question";oe(t);try{const E=document.getElementById("formsModalOverlay"),L=E&&E.querySelector(`.forms-modal[data-modal="${t}"]`),c=L&&L.querySelector("form");if(c){const i=l.dataset.message;if(i){const o=c.querySelector('textarea[name="message"]');o&&(o.value=i)}const n=l.dataset.subject;if(n){const o=c.querySelector('input[name="_subject"]');o&&(o.value=n)}}}catch{}return}const r=a.target.closest(".sidebar__button");if(r&&r.dataset.action){a.preventDefault(),oe(r.dataset.action);return}if(a.target.closest(".contacts-message-btn")){a.preventDefault(),oe("question");return}if(a.target.closest(".mobile-nav__action-btn")){a.preventDefault(),oe("question");return}}))}function De(){Ee||(Re(),je(),Ee=!0,console.log("Модальные формы инициализированы"))}async function _e(e,a){var l;try{const r=a.startsWith("/")?`${ge}${a}`:`${ge}/${a}`,d=await fetch(r);if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const m=await d.text(),t=document.getElementById(e);if(t)try{const E=window.sanitizeHTML?window.sanitizeHTML(m):m,L=document.createElement("template");L.innerHTML=E,t.replaceChildren(),t.append(L.content.cloneNode(!0));try{(l=window.secureExternalLinks)==null||l.call(window,t)}catch{}}catch{const L=document.createElement("template");L.innerHTML=m,t.replaceChildren(),t.append(L.content.cloneNode(!0))}else console.warn(`Элемент с ID ${e} не найден`)}catch(r){console.error(`Ошибка при загрузке компонента ${a}:`,r)}}class He{constructor(){this.sidebar=document.querySelector(".mobile-nav__sidebar"),this.slides=document.querySelector(".mobile-nav__slides"),this.mainSlide=document.querySelector(".mobile-nav__slide-main"),this.submenuSlide=document.querySelector(".mobile-nav__slide-submenu"),this.menuBtn=document.querySelector(".mobile-nav__menu-btn"),this.closeBtn=document.querySelector(".mobile-nav__close"),this.backBtn=document.querySelector(".mobile-nav__back"),this.servicesBtn=document.querySelector(".mobile-nav__category-btn"),this.categoriesList=document.querySelector(".mobile-nav__categories"),this.subcategoryBtns=document.querySelectorAll(".mobile-nav__subcategory-btn"),this.submenus=document.querySelectorAll(".mobile-nav__subsubmenu"),this.isOpen=!1,this.isSubmenuOpen=!1,this.isCategoriesOpen=!1,this.toggleMenu=this.toggleMenu.bind(this),this.closeMenu=this.closeMenu.bind(this),this.toggleCategories=this.toggleCategories.bind(this),this.showSubmenu=this.showSubmenu.bind(this),this.hideSubmenu=this.hideSubmenu.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.initEventListeners()}initEventListeners(){this.menuBtn.addEventListener("click",this.toggleMenu),this.closeBtn.addEventListener("click",this.closeMenu),this.servicesBtn.addEventListener("click",this.toggleCategories),this.subcategoryBtns.forEach(a=>{a.addEventListener("click",()=>{const l=a.dataset.category;this.showSubmenu(l)})}),this.backBtn.addEventListener("click",this.hideSubmenu),document.addEventListener("click",this.handleClickOutside),this.sidebar.addEventListener("click",a=>{a.target.closest("a")&&this.closeMenu()}),this.addInteractiveEffects()}addInteractiveEffects(){this.sidebar.querySelectorAll("a, button").forEach(l=>{l.addEventListener("mouseenter",()=>{l.style.transition="all 0.2s ease",l.style.transform="translateY(-1px)"}),l.addEventListener("mouseleave",()=>{l.style.transform="translateY(0)"}),l.addEventListener("mousedown",()=>{l.style.transform="translateY(1px)"}),l.addEventListener("mouseup",()=>{l.style.transform="translateY(-1px)"})})}toggleMenu(){this.isOpen?this.closeMenu():this.openMenu()}openMenu(){this.isOpen=!0,this.sidebar.classList.add("is-open"),document.body.style.overflow="hidden"}closeMenu(){this.isOpen=!1,this.isSubmenuOpen=!1,this.isCategoriesOpen=!1,this.sidebar.classList.remove("is-open"),this.slides.classList.remove("show-submenu"),this.servicesBtn.classList.remove("is-open"),this.categoriesList.classList.remove("is-open"),document.body.style.overflow=""}toggleCategories(){this.isCategoriesOpen=!this.isCategoriesOpen,this.servicesBtn.classList.toggle("is-open"),this.categoriesList.classList.toggle("is-open")}showSubmenu(a){this.isSubmenuOpen=!0,this.slides.classList.add("show-submenu"),this.submenus.forEach(l=>{l.dataset.category===a?l.classList.add("is-active"):l.classList.remove("is-active")})}hideSubmenu(){this.isSubmenuOpen=!1,this.slides.classList.remove("show-submenu"),this.submenus.forEach(a=>{a.classList.remove("is-active")})}handleClickOutside(a){this.isOpen&&!this.sidebar.contains(a.target)&&!this.menuBtn.contains(a.target)&&this.closeMenu()}}class Ve{constructor(){this.init()}init(){console.log("Инициализация форм"),document.querySelectorAll('form:not([data-form-initialized="true"])').forEach(c=>{c.addEventListener("submit",l),c.dataset.formInitialized="true"});async function l(c){var y,b;c.preventDefault();const i=c.target,n=i.querySelector('[type="submit"]'),o=new FormData(i);if(Object.fromEntries(o.entries()),!r(i))return;const p=i.querySelector('input[name="type"]'),v=p?p.value:"";if(v==="question"||v==="review"){try{const _="79227445287",N=E(v,Object.fromEntries(new FormData(i).entries())),q=`https://wa.me/${_}?text=${encodeURIComponent(N)}`;window.open(q,"_blank","noopener,noreferrer"),t(i,"Откроется WhatsApp для отправки сообщения.","success"),i.reset();try{(y=window.closeFormsModal)==null||y.call(window)}catch{}}catch(_){t(i,"Не удалось открыть WhatsApp.","error"),console.error("WhatsApp open error:",_)}return}try{n.classList.add("button--loading"),n.disabled=!0;const _=await L(i);t(i,"Сообщение отправлено успешно!","success"),i.reset();try{(b=window.closeFormsModal)==null||b.call(window)}catch{}}catch(_){t(i,"Произошла ошибка. Попробуйте позже.","error"),console.error("Form submission error:",_)}finally{n.classList.remove("button--loading"),n.disabled=!1}}function r(c){const i=c.querySelectorAll("input, textarea");let n=!0;return i.forEach(o=>{m(o),o.required&&!o.value.trim()&&(d(o,"Это поле обязательно для заполнения"),n=!1),o.type==="email"&&o.value&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value)||(d(o,"Введите корректный email"),n=!1)),o.type==="tel"&&o.value&&(/^\+?[0-9\s-()]{10,}$/.test(o.value)||(d(o,"Введите корректный номер телефона"),n=!1))}),n}function d(c,i){const n=document.createElement("div");n.className="form__error",n.textContent=i,c.classList.add("input--error"),c.parentNode.appendChild(n)}function m(c){const i=c.parentNode.querySelector(".form__error");i&&i.remove(),c.classList.remove("input--error")}function t(c,i,n){const o=document.createElement("div");o.className=`form__message form__message--${n}`,o.textContent=i;const p=c.querySelector(".form__message");p&&p.remove(),c.appendChild(o),setTimeout(()=>{o.remove()},5e3)}function E(c,i){const n=[];return c==="question"?n.push("Здравствуйте! Хочу задать вопрос."):c==="review"&&n.push("Здравствуйте! Хочу оставить отзыв."),i.name&&n.push(`Имя: ${i.name}`),i.phone&&n.push(`Телефон: ${i.phone}`),i.email&&n.push(`Email: ${i.email}`),i.preferred_time&&n.push(`Удобное время: ${i.preferred_time}`),i.rating&&n.push(`Оценка: ${i.rating}`),i.message&&n.push(`Сообщение: ${i.message}`),i.page&&n.push(`Страница: ${i.page}`),n.join(`
`)}async function L(c){const i=c.getAttribute("action")||"/api/send-form",n=(c.getAttribute("method")||"POST").toUpperCase(),o=new FormData(c);if(i.includes("formspree.io")){const y=await fetch(i,{method:n,body:o,headers:{Accept:"application/json"}});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);try{return await y.json()}catch{return{}}}const p=Object.fromEntries(o.entries()),v=await fetch(i,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);return await v.json()}}}function Ue(){return console.log("Запуск инициализации форм"),new Ve}window.initVideoModal=Fe;window.initGalleryModal=Te;window.initForms=Ue;window.sanitizeHTML=window.sanitizeHTML||(e=>e);function Ke(){if(document.getElementById("cookieBannerStyles"))return;const e=document.createElement("style");e.id="cookieBannerStyles",e.textContent=`
  .cookie-banner { 
    position: fixed; 
    left: 16px; 
    right: 16px; 
    bottom: 16px; 
    z-index: 1100; 
    display: flex; 
    gap: 16px; 
    align-items: flex-start; 
    padding: 16px; 
    background: var(--color-background, #fff); 
    color: var(--color-dark, #222); 
    border: 1px solid var(--color-border, #e0e0e0); 
    border-radius: 12px; 
    box-shadow: var(--shadow-lg, 0 10px 30px rgba(0,0,0,.15)); 
    max-width: 960px; 
    margin: 0 auto; 
  }
  .cookie-banner__text { 
    flex: 1; 
    line-height: 1.5; 
    font-size: 14px; 
  }
  .cookie-banner__actions { 
    display: flex; 
    gap: 12px; 
    flex-wrap: wrap; 
  }
  .cookie-banner__link { 
    color: var(--color-secondary, #a78b3d); 
    text-decoration: underline; 
  }
  .cookie-banner__btn { 
    white-space: nowrap; 
  }
  .consent-checkbox {
    margin: 10px 0;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 4px;
    border: 1px solid #e9ecef;
  }
  .consent-checkbox label {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    font-size: 13px;
    cursor: pointer;
    line-height: 1.4;
  }
  .consent-checkbox input[type="checkbox"] {
    margin-top: 2px;
    flex-shrink: 0;
  }
  .form-consent {
    margin: 15px 0;
    padding: 12px;
    background: #f8f9fa;
    border-radius: 6px;
    border-left: 4px solid #007bff;
  }
  .form-consent label {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    font-size: 14px;
    cursor: pointer;
    line-height: 1.4;
  }
  .form-consent input[type="checkbox"] {
    margin-top: 2px;
    flex-shrink: 0;
  }
  @media (max-width: 640px){ 
    .cookie-banner{ 
      flex-direction: column; 
      gap: 12px; 
      padding: 12px; 
    }
    .cookie-banner__actions {
      width: 100%;
      justify-content: stretch;
    }
    .cookie-banner__btn {
      flex: 1;
      min-width: 120px;
    }
  }
  `,document.head.appendChild(e)}function Qe(){if(document.getElementById("cookieBanner"))return;const e=document.createElement("div");e.id="cookieBanner",e.className="cookie-banner",e.setAttribute("role","region"),e.setAttribute("aria-label","Уведомление об использовании cookies");const a=document.createElement("p");a.className="cookie-banner__text";const l=document.createElement("span");l.textContent="Мы используем файлы cookie для улучшения работы сайта. ";const r=document.createElement("a");r.className="cookie-banner__link",r.href="/privacy",r.textContent="Подробнее в Политике конфиденциальности",r.setAttribute("rel","noopener"),r.setAttribute("target","_self");const d=document.createElement("span");d.textContent=".",a.append(l,r,d);const m=document.createElement("div");m.className="cookie-banner__actions";const t=document.createElement("button");t.className="button button--primary cookie-banner__btn",t.type="button",t.textContent="Принять",t.addEventListener("click",()=>{try{localStorage.setItem("cookieConsent","accepted"),localStorage.setItem("cookieConsentDate",new Date().toISOString())}catch{}e.remove(),xe()});const E=document.createElement("button");E.className="button button--secondary cookie-banner__btn",E.type="button",E.textContent="Отклонить",E.addEventListener("click",()=>{try{localStorage.setItem("cookieConsent","rejected")}catch{}e.remove()}),m.append(t,E),e.append(a,m),document.body.appendChild(e)}function xe(){console.log("📊 Инициализация аналитики (после согласия пользователя)")}function Ye(){document.querySelectorAll("form:not([data-no-consent])").forEach(a=>{if(!a.querySelector('input[name="personal-data-consent"]')){const l=document.createElement("div");l.className="form-consent";const r=document.createElement("label"),d=document.createElement("input");d.type="checkbox",d.name="personal-data-consent",d.required=!0;const m=document.createElement("span"),t=document.createTextNode("Я согласен на обработку моих персональных данных в соответствии с "),E=document.createElement("a");E.href="/privacy",E.target="_blank",E.textContent="Политикой конфиденциальности",E.style.color="#007bff";const L=document.createTextNode("");m.appendChild(t),m.appendChild(E),m.appendChild(L),r.appendChild(d),r.appendChild(m),l.appendChild(r);const c=a.querySelector('button[type="submit"], input[type="submit"]');c?c.parentNode.insertBefore(l,c):a.appendChild(l)}})}function Ge(){document.addEventListener("submit",function(e){const a=e.target;if(a.hasAttribute("data-no-consent"))return;const l=a.querySelector('input[name="personal-data-consent"]');l&&!l.checked&&(e.preventDefault(),alert("Для отправки формы необходимо согласие на обработку персональных данных"),l.focus(),l.scrollIntoView({behavior:"smooth",block:"center"}))})}function Je(){const e={privacyPage:!!document.querySelector('a[href*="privacy"]'),formsWithConsent:document.querySelectorAll('input[name="personal-data-consent"]').length,cookieBanner:!!document.getElementById("cookieBanner"),hasLegalInfo:!!document.querySelector('.legal-info, [class*="requisites"], [class*="реквизиты"]')};return console.log("📋 Проверка юридических требований:",e),e.privacyPage||console.warn("⚠️ Не найдена ссылка на политику конфиденциальности"),e.hasLegalInfo||console.warn("⚠️ Не найдена юридическая информация (реквизиты)"),e}function Xe(){try{if(localStorage.getItem("cookieConsent")==="accepted"){xe();return}}catch{}Ke(),Qe()}async function Ze(){try{document.getElementById("header-placeholder")&&await _e("header-placeholder","/components/partials/header.html"),document.getElementById("footer-placeholder")&&await _e("footer-placeholder","/components/partials/footer.html")}catch(e){console.warn("Layout components loading failed:",e)}}document.addEventListener("DOMContentLoaded",async()=>{console.log("🚀 AQUANIKA loaded in",window.location.hostname.includes("github.io")?"GitHub Pages":window.location.hostname==="localhost"?"Local development":"Production","mode"),await Promise.all([Ze(),new Promise(e=>{new He,e()})]);try{De()}catch(e){console.warn("initFormsModals failed",e)}try{Xe()}catch(e){console.warn("initCookieBanner failed",e)}try{Ye(),Ge()}catch(e){console.warn("Form consent initialization failed",e)}try{Je()}catch(e){console.warn("Legal requirements check failed",e)}Ne()});
//# sourceMappingURL=main-DZHqVqX5.js.map
