{"version":3,"file":"sideMenu-DzSdgMXP.js","sources":["../../src/js/components/sideMenu.js"],"sourcesContent":["import { routes } from \"./router.js\";\r\n\r\n// Управление боковым меню\r\nexport function initSideMenu() {\r\n  // Определение текущей страницы\r\n  const currentPath = window.location.pathname;\r\n  const sideMenuLinks = document.querySelectorAll(\".side-menu__link\");\r\n  const mainContent = document.querySelector(\"main\");\r\n\r\n  // Добавление класса active для текущей страницы и обработчиков событий\r\n  sideMenuLinks.forEach((link) => {\r\n    if (link.getAttribute(\"href\") === currentPath) {\r\n      link.classList.add(\"active\");\r\n    }\r\n\r\n    // Удаляем старые обработчики перед добавлением новых\r\n    link.removeEventListener(\"click\", handleSideMenuClick);\r\n    // Добавляем обработчик клика для каждой ссылки\r\n    link.addEventListener(\"click\", handleSideMenuClick);\r\n  });\r\n\r\n  // Добавление класса для контента\r\n  if (mainContent) {\r\n    mainContent.classList.add(\"with-side-menu\");\r\n    // Настраиваем поведение для мобильных устройств\r\n    setupMobileMenu(mainContent);\r\n  }\r\n}\r\n\r\n// Показ/скрытие меню на мобильных устройствах\r\nfunction setupMobileMenu(mainContent) {\r\n  const sideMenu = document.querySelector(\".side-menu\");\r\n  if (sideMenu) {\r\n    const mediaQuery = window.matchMedia(\"(max-width: 992px)\");\r\n\r\n    function handleScreenChange(e) {\r\n      if (e.matches) {\r\n        // Мобильная версия\r\n        mainContent.classList.remove(\"with-side-menu\");\r\n      } else {\r\n        // Десктопная версия\r\n        mainContent.classList.add(\"with-side-menu\");\r\n      }\r\n    }\r\n\r\n    mediaQuery.addListener(handleScreenChange);\r\n    handleScreenChange(mediaQuery);\r\n  }\r\n}\r\n\r\n// Обработчик клика по ссылкам в боковом меню\r\nfunction handleSideMenuClick(e) {\r\n  e.preventDefault();\r\n  const href = this.getAttribute(\"href\");\r\n  const pageContent = document.querySelector(\".page-content\");\r\n\r\n  // Обновляем URL без перезагрузки страницы\r\n  window.history.pushState({}, \"\", href);\r\n\r\n  // Удаляем класс active со всех ссылок\r\n  document.querySelectorAll(\".side-menu__link\").forEach((link) => {\r\n    link.classList.remove(\"active\");\r\n  });\r\n\r\n  // Добавляем класс active текущей ссылке\r\n  this.classList.add(\"active\");\r\n\r\n  // Загружаем новый контент\r\n  if (routes[href]) {\r\n    fetch(routes[href])\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        return response.text();\r\n      })\r\n      .then((content) => {\r\n        if (pageContent) {\r\n          pageContent.innerHTML = content;\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Ошибка загрузки контента:\", error);\r\n        if (pageContent) {\r\n          pageContent.innerHTML = \"<h1>Ошибка загрузки страницы</h1>\";\r\n        }\r\n      });\r\n  } else {\r\n    console.error(\"Маршрут не найден:\", href);\r\n    if (pageContent) {\r\n      pageContent.innerHTML = \"<h1>Страница не найдена</h1>\";\r\n    }\r\n  }\r\n}\r\n"],"names":["initSideMenu","currentPath","sideMenuLinks","mainContent","link","handleSideMenuClick","setupMobileMenu","handleScreenChange","e","mediaQuery","href","pageContent","routes","response","content","error"],"mappings":"kCAGO,SAASA,GAAe,CAE7B,MAAMC,EAAc,OAAO,SAAS,SAC9BC,EAAgB,SAAS,iBAAiB,kBAAkB,EAC5DC,EAAc,SAAS,cAAc,MAAM,EAGjDD,EAAc,QAASE,GAAS,CAC1BA,EAAK,aAAa,MAAM,IAAMH,GAChCG,EAAK,UAAU,IAAI,QAAQ,EAI7BA,EAAK,oBAAoB,QAASC,CAAmB,EAErDD,EAAK,iBAAiB,QAASC,CAAmB,CACtD,CAAG,EAGGF,IACFA,EAAY,UAAU,IAAI,gBAAgB,EAE1CG,EAAgBH,CAAW,EAE/B,CAGA,SAASG,EAAgBH,EAAa,CAEpC,GADiB,SAAS,cAAc,YAAY,EACtC,CAGZ,IAASI,EAAT,SAA4BC,EAAG,CACzBA,EAAE,QAEJL,EAAY,UAAU,OAAO,gBAAgB,EAG7CA,EAAY,UAAU,IAAI,gBAAgB,CAElD,EAVI,MAAMM,EAAa,OAAO,WAAW,oBAAoB,EAYzDA,EAAW,YAAYF,CAAkB,EACzCA,EAAmBE,CAAU,CACjC,CACA,CAGA,SAASJ,EAAoBG,EAAG,CAC9BA,EAAE,eAAc,EAChB,MAAME,EAAO,KAAK,aAAa,MAAM,EAC/BC,EAAc,SAAS,cAAc,eAAe,EAG1D,OAAO,QAAQ,UAAU,CAAA,EAAI,GAAID,CAAI,EAGrC,SAAS,iBAAiB,kBAAkB,EAAE,QAASN,GAAS,CAC9DA,EAAK,UAAU,OAAO,QAAQ,CAClC,CAAG,EAGD,KAAK,UAAU,IAAI,QAAQ,EAGvBQ,EAAOF,CAAI,EACb,MAAME,EAAOF,CAAI,CAAC,EACf,KAAMG,GAAa,CAClB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,OAAOA,EAAS,MACxB,CAAO,EACA,KAAMC,GAAY,CACbH,IACFA,EAAY,UAAYG,EAElC,CAAO,EACA,MAAOC,GAAU,CAChB,QAAQ,MAAM,4BAA6BA,CAAK,EAC5CJ,IACFA,EAAY,UAAY,oCAElC,CAAO,GAEH,QAAQ,MAAM,qBAAsBD,CAAI,EACpCC,IACFA,EAAY,UAAY,gCAG9B"}