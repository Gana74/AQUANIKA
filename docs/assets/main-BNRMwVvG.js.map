{"version":3,"file":"main-BNRMwVvG.js","sources":["../../node_modules/lazysizes/lazysizes.js","../../src/js/components/toTopButton.js","../../src/assets/video/home.mp4","../../src/js/components/modalVideo.js","../../src/js/components/modalGallery.js","../../src/js/components/formsModals.js","../../src/js/components/loadComponents.js","../../src/js/components/mobileMenu.js","../../src/js/components/map.js","../../src/js/components/forms.js","../../src/js/main.js"],"sourcesContent":["(function(window, factory) {\n\tvar lazySizes = factory(window, window.document, Date);\n\twindow.lazySizes = lazySizes;\n\tif(typeof module == 'object' && module.exports){\n\t\tmodule.exports = lazySizes;\n\t}\n}(typeof window != 'undefined' ?\n      window : {}, \n/**\n * import(\"./types/global\")\n * @typedef { import(\"./types/lazysizes-config\").LazySizesConfigPartial } LazySizesConfigPartial\n */\nfunction l(window, document, Date) { // Pass in the window Date function also for SSR because the Date class can be lost\n\t'use strict';\n\t/*jshint eqnull:true */\n\n\tvar lazysizes,\n\t\t/**\n\t\t * @type { LazySizesConfigPartial }\n\t\t */\n\t\tlazySizesCfg;\n\n\t(function(){\n\t\tvar prop;\n\n\t\tvar lazySizesDefaults = {\n\t\t\tlazyClass: 'lazyload',\n\t\t\tloadedClass: 'lazyloaded',\n\t\t\tloadingClass: 'lazyloading',\n\t\t\tpreloadClass: 'lazypreload',\n\t\t\terrorClass: 'lazyerror',\n\t\t\t//strictClass: 'lazystrict',\n\t\t\tautosizesClass: 'lazyautosizes',\n\t\t\tfastLoadedClass: 'ls-is-cached',\n\t\t\tiframeLoadMode: 0,\n\t\t\tsrcAttr: 'data-src',\n\t\t\tsrcsetAttr: 'data-srcset',\n\t\t\tsizesAttr: 'data-sizes',\n\t\t\t//preloadAfterLoad: false,\n\t\t\tminSize: 40,\n\t\t\tcustomMedia: {},\n\t\t\tinit: true,\n\t\t\texpFactor: 1.5,\n\t\t\thFac: 0.8,\n\t\t\tloadMode: 2,\n\t\t\tloadHidden: true,\n\t\t\tricTimeout: 0,\n\t\t\tthrottleDelay: 125,\n\t\t};\n\n\t\tlazySizesCfg = window.lazySizesConfig || window.lazysizesConfig || {};\n\n\t\tfor(prop in lazySizesDefaults){\n\t\t\tif(!(prop in lazySizesCfg)){\n\t\t\t\tlazySizesCfg[prop] = lazySizesDefaults[prop];\n\t\t\t}\n\t\t}\n\t})();\n\n\tif (!document || !document.getElementsByClassName) {\n\t\treturn {\n\t\t\tinit: function () {},\n\t\t\t/**\n\t\t\t * @type { LazySizesConfigPartial }\n\t\t\t */\n\t\t\tcfg: lazySizesCfg,\n\t\t\t/**\n\t\t\t * @type { true }\n\t\t\t */\n\t\t\tnoSupport: true,\n\t\t};\n\t}\n\n\tvar docElem = document.documentElement;\n\n\tvar supportPicture = window.HTMLPictureElement;\n\n\tvar _addEventListener = 'addEventListener';\n\n\tvar _getAttribute = 'getAttribute';\n\n\t/**\n\t * Update to bind to window because 'this' becomes null during SSR\n\t * builds.\n\t */\n\tvar addEventListener = window[_addEventListener].bind(window);\n\n\tvar setTimeout = window.setTimeout;\n\n\tvar requestAnimationFrame = window.requestAnimationFrame || setTimeout;\n\n\tvar requestIdleCallback = window.requestIdleCallback;\n\n\tvar regPicture = /^picture$/i;\n\n\tvar loadEvents = ['load', 'error', 'lazyincluded', '_lazyloaded'];\n\n\tvar regClassCache = {};\n\n\tvar forEach = Array.prototype.forEach;\n\n\t/**\n\t * @param ele {Element}\n\t * @param cls {string}\n\t */\n\tvar hasClass = function(ele, cls) {\n\t\tif(!regClassCache[cls]){\n\t\t\tregClassCache[cls] = new RegExp('(\\\\s|^)'+cls+'(\\\\s|$)');\n\t\t}\n\t\treturn regClassCache[cls].test(ele[_getAttribute]('class') || '') && regClassCache[cls];\n\t};\n\n\t/**\n\t * @param ele {Element}\n\t * @param cls {string}\n\t */\n\tvar addClass = function(ele, cls) {\n\t\tif (!hasClass(ele, cls)){\n\t\t\tele.setAttribute('class', (ele[_getAttribute]('class') || '').trim() + ' ' + cls);\n\t\t}\n\t};\n\n\t/**\n\t * @param ele {Element}\n\t * @param cls {string}\n\t */\n\tvar removeClass = function(ele, cls) {\n\t\tvar reg;\n\t\tif ((reg = hasClass(ele,cls))) {\n\t\t\tele.setAttribute('class', (ele[_getAttribute]('class') || '').replace(reg, ' '));\n\t\t}\n\t};\n\n\tvar addRemoveLoadEvents = function(dom, fn, add){\n\t\tvar action = add ? _addEventListener : 'removeEventListener';\n\t\tif(add){\n\t\t\taddRemoveLoadEvents(dom, fn);\n\t\t}\n\t\tloadEvents.forEach(function(evt){\n\t\t\tdom[action](evt, fn);\n\t\t});\n\t};\n\n\t/**\n\t * @param elem { Element }\n\t * @param name { string }\n\t * @param detail { any }\n\t * @param noBubbles { boolean }\n\t * @param noCancelable { boolean }\n\t * @returns { CustomEvent }\n\t */\n\tvar triggerEvent = function(elem, name, detail, noBubbles, noCancelable){\n\t\tvar event = document.createEvent('Event');\n\n\t\tif(!detail){\n\t\t\tdetail = {};\n\t\t}\n\n\t\tdetail.instance = lazysizes;\n\n\t\tevent.initEvent(name, !noBubbles, !noCancelable);\n\n\t\tevent.detail = detail;\n\n\t\telem.dispatchEvent(event);\n\t\treturn event;\n\t};\n\n\tvar updatePolyfill = function (el, full){\n\t\tvar polyfill;\n\t\tif( !supportPicture && ( polyfill = (window.picturefill || lazySizesCfg.pf) ) ){\n\t\t\tif(full && full.src && !el[_getAttribute]('srcset')){\n\t\t\t\tel.setAttribute('srcset', full.src);\n\t\t\t}\n\t\t\tpolyfill({reevaluate: true, elements: [el]});\n\t\t} else if(full && full.src){\n\t\t\tel.src = full.src;\n\t\t}\n\t};\n\n\tvar getCSS = function (elem, style){\n\t\treturn (getComputedStyle(elem, null) || {})[style];\n\t};\n\n\t/**\n\t *\n\t * @param elem { Element }\n\t * @param parent { Element }\n\t * @param [width] {number}\n\t * @returns {number}\n\t */\n\tvar getWidth = function(elem, parent, width){\n\t\twidth = width || elem.offsetWidth;\n\n\t\twhile(width < lazySizesCfg.minSize && parent && !elem._lazysizesWidth){\n\t\t\twidth =  parent.offsetWidth;\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn width;\n\t};\n\n\tvar rAF = (function(){\n\t\tvar running, waiting;\n\t\tvar firstFns = [];\n\t\tvar secondFns = [];\n\t\tvar fns = firstFns;\n\n\t\tvar run = function(){\n\t\t\tvar runFns = fns;\n\n\t\t\tfns = firstFns.length ? secondFns : firstFns;\n\n\t\t\trunning = true;\n\t\t\twaiting = false;\n\n\t\t\twhile(runFns.length){\n\t\t\t\trunFns.shift()();\n\t\t\t}\n\n\t\t\trunning = false;\n\t\t};\n\n\t\tvar rafBatch = function(fn, queue){\n\t\t\tif(running && !queue){\n\t\t\t\tfn.apply(this, arguments);\n\t\t\t} else {\n\t\t\t\tfns.push(fn);\n\n\t\t\t\tif(!waiting){\n\t\t\t\t\twaiting = true;\n\t\t\t\t\t(document.hidden ? setTimeout : requestAnimationFrame)(run);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\trafBatch._lsFlush = run;\n\n\t\treturn rafBatch;\n\t})();\n\n\tvar rAFIt = function(fn, simple){\n\t\treturn simple ?\n\t\t\tfunction() {\n\t\t\t\trAF(fn);\n\t\t\t} :\n\t\t\tfunction(){\n\t\t\t\tvar that = this;\n\t\t\t\tvar args = arguments;\n\t\t\t\trAF(function(){\n\t\t\t\t\tfn.apply(that, args);\n\t\t\t\t});\n\t\t\t}\n\t\t;\n\t};\n\n\tvar throttle = function(fn){\n\t\tvar running;\n\t\tvar lastTime = 0;\n\t\tvar gDelay = lazySizesCfg.throttleDelay;\n\t\tvar rICTimeout = lazySizesCfg.ricTimeout;\n\t\tvar run = function(){\n\t\t\trunning = false;\n\t\t\tlastTime = Date.now();\n\t\t\tfn();\n\t\t};\n\t\tvar idleCallback = requestIdleCallback && rICTimeout > 49 ?\n\t\t\tfunction(){\n\t\t\t\trequestIdleCallback(run, {timeout: rICTimeout});\n\n\t\t\t\tif(rICTimeout !== lazySizesCfg.ricTimeout){\n\t\t\t\t\trICTimeout = lazySizesCfg.ricTimeout;\n\t\t\t\t}\n\t\t\t} :\n\t\t\trAFIt(function(){\n\t\t\t\tsetTimeout(run);\n\t\t\t}, true)\n\t\t;\n\n\t\treturn function(isPriority){\n\t\t\tvar delay;\n\n\t\t\tif((isPriority = isPriority === true)){\n\t\t\t\trICTimeout = 33;\n\t\t\t}\n\n\t\t\tif(running){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trunning =  true;\n\n\t\t\tdelay = gDelay - (Date.now() - lastTime);\n\n\t\t\tif(delay < 0){\n\t\t\t\tdelay = 0;\n\t\t\t}\n\n\t\t\tif(isPriority || delay < 9){\n\t\t\t\tidleCallback();\n\t\t\t} else {\n\t\t\t\tsetTimeout(idleCallback, delay);\n\t\t\t}\n\t\t};\n\t};\n\n\t//based on http://modernjavascript.blogspot.de/2013/08/building-better-debounce.html\n\tvar debounce = function(func) {\n\t\tvar timeout, timestamp;\n\t\tvar wait = 99;\n\t\tvar run = function(){\n\t\t\ttimeout = null;\n\t\t\tfunc();\n\t\t};\n\t\tvar later = function() {\n\t\t\tvar last = Date.now() - timestamp;\n\n\t\t\tif (last < wait) {\n\t\t\t\tsetTimeout(later, wait - last);\n\t\t\t} else {\n\t\t\t\t(requestIdleCallback || run)(run);\n\t\t\t}\n\t\t};\n\n\t\treturn function() {\n\t\t\ttimestamp = Date.now();\n\n\t\t\tif (!timeout) {\n\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t}\n\t\t};\n\t};\n\n\tvar loader = (function(){\n\t\tvar preloadElems, isCompleted, resetPreloadingTimer, loadMode, started;\n\n\t\tvar eLvW, elvH, eLtop, eLleft, eLright, eLbottom, isBodyHidden;\n\n\t\tvar regImg = /^img$/i;\n\t\tvar regIframe = /^iframe$/i;\n\n\t\tvar supportScroll = ('onscroll' in window) && !(/(gle|ing)bot/.test(navigator.userAgent));\n\n\t\tvar shrinkExpand = 0;\n\t\tvar currentExpand = 0;\n\n\t\tvar isLoading = 0;\n\t\tvar lowRuns = -1;\n\n\t\tvar resetPreloading = function(e){\n\t\t\tisLoading--;\n\t\t\tif(!e || isLoading < 0 || !e.target){\n\t\t\t\tisLoading = 0;\n\t\t\t}\n\t\t};\n\n\t\tvar isVisible = function (elem) {\n\t\t\tif (isBodyHidden == null) {\n\t\t\t\tisBodyHidden = getCSS(document.body, 'visibility') == 'hidden';\n\t\t\t}\n\n\t\t\treturn isBodyHidden || !(getCSS(elem.parentNode, 'visibility') == 'hidden' && getCSS(elem, 'visibility') == 'hidden');\n\t\t};\n\n\t\tvar isNestedVisible = function(elem, elemExpand){\n\t\t\tvar outerRect;\n\t\t\tvar parent = elem;\n\t\t\tvar visible = isVisible(elem);\n\n\t\t\teLtop -= elemExpand;\n\t\t\teLbottom += elemExpand;\n\t\t\teLleft -= elemExpand;\n\t\t\teLright += elemExpand;\n\n\t\t\twhile(visible && (parent = parent.offsetParent) && parent != document.body && parent != docElem){\n\t\t\t\tvisible = ((getCSS(parent, 'opacity') || 1) > 0);\n\n\t\t\t\tif(visible && getCSS(parent, 'overflow') != 'visible'){\n\t\t\t\t\touterRect = parent.getBoundingClientRect();\n\t\t\t\t\tvisible = eLright > outerRect.left &&\n\t\t\t\t\t\teLleft < outerRect.right &&\n\t\t\t\t\t\teLbottom > outerRect.top - 1 &&\n\t\t\t\t\t\teLtop < outerRect.bottom + 1\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn visible;\n\t\t};\n\n\t\tvar checkElements = function() {\n\t\t\tvar eLlen, i, rect, autoLoadElem, loadedSomething, elemExpand, elemNegativeExpand, elemExpandVal,\n\t\t\t\tbeforeExpandVal, defaultExpand, preloadExpand, hFac;\n\t\t\tvar lazyloadElems = lazysizes.elements;\n\n\t\t\tif((loadMode = lazySizesCfg.loadMode) && isLoading < 8 && (eLlen = lazyloadElems.length)){\n\n\t\t\t\ti = 0;\n\n\t\t\t\tlowRuns++;\n\n\t\t\t\tfor(; i < eLlen; i++){\n\n\t\t\t\t\tif(!lazyloadElems[i] || lazyloadElems[i]._lazyRace){continue;}\n\n\t\t\t\t\tif(!supportScroll || (lazysizes.prematureUnveil && lazysizes.prematureUnveil(lazyloadElems[i]))){unveilElement(lazyloadElems[i]);continue;}\n\n\t\t\t\t\tif(!(elemExpandVal = lazyloadElems[i][_getAttribute]('data-expand')) || !(elemExpand = elemExpandVal * 1)){\n\t\t\t\t\t\telemExpand = currentExpand;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!defaultExpand) {\n\t\t\t\t\t\tdefaultExpand = (!lazySizesCfg.expand || lazySizesCfg.expand < 1) ?\n\t\t\t\t\t\t\tdocElem.clientHeight > 500 && docElem.clientWidth > 500 ? 500 : 370 :\n\t\t\t\t\t\t\tlazySizesCfg.expand;\n\n\t\t\t\t\t\tlazysizes._defEx = defaultExpand;\n\n\t\t\t\t\t\tpreloadExpand = defaultExpand * lazySizesCfg.expFactor;\n\t\t\t\t\t\thFac = lazySizesCfg.hFac;\n\t\t\t\t\t\tisBodyHidden = null;\n\n\t\t\t\t\t\tif(currentExpand < preloadExpand && isLoading < 1 && lowRuns > 2 && loadMode > 2 && !document.hidden){\n\t\t\t\t\t\t\tcurrentExpand = preloadExpand;\n\t\t\t\t\t\t\tlowRuns = 0;\n\t\t\t\t\t\t} else if(loadMode > 1 && lowRuns > 1 && isLoading < 6){\n\t\t\t\t\t\t\tcurrentExpand = defaultExpand;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcurrentExpand = shrinkExpand;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(beforeExpandVal !== elemExpand){\n\t\t\t\t\t\teLvW = innerWidth + (elemExpand * hFac);\n\t\t\t\t\t\telvH = innerHeight + elemExpand;\n\t\t\t\t\t\telemNegativeExpand = elemExpand * -1;\n\t\t\t\t\t\tbeforeExpandVal = elemExpand;\n\t\t\t\t\t}\n\n\t\t\t\t\trect = lazyloadElems[i].getBoundingClientRect();\n\n\t\t\t\t\tif ((eLbottom = rect.bottom) >= elemNegativeExpand &&\n\t\t\t\t\t\t(eLtop = rect.top) <= elvH &&\n\t\t\t\t\t\t(eLright = rect.right) >= elemNegativeExpand * hFac &&\n\t\t\t\t\t\t(eLleft = rect.left) <= eLvW &&\n\t\t\t\t\t\t(eLbottom || eLright || eLleft || eLtop) &&\n\t\t\t\t\t\t(lazySizesCfg.loadHidden || isVisible(lazyloadElems[i])) &&\n\t\t\t\t\t\t((isCompleted && isLoading < 3 && !elemExpandVal && (loadMode < 3 || lowRuns < 4)) || isNestedVisible(lazyloadElems[i], elemExpand))){\n\t\t\t\t\t\tunveilElement(lazyloadElems[i]);\n\t\t\t\t\t\tloadedSomething = true;\n\t\t\t\t\t\tif(isLoading > 9){break;}\n\t\t\t\t\t} else if(!loadedSomething && isCompleted && !autoLoadElem &&\n\t\t\t\t\t\tisLoading < 4 && lowRuns < 4 && loadMode > 2 &&\n\t\t\t\t\t\t(preloadElems[0] || lazySizesCfg.preloadAfterLoad) &&\n\t\t\t\t\t\t(preloadElems[0] || (!elemExpandVal && ((eLbottom || eLright || eLleft || eLtop) || lazyloadElems[i][_getAttribute](lazySizesCfg.sizesAttr) != 'auto')))){\n\t\t\t\t\t\tautoLoadElem = preloadElems[0] || lazyloadElems[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(autoLoadElem && !loadedSomething){\n\t\t\t\t\tunveilElement(autoLoadElem);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar throttledCheckElements = throttle(checkElements);\n\n\t\tvar switchLoadingClass = function(e){\n\t\t\tvar elem = e.target;\n\n\t\t\tif (elem._lazyCache) {\n\t\t\t\tdelete elem._lazyCache;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresetPreloading(e);\n\t\t\taddClass(elem, lazySizesCfg.loadedClass);\n\t\t\tremoveClass(elem, lazySizesCfg.loadingClass);\n\t\t\taddRemoveLoadEvents(elem, rafSwitchLoadingClass);\n\t\t\ttriggerEvent(elem, 'lazyloaded');\n\t\t};\n\t\tvar rafedSwitchLoadingClass = rAFIt(switchLoadingClass);\n\t\tvar rafSwitchLoadingClass = function(e){\n\t\t\trafedSwitchLoadingClass({target: e.target});\n\t\t};\n\n\t\tvar changeIframeSrc = function(elem, src){\n\t\t\tvar loadMode = elem.getAttribute('data-load-mode') || lazySizesCfg.iframeLoadMode;\n\n\t\t\t// loadMode can be also a string!\n\t\t\tif (loadMode == 0) {\n\t\t\t\telem.contentWindow.location.replace(src);\n\t\t\t} else if (loadMode == 1) {\n\t\t\t\telem.src = src;\n\t\t\t}\n\t\t};\n\n\t\tvar handleSources = function(source){\n\t\t\tvar customMedia;\n\n\t\t\tvar sourceSrcset = source[_getAttribute](lazySizesCfg.srcsetAttr);\n\n\t\t\tif( (customMedia = lazySizesCfg.customMedia[source[_getAttribute]('data-media') || source[_getAttribute]('media')]) ){\n\t\t\t\tsource.setAttribute('media', customMedia);\n\t\t\t}\n\n\t\t\tif(sourceSrcset){\n\t\t\t\tsource.setAttribute('srcset', sourceSrcset);\n\t\t\t}\n\t\t};\n\n\t\tvar lazyUnveil = rAFIt(function (elem, detail, isAuto, sizes, isImg){\n\t\t\tvar src, srcset, parent, isPicture, event, firesLoad;\n\n\t\t\tif(!(event = triggerEvent(elem, 'lazybeforeunveil', detail)).defaultPrevented){\n\n\t\t\t\tif(sizes){\n\t\t\t\t\tif(isAuto){\n\t\t\t\t\t\taddClass(elem, lazySizesCfg.autosizesClass);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem.setAttribute('sizes', sizes);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsrcset = elem[_getAttribute](lazySizesCfg.srcsetAttr);\n\t\t\t\tsrc = elem[_getAttribute](lazySizesCfg.srcAttr);\n\n\t\t\t\tif(isImg) {\n\t\t\t\t\tparent = elem.parentNode;\n\t\t\t\t\tisPicture = parent && regPicture.test(parent.nodeName || '');\n\t\t\t\t}\n\n\t\t\t\tfiresLoad = detail.firesLoad || (('src' in elem) && (srcset || src || isPicture));\n\n\t\t\t\tevent = {target: elem};\n\n\t\t\t\taddClass(elem, lazySizesCfg.loadingClass);\n\n\t\t\t\tif(firesLoad){\n\t\t\t\t\tclearTimeout(resetPreloadingTimer);\n\t\t\t\t\tresetPreloadingTimer = setTimeout(resetPreloading, 2500);\n\t\t\t\t\taddRemoveLoadEvents(elem, rafSwitchLoadingClass, true);\n\t\t\t\t}\n\n\t\t\t\tif(isPicture){\n\t\t\t\t\tforEach.call(parent.getElementsByTagName('source'), handleSources);\n\t\t\t\t}\n\n\t\t\t\tif(srcset){\n\t\t\t\t\telem.setAttribute('srcset', srcset);\n\t\t\t\t} else if(src && !isPicture){\n\t\t\t\t\tif(regIframe.test(elem.nodeName)){\n\t\t\t\t\t\tchangeIframeSrc(elem, src);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem.src = src;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(isImg && (srcset || isPicture)){\n\t\t\t\t\tupdatePolyfill(elem, {src: src});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(elem._lazyRace){\n\t\t\t\tdelete elem._lazyRace;\n\t\t\t}\n\t\t\tremoveClass(elem, lazySizesCfg.lazyClass);\n\n\t\t\trAF(function(){\n\t\t\t\t// Part of this can be removed as soon as this fix is older: https://bugs.chromium.org/p/chromium/issues/detail?id=7731 (2015)\n\t\t\t\tvar isLoaded = elem.complete && elem.naturalWidth > 1;\n\n\t\t\t\tif( !firesLoad || isLoaded){\n\t\t\t\t\tif (isLoaded) {\n\t\t\t\t\t\taddClass(elem, lazySizesCfg.fastLoadedClass);\n\t\t\t\t\t}\n\t\t\t\t\tswitchLoadingClass(event);\n\t\t\t\t\telem._lazyCache = true;\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tif ('_lazyCache' in elem) {\n\t\t\t\t\t\t\tdelete elem._lazyCache;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 9);\n\t\t\t\t}\n\t\t\t\tif (elem.loading == 'lazy') {\n\t\t\t\t\tisLoading--;\n\t\t\t\t}\n\t\t\t}, true);\n\t\t});\n\n\t\t/**\n\t\t *\n\t\t * @param elem { Element }\n\t\t */\n\t\tvar unveilElement = function (elem){\n\t\t\tif (elem._lazyRace) {return;}\n\t\t\tvar detail;\n\n\t\t\tvar isImg = regImg.test(elem.nodeName);\n\n\t\t\t//allow using sizes=\"auto\", but don't use. it's invalid. Use data-sizes=\"auto\" or a valid value for sizes instead (i.e.: sizes=\"80vw\")\n\t\t\tvar sizes = isImg && (elem[_getAttribute](lazySizesCfg.sizesAttr) || elem[_getAttribute]('sizes'));\n\t\t\tvar isAuto = sizes == 'auto';\n\n\t\t\tif( (isAuto || !isCompleted) && isImg && (elem[_getAttribute]('src') || elem.srcset) && !elem.complete && !hasClass(elem, lazySizesCfg.errorClass) && hasClass(elem, lazySizesCfg.lazyClass)){return;}\n\n\t\t\tdetail = triggerEvent(elem, 'lazyunveilread').detail;\n\n\t\t\tif(isAuto){\n\t\t\t\t autoSizer.updateElem(elem, true, elem.offsetWidth);\n\t\t\t}\n\n\t\t\telem._lazyRace = true;\n\t\t\tisLoading++;\n\n\t\t\tlazyUnveil(elem, detail, isAuto, sizes, isImg);\n\t\t};\n\n\t\tvar afterScroll = debounce(function(){\n\t\t\tlazySizesCfg.loadMode = 3;\n\t\t\tthrottledCheckElements();\n\t\t});\n\n\t\tvar altLoadmodeScrollListner = function(){\n\t\t\tif(lazySizesCfg.loadMode == 3){\n\t\t\t\tlazySizesCfg.loadMode = 2;\n\t\t\t}\n\t\t\tafterScroll();\n\t\t};\n\n\t\tvar onload = function(){\n\t\t\tif(isCompleted){return;}\n\t\t\tif(Date.now() - started < 999){\n\t\t\t\tsetTimeout(onload, 999);\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\tisCompleted = true;\n\n\t\t\tlazySizesCfg.loadMode = 3;\n\n\t\t\tthrottledCheckElements();\n\n\t\t\taddEventListener('scroll', altLoadmodeScrollListner, true);\n\t\t};\n\n\t\treturn {\n\t\t\t_: function(){\n\t\t\t\tstarted = Date.now();\n\n\t\t\t\tlazysizes.elements = document.getElementsByClassName(lazySizesCfg.lazyClass);\n\t\t\t\tpreloadElems = document.getElementsByClassName(lazySizesCfg.lazyClass + ' ' + lazySizesCfg.preloadClass);\n\n\t\t\t\taddEventListener('scroll', throttledCheckElements, true);\n\n\t\t\t\taddEventListener('resize', throttledCheckElements, true);\n\n\t\t\t\taddEventListener('pageshow', function (e) {\n\t\t\t\t\tif (e.persisted) {\n\t\t\t\t\t\tvar loadingElements = document.querySelectorAll('.' + lazySizesCfg.loadingClass);\n\n\t\t\t\t\t\tif (loadingElements.length && loadingElements.forEach) {\n\t\t\t\t\t\t\trequestAnimationFrame(function () {\n\t\t\t\t\t\t\t\tloadingElements.forEach( function (img) {\n\t\t\t\t\t\t\t\t\tif (img.complete) {\n\t\t\t\t\t\t\t\t\t\tunveilElement(img);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(window.MutationObserver){\n\t\t\t\t\tnew MutationObserver( throttledCheckElements ).observe( docElem, {childList: true, subtree: true, attributes: true} );\n\t\t\t\t} else {\n\t\t\t\t\tdocElem[_addEventListener]('DOMNodeInserted', throttledCheckElements, true);\n\t\t\t\t\tdocElem[_addEventListener]('DOMAttrModified', throttledCheckElements, true);\n\t\t\t\t\tsetInterval(throttledCheckElements, 999);\n\t\t\t\t}\n\n\t\t\t\taddEventListener('hashchange', throttledCheckElements, true);\n\n\t\t\t\t//, 'fullscreenchange'\n\t\t\t\t['focus', 'mouseover', 'click', 'load', 'transitionend', 'animationend'].forEach(function(name){\n\t\t\t\t\tdocument[_addEventListener](name, throttledCheckElements, true);\n\t\t\t\t});\n\n\t\t\t\tif((/d$|^c/.test(document.readyState))){\n\t\t\t\t\tonload();\n\t\t\t\t} else {\n\t\t\t\t\taddEventListener('load', onload);\n\t\t\t\t\tdocument[_addEventListener]('DOMContentLoaded', throttledCheckElements);\n\t\t\t\t\tsetTimeout(onload, 20000);\n\t\t\t\t}\n\n\t\t\t\tif(lazysizes.elements.length){\n\t\t\t\t\tcheckElements();\n\t\t\t\t\trAF._lsFlush();\n\t\t\t\t} else {\n\t\t\t\t\tthrottledCheckElements();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcheckElems: throttledCheckElements,\n\t\t\tunveil: unveilElement,\n\t\t\t_aLSL: altLoadmodeScrollListner,\n\t\t};\n\t})();\n\n\n\tvar autoSizer = (function(){\n\t\tvar autosizesElems;\n\n\t\tvar sizeElement = rAFIt(function(elem, parent, event, width){\n\t\t\tvar sources, i, len;\n\t\t\telem._lazysizesWidth = width;\n\t\t\twidth += 'px';\n\n\t\t\telem.setAttribute('sizes', width);\n\n\t\t\tif(regPicture.test(parent.nodeName || '')){\n\t\t\t\tsources = parent.getElementsByTagName('source');\n\t\t\t\tfor(i = 0, len = sources.length; i < len; i++){\n\t\t\t\t\tsources[i].setAttribute('sizes', width);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!event.detail.dataAttr){\n\t\t\t\tupdatePolyfill(elem, event.detail);\n\t\t\t}\n\t\t});\n\t\t/**\n\t\t *\n\t\t * @param elem {Element}\n\t\t * @param dataAttr\n\t\t * @param [width] { number }\n\t\t */\n\t\tvar getSizeElement = function (elem, dataAttr, width){\n\t\t\tvar event;\n\t\t\tvar parent = elem.parentNode;\n\n\t\t\tif(parent){\n\t\t\t\twidth = getWidth(elem, parent, width);\n\t\t\t\tevent = triggerEvent(elem, 'lazybeforesizes', {width: width, dataAttr: !!dataAttr});\n\n\t\t\t\tif(!event.defaultPrevented){\n\t\t\t\t\twidth = event.detail.width;\n\n\t\t\t\t\tif(width && width !== elem._lazysizesWidth){\n\t\t\t\t\t\tsizeElement(elem, parent, event, width);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar updateElementsSizes = function(){\n\t\t\tvar i;\n\t\t\tvar len = autosizesElems.length;\n\t\t\tif(len){\n\t\t\t\ti = 0;\n\n\t\t\t\tfor(; i < len; i++){\n\t\t\t\t\tgetSizeElement(autosizesElems[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar debouncedUpdateElementsSizes = debounce(updateElementsSizes);\n\n\t\treturn {\n\t\t\t_: function(){\n\t\t\t\tautosizesElems = document.getElementsByClassName(lazySizesCfg.autosizesClass);\n\t\t\t\taddEventListener('resize', debouncedUpdateElementsSizes);\n\t\t\t},\n\t\t\tcheckElems: debouncedUpdateElementsSizes,\n\t\t\tupdateElem: getSizeElement\n\t\t};\n\t})();\n\n\tvar init = function(){\n\t\tif(!init.i && document.getElementsByClassName){\n\t\t\tinit.i = true;\n\t\t\tautoSizer._();\n\t\t\tloader._();\n\t\t}\n\t};\n\n\tsetTimeout(function(){\n\t\tif(lazySizesCfg.init){\n\t\t\tinit();\n\t\t}\n\t});\n\n\tlazysizes = {\n\t\t/**\n\t\t * @type { LazySizesConfigPartial }\n\t\t */\n\t\tcfg: lazySizesCfg,\n\t\tautoSizer: autoSizer,\n\t\tloader: loader,\n\t\tinit: init,\n\t\tuP: updatePolyfill,\n\t\taC: addClass,\n\t\trC: removeClass,\n\t\thC: hasClass,\n\t\tfire: triggerEvent,\n\t\tgW: getWidth,\n\t\trAF: rAF,\n\t};\n\n\treturn lazysizes;\n}\n));\n","// Логика для кнопки \"Наверх\"\r\n// Появление кнопки при прокрутке и плавный скролл вверх\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  const toTopButton = document.getElementById(\"toTopButton\");\r\n  if (!toTopButton) return;\r\n\r\n  // Показываем/скрываем кнопку при прокрутке\r\n  window.addEventListener(\"scroll\", () => {\r\n    if (window.pageYOffset > 300) {\r\n      toTopButton.classList.add(\"show\");\r\n    } else {\r\n      toTopButton.classList.remove(\"show\");\r\n    }\r\n  });\r\n\r\n  // Плавная прокрутка наверх при клике\r\n  toTopButton.addEventListener(\"click\", () => {\r\n    window.scrollTo({\r\n      top: 0,\r\n      behavior: \"smooth\",\r\n    });\r\n  });\r\n});\r\n","export default \"__VITE_ASSET__1Vs7hdV3__\"","import homeVideoUrl from \"@/assets/video/home.mp4\";\n// modalVideo.js\n\nexport function initVideoModal() {\n    // Получаем элементы DOM с проверкой на существование\n    const videoBlock = document.getElementById('videoBlock');\n    const playButton = document.getElementById('playButton');\n    const modal = document.getElementById('videoModal');\n    const video = document.getElementById('aboutVideo');\n    const closeModalBtn = document.getElementById('closeModal');\n    \n    // Если элементы не существуют на этой странице - выходим\n    if (!videoBlock || !playButton || !modal || !video || !closeModalBtn) {\n        return;\n    }\n    \n    // Назначаем корректный URL видео через Vite, чтобы файл попал в сборку\n    try {\n        if (homeVideoUrl) {\n            video.src = homeVideoUrl;\n            video.setAttribute('preload', 'none');\n            // ВАЖНО: не ставим playsinline, чтоб на iOS позволить полноэкран\n        }\n    } catch (e) {\n        console.warn(\"Не удалось назначить src для видео:\", e);\n    }\n\n    // Функция открытия модального окна\n    async function openVideoModal() {\n        modal.style.display = \"block\";\n        document.body.style.overflow = \"hidden\";\n        document.body.style.paddingRight = getScrollbarWidth() + 'px';\n\n        // Пытаемся активировать полноэкранный режим (контейнер модалки или сам элемент видео)\n        const container = modal.querySelector('.video-container') || video;\n        try {\n            if (container.requestFullscreen) {\n                await container.requestFullscreen();\n            } else if (container.webkitRequestFullscreen) { // Safari desktop\n                container.webkitRequestFullscreen();\n            } else if (video.webkitEnterFullscreen) { // iOS Safari только для видео\n                video.webkitEnterFullscreen();\n            }\n        } catch (e) {\n            console.warn('Fullscreen error:', e);\n        }\n\n        // Автовоспроизведение\n        try {\n            await video.play();\n        } catch (e) {\n            console.log(\"Автовоспроизведение не разрешено:\", e);\n        }\n    }\n    \n    // Функция закрытия модального окна\n    async function closeVideoModal() {\n        try { video.pause(); } catch(_) {}\n        modal.style.display = \"none\";\n        document.body.style.overflow = \"auto\";\n        document.body.style.paddingRight = '';\n        // Выходим из полноэкранного режима, если он активен\n        try {\n            if (document.fullscreenElement && document.exitFullscreen) {\n                await document.exitFullscreen();\n            } else if (document.webkitFullscreenElement && document.webkitExitFullscreen) {\n                document.webkitExitFullscreen();\n            }\n        } catch (e) {\n            console.warn('Exit fullscreen error:', e);\n        }\n    }\n    \n    // Функция для расчета ширины scrollbar\n    function getScrollbarWidth() {\n        return window.innerWidth - document.documentElement.clientWidth;\n    }\n    \n    // Обработчик дл�� клика по блоку видео\n    videoBlock.addEventListener('click', function(e) {\n        // Предотвращаем срабатывание, если кликнули на кнопку (чтобы не дублировать)\n        if (e.target !== playButton && !playButton.contains(e.target)) {\n            openVideoModal();\n        }\n    });\n    \n    // Обработчик для кнопки воспроизведения\n    playButton.addEventListener('click', openVideoModal);\n    \n    // Обработчик для кнопки закрытия\n    closeModalBtn.addEventListener('click', closeVideoModal);\n    \n    // Обработчик для клика вне модального окна\n    modal.addEventListener('click', function(event) {\n        if (event.target === modal) {\n            closeVideoModal();\n        }\n    });\n    \n    // Обработчик для клавиши ESC\n    document.addEventListener('keydown', function(event) {\n        if (event.key === \"Escape\" && modal.style.display === \"block\") {\n            closeVideoModal();\n        }\n    });\n    \n    // Останавливаем всплытие события для элементов внутри модального окна\n    const modalContent = document.querySelector('.modal-content');\n    if (modalContent) {\n        modalContent.addEventListener('click', function(e) {\n            e.stopPropagation();\n        });\n    }\n    \n    console.log('Modal video initialized successfully');\n}","// Инициализация фильтра и модалки для галереи\r\n\r\nexport function initGalleryModal() {\r\n  const root = document;\r\n  const container = root.getElementById(\"galleryMasonry\");\r\n\r\n  if (!container) return;\r\n\r\n  // Фильтрация по категориям\r\n  const filterButtons = root.querySelectorAll(\".gallery-filter .filter-button\");\r\n  filterButtons.forEach((btn) => {\r\n    btn.addEventListener(\"click\", () => {\r\n      filterButtons.forEach((b) => b.classList.remove(\"active\"));\r\n      btn.classList.add(\"active\");\r\n      const filter = btn.getAttribute(\"data-filter\");\r\n      const items = container.querySelectorAll(\".gallery-item\");\r\n      items.forEach((item) => {\r\n        const cat = item.getAttribute(\"data-category\");\r\n        const show = filter === \"all\" || cat === filter;\r\n        item.style.display = show ? \"\" : \"none\";\r\n      });\r\n    });\r\n  });\r\n\r\n  // Модальное окно\r\n  const modal = root.getElementById(\"galleryModal\");\r\n  if (!modal) return;\r\n\r\n  const modalImg = modal.querySelector(\".gallery-modal__image\");\r\n  const caption = modal.querySelector(\".gallery-modal__caption\");\r\n  const btnClose = modal.querySelector(\".gallery-modal__close\");\r\n  const btnPrev = modal.querySelector(\".gallery-modal__prev\");\r\n  const btnNext = modal.querySelector(\".gallery-modal__next\");\r\n\r\n  let currentIndex = -1;\r\n  const getVisibleItems = () =>\r\n    Array.from(container.querySelectorAll(\".gallery-item\")).filter(\r\n      (it) => it.style.display !== \"none\"\r\n    );\r\n\r\n  function openAt(index) {\r\n    const items = getVisibleItems();\r\n    if (!items.length) return;\r\n    currentIndex = (index + items.length) % items.length;\r\n    const img = items[currentIndex].querySelector(\"img\");\r\n    modalImg.src = img.src;\r\n    modalImg.alt = img.alt || \"\";\r\n    caption.textContent = img.alt || \"\";\r\n    modal.classList.add(\"is-open\");\r\n  }\r\n\r\n  container.addEventListener(\"click\", (e) => {\r\n    // Проверяем клик на изображении или на gallery-item в целом\r\n    let img = e.target.closest(\"img\");\r\n    let galleryItem = e.target.closest(\".gallery-item\");\r\n\r\n    // Если кликнули не на изображение, но на элемент галереи, ищем изображение внутри\r\n    if (!img && galleryItem) {\r\n      img = galleryItem.querySelector(\"img\");\r\n    }\r\n\r\n    if (!img || !galleryItem) return;\r\n\r\n    const items = getVisibleItems();\r\n    const index = items.indexOf(galleryItem);\r\n    openAt(index);\r\n  });\r\n\r\n  btnClose.addEventListener(\"click\", () => modal.classList.remove(\"is-open\"));\r\n  modal.addEventListener(\"click\", (e) => {\r\n    if (e.target === modal) modal.classList.remove(\"is-open\");\r\n  });\r\n\r\n  btnPrev.addEventListener(\"click\", () => openAt(currentIndex - 1));\r\n  btnNext.addEventListener(\"click\", () => openAt(currentIndex + 1));\r\n  window.addEventListener(\"keydown\", (e) => {\r\n    if (!modal.classList.contains(\"is-open\")) return;\r\n    if (e.key === \"Escape\") modal.classList.remove(\"is-open\");\r\n    if (e.key === \"ArrowLeft\") openAt(currentIndex - 1);\r\n    if (e.key === \"ArrowRight\") openAt(currentIndex + 1);\r\n  });\r\n}\r\n","// formsModals.js — модальные формы (заказать звонок, задать вопрос, оставить отзыв)\n//  Формы отправляются на Formspree.\n\nlet inited = false;\n\nfunction createMarkup() {\n  if (document.getElementById(\"formsModalOverlay\")) return;\n\n  // Утилита для создания элементов\n  const el = (tag, className, attrs = {}, text) => {\n    const node = document.createElement(tag);\n    if (className) node.className = className;\n    for (const [k, v] of Object.entries(attrs)) {\n      if (v === undefined || v === null) continue;\n      node.setAttribute(k, String(v));\n    }\n    if (text !== undefined) node.textContent = text;\n    return node;\n  };\n\n  const wrapper = el(\"div\", \"modal-overlay\", { id: \"formsModalOverlay\" });\n\n  const subjectMap = {\n    callback: \"AQUANIKA: Заказать звонок\",\n    question: \"AQUANIKA: Вопрос\",\n    review: \"AQUANIKA: Отзыв\",\n    resume: \"AQUANIKA: Резюме\",\n  };\n\n  // Хелперы для полей формы\n  const createRequiredMark = () => el(\"span\", \"form__req\", {}, \"*\");\n\n  const addInputRow = (form, labelText, required, inputAttrs) => {\n    const row = el(\"div\", \"form__row\");\n    const label = el(\"label\", \"form__label\");\n    label.append(document.createTextNode(labelText));\n    if (required) label.append(createRequiredMark());\n    const input = el(\"input\", \"form__input\", inputAttrs);\n    if (required) input.required = true;\n    label.append(input);\n    row.append(label);\n    form.append(row);\n    return input;\n  };\n\n  const addSelectRow = (form, labelText, required, name, options) => {\n    const row = el(\"div\", \"form__row\");\n    const label = el(\"label\", \"form__label\");\n    label.append(document.createTextNode(labelText));\n    if (required) label.append(createRequiredMark());\n    const select = el(\"select\", \"form__input\", { name });\n    options.forEach((opt) => {\n      const o = document.createElement(\"option\");\n      if (typeof opt === \"object\") {\n        if (opt.value !== undefined) o.value = String(opt.value);\n        o.textContent =\n          opt.text !== undefined ? String(opt.text) : String(opt.value ?? \"\");\n      } else {\n        o.textContent = String(opt);\n      }\n      select.append(o);\n    });\n    label.append(select);\n    row.append(label);\n    form.append(row);\n    return select;\n  };\n\n  const addTextareaRow = (form, labelText, required, attrs) => {\n    const row = el(\"div\", \"form__row\");\n    const label = el(\"label\", \"form__label\");\n    label.append(document.createTextNode(labelText));\n    if (required) label.append(createRequiredMark());\n    const ta = el(\"textarea\", \"form__textarea\", attrs);\n    if (required) ta.required = true;\n    label.append(ta);\n    row.append(label);\n    form.append(row);\n    return ta;\n  };\n\n  const addConsent = (form) => {\n    const agree = el(\"div\", \"form__agree\");\n    const label = document.createElement(\"label\");\n    const checkbox = document.createElement(\"input\");\n    checkbox.type = \"checkbox\";\n    checkbox.name = \"consent\";\n    checkbox.required = true;\n\n    const span = document.createElement(\"span\");\n\n    // Безопасное создание ссылки\n    const link = document.createElement(\"a\");\n    link.href = \"/privacy\"; // Относительная ссылка на вашу страницу\n    link.textContent = \" политикой конфиденциальности\";\n    link.target = \"_blank\"; // Открывать в новой вкладке\n    link.rel = \"noopener noreferrer\"; // Безопасность\n    link.className = \"highlight-link\";\n\n    span.textContent = \"Соглашаюсь с \";\n    span.appendChild(link);\n\n    label.append(checkbox, span);\n    agree.append(label);\n    form.append(agree);\n  };\n\n  const addActions = (form) => {\n    const actions = el(\"div\", \"form__actions\");\n    const btn = el(\n      \"button\",\n      \"button button--primary\",\n      { type: \"submit\" },\n      \"Отправить\"\n    );\n    actions.append(btn);\n    form.append(actions);\n  };\n\n  const addHidden = (form, type) => {\n    const hType = el(\"input\", null, {\n      type: \"hidden\",\n      name: \"type\",\n      value: type,\n    });\n    const hPage = el(\"input\", null, {\n      type: \"hidden\",\n      name: \"page\",\n      value: \"\",\n    });\n    const hSubject = el(\"input\", null, {\n      type: \"hidden\",\n      name: \"_subject\",\n      value: subjectMap[type] || \"AQUANIKA\",\n    });\n    const honeypot = el(\"input\", null, {\n      type: \"text\",\n      name: \"_gotcha\",\n      tabindex: \"-1\",\n      autocomplete: \"off\",\n      style: \"display:none\",\n    });\n    form.append(hType, hPage, hSubject, honeypot);\n  };\n\n  const buildModal = (type, titleText, buildFields) => {\n    const modal = el(\"div\", \"forms-modal\", {\n      \"data-modal\": type,\n      \"aria-hidden\": \"true\",\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n    });\n    const content = el(\"div\", \"forms-modal__content\");\n    const closeBtn = el(\n      \"button\",\n      \"forms-modal__close\",\n      { \"aria-label\": \"Закрыть\" },\n      \"×\"\n    );\n    const title = el(\"h3\", \"forms-modal__title\", {}, titleText);\n\n    const form = el(\"form\", \"modal__form\", {\n      action: \"https://formspree.io/f/xldpwwpb\",\n      method: \"POST\",\n    });\n\n    addHidden(form, type);\n    buildFields(form);\n    addConsent(form);\n    addActions(form);\n\n    content.append(closeBtn, title, form);\n    modal.append(content);\n    wrapper.append(modal);\n  };\n\n  // Заказать звонок\n  buildModal(\"callback\", \"Заказать звонок\", (form) => {\n    addInputRow(form, \"Имя\", true, {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Ваше имя\",\n    });\n    addInputRow(form, \"Телефон\", true, {\n      type: \"tel\",\n      name: \"phone\",\n      placeholder: \"+7 (___) ___-__-__\",\n    });\n    addSelectRow(form, \"Удобное время\", false, \"preferred_time\", [\n      { value: \"\", text: \"Не важно\" },\n      { value: \"10:00 - 12:00\" },\n      { value: \"12:00 - 15:00\" },\n      { value: \"15:00 - 18:00\" },\n      { value: \"18:00 - 21:00\" },\n    ]);\n    addTextareaRow(form, \"Комментарий\", false, {\n      name: \"message\",\n      rows: \"4\",\n      placeholder: \"Опишите вопрос\",\n    });\n  });\n\n  // Задать вопрос\n  buildModal(\"question\", \"Задать вопрос\", (form) => {\n    addInputRow(form, \"Имя\", true, {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Ваше имя\",\n    });\n\n    addTextareaRow(form, \"Сообщение\", true, {\n      name: \"message\",\n      rows: \"5\",\n      placeholder: \"Ваш вопрос\",\n    });\n  });\n\n  // Отправить резюме\n  buildModal(\"resume\", \"Отправить резюме\", (form) => {\n    addInputRow(form, \"Имя\", true, {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Ваше имя\",\n    });\n    addInputRow(form, \"Email\", true, {\n      type: \"email\",\n      name: \"email\",\n      placeholder: \"name@example.com\",\n    });\n    addInputRow(form, \"Телефон\", false, {\n      type: \"tel\",\n      name: \"phone\",\n      placeholder: \"+7 (___) ___-__-__\",\n    });\n    addInputRow(form, \"Должность/направление\", false, {\n      type: \"text\",\n      name: \"position\",\n      placeholder: \"Например: Косметолог\",\n    });\n    addTextareaRow(form, \"Сопроводительное письмо\", false, {\n      name: \"message\",\n      rows: \"5\",\n      placeholder: \"Коротко о вашем опыте и ожиданиях\",\n    });\n  });\n\n  // Оставить отзыв\n  buildModal(\"review\", \"Оставить отзыв\", (form) => {\n    addInputRow(form, \"Имя\", true, {\n      type: \"text\",\n      name: \"name\",\n      placeholder: \"Ваше имя\",\n    });\n    addSelectRow(form, \"Оценка\", false, \"rating\", [\n      { value: \"\", text: \"—\" },\n      { value: \"5\" },\n      { value: \"4\" },\n      { value: \"3\" },\n      { value: \"2\" },\n      { value: \"1\" },\n    ]);\n    addTextareaRow(form, \"Отзыв\", true, {\n      name: \"message\",\n      rows: \"5\",\n      placeholder: \"Ваш отзыв\",\n    });\n  });\n\n  document.body.appendChild(wrapper);\n}\n\nfunction disableScroll() {\n  const scrollBarWidth =\n    window.innerWidth - document.documentElement.clientWidth;\n  document.body.dataset.prevOverflow = document.body.style.overflow || \"\";\n  document.body.dataset.prevPaddingRight =\n    document.body.style.paddingRight || \"\";\n  document.body.style.overflow = \"hidden\";\n  if (scrollBarWidth > 0) {\n    document.body.style.paddingRight = scrollBarWidth + \"px\";\n  }\n}\n\nfunction enableScroll() {\n  document.body.style.overflow = document.body.dataset.prevOverflow || \"\";\n  document.body.style.paddingRight =\n    document.body.dataset.prevPaddingRight || \"\";\n  delete document.body.dataset.prevOverflow;\n  delete document.body.dataset.prevPaddingRight;\n}\n\nfunction setPageHiddenValue() {\n  const forms = document.querySelectorAll(\n    '#formsModalOverlay form input[name=\"page\"]'\n  );\n  forms.forEach((inp) => (inp.value = window.location.href));\n}\n\nfunction openModal(type) {\n  const overlay = document.getElementById(\"formsModalOverlay\");\n  if (!overlay) return;\n  setPageHiddenValue();\n\n  const modals = overlay.querySelectorAll(\".forms-modal\");\n  modals.forEach((m) => m.setAttribute(\"aria-hidden\", \"true\"));\n\n  const target = overlay.querySelector(`.forms-modal[data-modal=\"${type}\"]`);\n  if (!target) return;\n\n  overlay.classList.add(\"is-open\");\n  target.setAttribute(\"aria-hidden\", \"false\");\n  disableScroll();\n}\n\nfunction closeModal() {\n  const overlay = document.getElementById(\"formsModalOverlay\");\n  if (!overlay) return;\n  overlay.classList.remove(\"is-open\");\n  overlay\n    .querySelectorAll(\".forms-modal\")\n    .forEach((m) => m.setAttribute(\"aria-hidden\", \"true\"));\n  enableScroll();\n}\n\n// Экспорт закрытия модалки для внешних вызовов (forms.js)\nwindow.closeFormsModal = closeModal;\n\nfunction bindEvents() {\n  const overlay = document.getElementById(\"formsModalOverlay\");\n  if (!overlay) return;\n\n  // Закрытие по клику по фону\n  overlay.addEventListener(\"click\", (e) => {\n    if (e.target === overlay) {\n      closeModal();\n    }\n  });\n\n  // Делегирование на кнопки закрытия\n  overlay.addEventListener(\"click\", (e) => {\n    const btn = e.target.closest(\".forms-modal__close\");\n    if (btn) {\n      closeModal();\n    }\n  });\n\n  // ESC\n  document.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"Escape\" && overlay.classList.contains(\"is-open\")) {\n      closeModal();\n    }\n  });\n\n  // Триггеры открытия\n  document.addEventListener(\"click\", (e) => {\n    // Универсальный триггер для любых элементов с data-open-modal\n    const modalTrigger = e.target.closest(\"[data-open-modal]\");\n    if (modalTrigger) {\n      e.preventDefault();\n      const type = modalTrigger.dataset.openModal || \"question\";\n      openModal(type);\n\n      // Префилл содержимого формы из дата-атрибутов\n      try {\n        const overlay = document.getElementById(\"formsModalOverlay\");\n        const modal =\n          overlay &&\n          overlay.querySelector(`.forms-modal[data-modal=\"${type}\"]`);\n        const form = modal && modal.querySelector(\"form\");\n        if (form) {\n          const msg = modalTrigger.dataset.message;\n          if (msg) {\n            const ta = form.querySelector('textarea[name=\"message\"]');\n            if (ta) ta.value = msg;\n          }\n          const subj = modalTrigger.dataset.subject;\n          if (subj) {\n            const subjInp = form.querySelector('input[name=\"_subject\"]');\n            if (subjInp) subjInp.value = subj;\n          }\n        }\n      } catch (_) {}\n      return;\n    }\n\n    const sidebarBtn = e.target.closest(\".sidebar__button\");\n    if (sidebarBtn && sidebarBtn.dataset.action) {\n      e.preventDefault();\n      openModal(sidebarBtn.dataset.action);\n      return;\n    }\n\n    const contactBtn = e.target.closest(\".contacts-message-btn\");\n    if (contactBtn) {\n      e.preventDefault();\n      openModal(\"question\");\n      return;\n    }\n\n    const mobileAskBtn = e.target.closest(\".mobile-nav__action-btn\");\n    if (mobileAskBtn) {\n      e.preventDefault();\n      openModal(\"question\");\n      return;\n    }\n  });\n}\n\nexport function initFormsModals() {\n  if (inited) return;\n  createMarkup();\n  bindEvents();\n  inited = true;\n  console.log(\"Модальные формы инициализированы\");\n}\n\nexport default { initFormsModals };\n","import { basePath } from \"./router.js\";\n// loadComponents.js\nasync function loadComponent(elementId, componentPath) {\n  try {\n    // Формируем URL с учётом централизованного basePath\n    const url = componentPath.startsWith(\"/\")\n      ? `${basePath}${componentPath}`\n      : `${basePath}/${componentPath}`;\n\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const html = await response.text();\n    const element = document.getElementById(elementId);\n    if (element) {\n      // Санитизация и безопасная вставка без прямого innerHTML на живой узел\n      try {\n        const safe = window.sanitizeHTML ? window.sanitizeHTML(html) : html;\n        const tpl = document.createElement(\"template\");\n        tpl.innerHTML = safe;\n        element.replaceChildren();\n        element.append(tpl.content.cloneNode(true));\n        try {\n          window.secureExternalLinks?.(element);\n        } catch (_) {}\n      } catch (_) {\n        const fallbackTpl = document.createElement(\"template\");\n        fallbackTpl.innerHTML = html;\n        element.replaceChildren();\n        element.append(fallbackTpl.content.cloneNode(true));\n      }\n    } else {\n      console.warn(`Элемент с ID ${elementId} не найден`);\n    }\n  } catch (error) {\n    console.error(`Ошибка при загрузке компонента ${componentPath}:`, error);\n  }\n}\n\nexport { loadComponent };\n","// Мобильное меню\r\nexport class MobileMenu {\r\n  constructor() {\r\n    // Элементы меню\r\n    this.sidebar = document.querySelector(\".mobile-nav__sidebar\");\r\n    this.slides = document.querySelector(\".mobile-nav__slides\");\r\n    this.mainSlide = document.querySelector(\".mobile-nav__slide-main\");\r\n    this.submenuSlide = document.querySelector(\".mobile-nav__slide-submenu\");\r\n    this.menuBtn = document.querySelector(\".mobile-nav__menu-btn\");\r\n    this.closeBtn = document.querySelector(\".mobile-nav__close\");\r\n    this.backBtn = document.querySelector(\".mobile-nav__back\");\r\n    this.servicesBtn = document.querySelector(\".mobile-nav__category-btn\");\r\n    this.categoriesList = document.querySelector(\".mobile-nav__categories\");\r\n    this.subcategoryBtns = document.querySelectorAll(\r\n      \".mobile-nav__subcategory-btn\"\r\n    );\r\n    this.submenus = document.querySelectorAll(\".mobile-nav__subsubmenu\");\r\n\r\n    // Состояние меню\r\n    this.isOpen = false;\r\n    this.isSubmenuOpen = false;\r\n    this.isCategoriesOpen = false;\r\n\r\n    // Привязка контекста\r\n    this.toggleMenu = this.toggleMenu.bind(this);\r\n    this.closeMenu = this.closeMenu.bind(this);\r\n    this.toggleCategories = this.toggleCategories.bind(this);\r\n    this.showSubmenu = this.showSubmenu.bind(this);\r\n    this.hideSubmenu = this.hideSubmenu.bind(this);\r\n    this.handleClickOutside = this.handleClickOutside.bind(this);\r\n\r\n    // Инициализация обработчиков событий\r\n    this.initEventListeners();\r\n  }\r\n\r\n  // Инициализация обработчиков событий\r\n  initEventListeners() {\r\n    // Открытие/закрытие меню\r\n    this.menuBtn.addEventListener(\"click\", this.toggleMenu);\r\n    this.closeBtn.addEventListener(\"click\", this.closeMenu);\r\n\r\n    // Открытие/закрытие списка категорий\r\n    this.servicesBtn.addEventListener(\"click\", this.toggleCategories);\r\n\r\n    // Навигация по подменю\r\n    this.subcategoryBtns.forEach((btn) => {\r\n      btn.addEventListener(\"click\", () => {\r\n        const category = btn.dataset.category;\r\n        this.showSubmenu(category);\r\n      });\r\n    });\r\n\r\n    this.backBtn.addEventListener(\"click\", this.hideSubmenu);\r\n\r\n    // Закрытие меню при клике вне его\r\n    document.addEventListener(\"click\", this.handleClickOutside);\r\n\r\n    // Закрытие меню при клике на любую ссылку в меню\r\n    this.sidebar.addEventListener(\"click\", (e) => {\r\n      if (e.target.closest(\"a\")) {\r\n        this.closeMenu();\r\n      }\r\n    });\r\n\r\n    // Добавляем эффекты при наведении и нажатии для всех интерактивных элементов\r\n    this.addInteractiveEffects();\r\n  }\r\n\r\n  // Добавление интерактивных эффектов\r\n  addInteractiveEffects() {\r\n    // Получаем все интерактивные элементы\r\n    const interactiveElements = this.sidebar.querySelectorAll(\"a, button\");\r\n\r\n    interactiveElements.forEach((element) => {\r\n      // Эффект при наведении\r\n      element.addEventListener(\"mouseenter\", () => {\r\n        element.style.transition = \"all 0.2s ease\";\r\n        element.style.transform = \"translateY(-1px)\";\r\n      });\r\n\r\n      // Возврат к исходному состоянию\r\n      element.addEventListener(\"mouseleave\", () => {\r\n        element.style.transform = \"translateY(0)\";\r\n      });\r\n\r\n      // Эффект при нажатии\r\n      element.addEventListener(\"mousedown\", () => {\r\n        element.style.transform = \"translateY(1px)\";\r\n      });\r\n\r\n      // Возврат после нажатия\r\n      element.addEventListener(\"mouseup\", () => {\r\n        element.style.transform = \"translateY(-1px)\";\r\n      });\r\n    });\r\n  }\r\n\r\n  // Открытие/закрытие меню\r\n  toggleMenu() {\r\n    if (this.isOpen) {\r\n      this.closeMenu();\r\n    } else {\r\n      this.openMenu();\r\n    }\r\n  }\r\n\r\n  // Открытие меню\r\n  openMenu() {\r\n    this.isOpen = true;\r\n    this.sidebar.classList.add(\"is-open\");\r\n    document.body.style.overflow = \"hidden\";\r\n  }\r\n\r\n  // Закрытие меню\r\n  closeMenu() {\r\n    this.isOpen = false;\r\n    this.isSubmenuOpen = false;\r\n    this.isCategoriesOpen = false;\r\n    this.sidebar.classList.remove(\"is-open\");\r\n    this.slides.classList.remove(\"show-submenu\");\r\n    this.servicesBtn.classList.remove(\"is-open\");\r\n    this.categoriesList.classList.remove(\"is-open\");\r\n    document.body.style.overflow = \"\";\r\n  }\r\n\r\n  // Открытие/закрытие списка категорий\r\n  toggleCategories() {\r\n    this.isCategoriesOpen = !this.isCategoriesOpen;\r\n    this.servicesBtn.classList.toggle(\"is-open\");\r\n    this.categoriesList.classList.toggle(\"is-open\");\r\n  }\r\n\r\n  // Показать подменю для выбранной категории\r\n  showSubmenu(category) {\r\n    this.isSubmenuOpen = true;\r\n    this.slides.classList.add(\"show-submenu\");\r\n\r\n    // Обновляем заголовок подменю\r\n    // const submenuTitle = this.submenuSlide.querySelector(\r\n    //   \".mobile-nav__submenu-title\"\r\n    // );\r\n    // const categoryBtn = document.querySelector(`[data-category=\"${category}\"]`);\r\n    // submenuTitle.textContent = categoryBtn.querySelector(\"span\").textContent;\r\n\r\n    // Показываем нужное подменю\r\n    this.submenus.forEach((submenu) => {\r\n      if (submenu.dataset.category === category) {\r\n        submenu.classList.add(\"is-active\");\r\n      } else {\r\n        submenu.classList.remove(\"is-active\");\r\n      }\r\n    });\r\n  }\r\n\r\n  // Скрыть подменю\r\n  hideSubmenu() {\r\n    this.isSubmenuOpen = false;\r\n    this.slides.classList.remove(\"show-submenu\");\r\n\r\n    // Скрываем все подменю\r\n    this.submenus.forEach((submenu) => {\r\n      submenu.classList.remove(\"is-active\");\r\n    });\r\n  }\r\n\r\n  // Обработка клика вне меню\r\n  handleClickOutside(event) {\r\n    if (\r\n      this.isOpen &&\r\n      !this.sidebar.contains(event.target) &&\r\n      !this.menuBtn.contains(event.target)\r\n    ) {\r\n      this.closeMenu();\r\n    }\r\n  }\r\n}\r\n","// /js/map.js\r\n// Конфигурация карты\r\nconst mapConfig = {\r\n  salonCoordinates: [55.175026, 61.310027],\r\n  mapOptions: {\r\n    zoom: 16,\r\n    controls: [\"zoomControl\", \"fullscreenControl\", \"typeSelector\"],\r\n  },\r\n};\r\n\r\nlet myMap = null;\r\n\r\n// Безопасное создание контента балуна\r\nfunction createBalloonContent() {\r\n  const container = document.createElement(\"div\");\r\n  container.className = \"balloon-content\";\r\n\r\n  const address = document.createElement(\"p\");\r\n  const addressStrong = document.createElement(\"strong\");\r\n  addressStrong.textContent = \"Адрес:\";\r\n  address.appendChild(addressStrong);\r\n  address.appendChild(document.createTextNode(\" Братьев Кашириных, 131\"));\r\n\r\n  const phone = document.createElement(\"p\");\r\n  const phoneStrong = document.createElement(\"strong\");\r\n  phoneStrong.textContent = \"Телефон:\";\r\n  phone.appendChild(phoneStrong);\r\n\r\n  const phoneLink = document.createElement(\"a\");\r\n  phoneLink.href = \"tel:79227445287\";\r\n  phoneLink.textContent = \" +7 (922) 744-52-87\";\r\n  phone.appendChild(phoneLink);\r\n\r\n  const hours = document.createElement(\"p\");\r\n  const hoursStrong = document.createElement(\"strong\");\r\n  hoursStrong.textContent = \"Время работы:\";\r\n  hours.appendChild(hoursStrong);\r\n  hours.appendChild(document.createTextNode(\" с 10:00 до 21:00\"));\r\n\r\n  container.appendChild(address);\r\n  container.appendChild(phone);\r\n  container.appendChild(hours);\r\n\r\n  return container;\r\n}\r\n\r\n// Безопасное создание сообщения об ошибке\r\nfunction createMapErrorContent() {\r\n  const placeholder = document.createElement(\"div\");\r\n  placeholder.className = \"map-placeholder\";\r\n\r\n  const icon = document.createElement(\"i\");\r\n  icon.className = \"fas fa-map-marked-alt\";\r\n\r\n  const loadingText = document.createElement(\"div\");\r\n  loadingText.className = \"loading-text\";\r\n\r\n  const message = document.createElement(\"p\");\r\n  message.textContent = \"Карта временно недоступна\";\r\n\r\n  const link = document.createElement(\"a\");\r\n  link.href =\r\n    \"https://yandex.ru/maps/?um=constructor%3A6c71b99ccf1f2b1ece9efab9e7a6672d6bb373294df3d4738952dd7d58ef905a&source=constructorStatic\";\r\n  link.target = \"_blank\";\r\n  link.rel = \"noopener noreferrer\";\r\n  link.textContent = \"Посмотреть статическую карту\";\r\n\r\n  loadingText.appendChild(message);\r\n  loadingText.appendChild(link);\r\n  placeholder.appendChild(icon);\r\n  placeholder.appendChild(loadingText);\r\n\r\n  return placeholder;\r\n}\r\n\r\nexport function initMap() {\r\n  if (!document.getElementById(\"map\")) {\r\n    return;\r\n  }\r\n\r\n  if (typeof ymaps === \"undefined\") {\r\n    loadYandexMapsAPI();\r\n    return;\r\n  }\r\n\r\n  ymaps.ready(() => {\r\n    try {\r\n      createMap();\r\n    } catch (error) {\r\n      console.error(\"Ошибка при создании карты:\", error);\r\n      showMapError();\r\n    }\r\n  });\r\n}\r\n\r\nfunction loadYandexMapsAPI() {\r\n  const script = document.createElement(\"script\");\r\n  script.src = `https://api-maps.yandex.ru/2.1/?apikey=480aa768-745b-4ac9-8ec8-e40c2e8d6c82&lang=ru_RU`;\r\n  script.type = \"text/javascript\";\r\n\r\n  script.onload = () => {\r\n    ymaps.ready(() => {\r\n      try {\r\n        createMap();\r\n      } catch (error) {\r\n        console.error(\"Ошибка при создании карты:\", error);\r\n        showMapError();\r\n      }\r\n    });\r\n  };\r\n\r\n  script.onerror = () => {\r\n    console.error(\"Ошибка загрузки API Яндекс.Карт\");\r\n    showMapError();\r\n  };\r\n\r\n  document.head.appendChild(script);\r\n}\r\n\r\nfunction createMap() {\r\n  if (myMap) {\r\n    myMap.destroy();\r\n    myMap = null;\r\n  }\r\n\r\n  const mapContainer = document.getElementById(\"map\");\r\n  if (!mapContainer) return;\r\n\r\n  myMap = new ymaps.Map(\r\n    \"map\",\r\n    {\r\n      center: mapConfig.salonCoordinates,\r\n      zoom: mapConfig.mapOptions.zoom,\r\n      controls: mapConfig.mapOptions.controls,\r\n    },\r\n    {\r\n      searchControlProvider: \"yandex#search\",\r\n    }\r\n  );\r\n\r\n  // Создаем метку с безопасным контентом\r\n  const balloonContent = createBalloonContent();\r\n\r\n  const myPlacemark = new ymaps.Placemark(\r\n    mapConfig.salonCoordinates,\r\n    {\r\n      balloonContentHeader: \"Салон красоты Aquanika\",\r\n      balloonContentBody: balloonContent.innerHTML, // Только здесь используем innerHTML для API\r\n      hintContent: \"Салон красоты Aquanika\",\r\n    },\r\n    {\r\n      preset: \"islands#blueBeautyIcon\",\r\n      iconColor: \"#ff6b9d\",\r\n      balloonCloseButton: true,\r\n      hideIconOnBalloonOpen: false,\r\n    }\r\n  );\r\n\r\n  myMap.geoObjects.add(myPlacemark);\r\n  setupMapControls(myMap);\r\n  setupResponsive(myMap);\r\n\r\n  setTimeout(() => {\r\n    myPlacemark.balloon.open();\r\n  }, 1000);\r\n}\r\n\r\nfunction setupMapControls(map) {\r\n  const searchControl = new ymaps.control.SearchControl({\r\n    options: {\r\n      noPlacemark: true,\r\n      position: { top: 10, right: 10 },\r\n    },\r\n  });\r\n\r\n  map.controls.add(searchControl);\r\n\r\n  const routeButton = new ymaps.control.Button({\r\n    data: {\r\n      content: \"Проложить маршрут\",\r\n      title: \"Проложить маршрут до салона\",\r\n    },\r\n    options: {\r\n      maxWidth: 200,\r\n      position: { top: 50, right: 10 },\r\n    },\r\n  });\r\n\r\n  routeButton.events.add(\"press\", function () {\r\n    const url = `https://yandex.ru/maps/?rtext=~${mapConfig.salonCoordinates.join(\r\n      \",\"\r\n    )}`;\r\n    window.open(url, \"_blank\");\r\n  });\r\n\r\n  map.controls.add(routeButton);\r\n}\r\n\r\nfunction setupResponsive(map) {\r\n  function checkMobile() {\r\n    if (window.innerWidth <= 768) {\r\n      map.behaviors.disable(\"scrollZoom\");\r\n    } else {\r\n      map.behaviors.enable(\"scrollZoom\");\r\n    }\r\n  }\r\n\r\n  checkMobile();\r\n  window.addEventListener(\"resize\", checkMobile);\r\n}\r\n\r\nfunction showMapError() {\r\n  const mapContainer = document.getElementById(\"map\");\r\n  if (mapContainer) {\r\n    const errorContent = createMapErrorContent();\r\n    mapContainer.replaceChildren();\r\n    mapContainer.appendChild(errorContent);\r\n  }\r\n}\r\n\r\nexport function destroyMap() {\r\n  if (myMap) {\r\n    myMap.destroy();\r\n    myMap = null;\r\n  }\r\n}\r\n\r\nexport function isContactsPage() {\r\n  return (\r\n    window.location.pathname.includes(\"/contacts\") ||\r\n    document.getElementById(\"map\") !== null\r\n  );\r\n}\r\n\r\nexport default {\r\n  initMap,\r\n  destroyMap,\r\n  isContactsPage,\r\n  mapConfig,\r\n};\r\n","// Формы\nexport class Forms {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    console.log(\"Инициализация форм\");\n    const forms = document.querySelectorAll(\n      'form:not([data-form-initialized=\"true\"])'\n    );\n\n    forms.forEach((form) => {\n      form.addEventListener(\"submit\", handleSubmit);\n      form.dataset.formInitialized = \"true\";\n    });\n\n    // Обработчик отправки формы\n    async function handleSubmit(e) {\n      e.preventDefault();\n\n      const form = e.target;\n      const submitButton = form.querySelector('[type=\"submit\"]');\n      const formData = new FormData(form);\n      const data = Object.fromEntries(formData.entries());\n\n      // Валидация формы\n      if (!validateForm(form)) {\n        return;\n      }\n\n      // Маршрутизация: вопрос/отзыв — в WhatsApp, остальное по action\n      const typeInput = form.querySelector('input[name=\"type\"]');\n      const formType = typeInput ? typeInput.value : \"\";\n      if (formType === \"question\" || formType === \"review\") {\n        try {\n          const waPhone = \"79227445287\"; // без плюса для wa.me\n          const message = buildWhatsAppMessage(\n            formType,\n            Object.fromEntries(new FormData(form).entries())\n          );\n          const url = `https://wa.me/${waPhone}?text=${encodeURIComponent(\n            message\n          )}`;\n          window.open(url, \"_blank\", \"noopener,noreferrer\");\n          showMessage(\n            form,\n            \"Откроется WhatsApp для отправки сообщения.\",\n            \"success\"\n          );\n          form.reset();\n          try {\n            window.closeFormsModal?.();\n          } catch (_) {}\n        } catch (e) {\n          showMessage(form, \"Не удалось открыть WhatsApp.\", \"error\");\n          console.error(\"WhatsApp open error:\", e);\n        }\n        return;\n      }\n\n      try {\n        // Показываем состояние загрузки\n        submitButton.classList.add(\"button--loading\");\n        submitButton.disabled = true;\n\n        // Отправляем данные\n        const response = await sendFormData(form);\n\n        // Показываем сообщение об успехе\n        showMessage(form, \"Сообщение отправлено успешно!\", \"success\");\n        form.reset();\n        try {\n          window.closeFormsModal?.();\n        } catch (_) {}\n      } catch (error) {\n        // Показываем сообщение об ошибке\n        showMessage(form, \"Произошла ошибка. Попробуйте позже.\", \"error\");\n        console.error(\"Form submission error:\", error);\n      } finally {\n        // Возвращаем кнопку в исходное состояние\n        submitButton.classList.remove(\"button--loading\");\n        submitButton.disabled = false;\n      }\n    }\n\n    // Валидация формы\n    function validateForm(form) {\n      const inputs = form.querySelectorAll(\"input, textarea\");\n      let isValid = true;\n\n      inputs.forEach((input) => {\n        // Очищаем предыдущие ошибки\n        clearError(input);\n\n        // Проверяем обязательные поля\n        if (input.required && !input.value.trim()) {\n          showError(input, \"Это поле обязательно для заполнения\");\n          isValid = false;\n        }\n\n        // Валидация email\n        if (input.type === \"email\" && input.value) {\n          const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n          if (!emailRegex.test(input.value)) {\n            showError(input, \"Введите корректный email\");\n            isValid = false;\n          }\n        }\n\n        // Валидация телефона\n        if (input.type === \"tel\" && input.value) {\n          const phoneRegex = /^\\+?[0-9\\s-()]{10,}$/;\n          if (!phoneRegex.test(input.value)) {\n            showError(input, \"Введите корректный номер телефона\");\n            isValid = false;\n          }\n        }\n      });\n\n      return isValid;\n    }\n\n    // Показать ошибку валидации\n    function showError(input, message) {\n      const errorElement = document.createElement(\"div\");\n      errorElement.className = \"form__error\";\n      errorElement.textContent = message;\n\n      input.classList.add(\"input--error\");\n      input.parentNode.appendChild(errorElement);\n    }\n\n    // Очистить ошибку валидации\n    function clearError(input) {\n      const errorElement = input.parentNode.querySelector(\".form__error\");\n      if (errorElement) {\n        errorElement.remove();\n      }\n      input.classList.remove(\"input--error\");\n    }\n\n    // Показать сообщение после отправки\n    function showMessage(form, message, type) {\n      const messageElement = document.createElement(\"div\");\n      messageElement.className = `form__message form__message--${type}`;\n      messageElement.textContent = message;\n\n      // Удаляем предыдущее сообщение\n      const oldMessage = form.querySelector(\".form__message\");\n      if (oldMessage) {\n        oldMessage.remove();\n      }\n\n      form.appendChild(messageElement);\n\n      // Удаляем сообщение через 5 секунд\n      setTimeout(() => {\n        messageElement.remove();\n      }, 5000);\n    }\n\n    // Формирование текста для WhatsApp\n    function buildWhatsAppMessage(type, data) {\n      const lines = [];\n      if (type === \"question\") {\n        lines.push(\"Здравствуйте! Хочу задать вопрос.\");\n      } else if (type === \"review\") {\n        lines.push(\"Здравствуйте! Хочу оставить отзыв.\");\n      }\n      if (data.name) lines.push(`Имя: ${data.name}`);\n      if (data.phone) lines.push(`Телефон: ${data.phone}`);\n      if (data.email) lines.push(`Email: ${data.email}`);\n      if (data.preferred_time)\n        lines.push(`Удобное время: ${data.preferred_time}`);\n      if (data.rating) lines.push(`Оценка: ${data.rating}`);\n      if (data.message) lines.push(`Сообщение: ${data.message}`);\n      if (data.page) lines.push(`Страница: ${data.page}`);\n      return lines.join(\"\\n\");\n    }\n\n    // Отправка данных формы\n    async function sendFormData(form) {\n      const action = form.getAttribute(\"action\") || \"/api/send-form\";\n      const method = (form.getAttribute(\"method\") || \"POST\").toUpperCase();\n      const formData = new FormData(form);\n\n      if (action.includes(\"formspree.io\")) {\n        const response = await fetch(action, {\n          method,\n          body: formData,\n          headers: { Accept: \"application/json\" },\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        try {\n          return await response.json();\n        } catch (_) {\n          return {};\n        }\n      }\n\n      const json = Object.fromEntries(formData.entries());\n      const response = await fetch(action, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(json),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      return await response.json();\n    }\n  }\n}\n\n// Функция инициализации\nexport function initForms() {\n  console.log(\"Запуск инициализации форм\");\n  return new Forms();\n}\n","// Импорт компонентов\nimport \"lazysizes\";\nimport \"./components/toTopButton.js\";\nimport { initVideoModal } from \"./components/modalVideo.js\";\nimport { initGalleryModal } from \"./components/modalGallery.js\";\nimport { initFormsModals } from \"./components/formsModals.js\";\n\nimport { loadComponent } from \"./components/loadComponents.js\";\nimport { MobileMenu } from \"./components/mobileMenu.js\";\nimport { initRouter } from \"./components/router.js\";\n\n// Импорт карты\nimport { initMap, destroyMap } from \"./components/map.js\";\n\n// Делаем функции видеомодального окна доступными глобально для роутера\nwindow.initVideoModal = initVideoModal;\nwindow.initGalleryModal = initGalleryModal;\n\n// Делаем функции карты доступными глобально для роутера\nwindow.initMap = initMap;\nwindow.destroyMap = destroyMap;\n\n// Делаем initForms доступной для роутера (динамических страниц)\nimport { initForms } from \"./components/forms.js\";\nwindow.initForms = initForms;\n\n// Экспортируем утилиты безопасности глобально\nimport /* re-exported in router */ \"./components/router.js\";\nwindow.sanitizeHTML = window.sanitizeHTML || ((html) => html);\n\n// ========== BREADCRUMBS (Хлебные крошки) ==========\n\n/**\n * Генерирует BreadcrumbList структурированные данные\n */\nfunction generateBreadcrumbs() {\n  const currentPath = window.location.pathname;\n  const baseUrl = window.location.origin;\n\n  // Используем basePath из роутера для согласованности\n  const basePath =\n    window.basePath ||\n    (window.location.hostname.includes(\"github.io\") ? \"/AQUANIKA\" : \"\");\n\n  // Базовая структура для главной страницы\n  const breadcrumbs = [\n    {\n      \"@type\": \"ListItem\",\n      position: 1,\n      name: \"Главная\",\n      item: `${baseUrl}${basePath}/`,\n    },\n  ];\n\n  let position = 2;\n\n  // Главная страница\n  if (currentPath === `${basePath}/` || currentPath === \"/\") {\n    return createBreadcrumbScript(breadcrumbs);\n  }\n\n  // Страницы верхнего уровня\n  const topLevelPages = {\n    \"/about\": \"О нас\",\n    \"/team\": \"Наша команда\",\n    \"/reviews\": \"Отзывы\",\n    \"/price\": \"Цены\",\n    \"/gallery\": \"Галерея\",\n    \"/vacancies\": \"Вакансии\",\n    \"/contacts\": \"Контакты\",\n    \"/privacy\": \"Политика конфиденциальности\",\n  };\n\n  // Услуги верхнего уровня\n  const serviceCategories = {\n    \"/services/spa\": \"SPA и массаж\",\n    \"/services/epilation\": \"Эпиляция\",\n    \"/services/brows\": \"Брови и ресницы\",\n    \"/services/nails\": \"Маникюр и педикюр\",\n    \"/services/cosmetology\": \"Уход за кожей\",\n    \"/services/hairdressing\": \"Парикмахерские услуги\",\n    \"/services/makeup\": \"Макияж\",\n    \"/services/men\": \"Для мужчин\",\n  };\n\n  // Проверяем страницы верхнего уровня\n  for (const [path, name] of Object.entries(topLevelPages)) {\n    if (currentPath.includes(path)) {\n      breadcrumbs.push({\n        \"@type\": \"ListItem\",\n        position: position,\n        name: name,\n        item: `${baseUrl}/AQUANIKA${path}`,\n      });\n      return createBreadcrumbScript(breadcrumbs);\n    }\n  }\n\n  // Обрабатываем услуги с иерархией\n  for (const [categoryPath, categoryName] of Object.entries(\n    serviceCategories\n  )) {\n    if (currentPath.includes(categoryPath)) {\n      // Добавляем категорию\n      breadcrumbs.push({\n        \"@type\": \"ListItem\",\n        position: position++,\n        name: categoryName,\n        item: `${baseUrl}/AQUANIKA${categoryPath}`,\n      });\n\n      // Добавляем конкретную услугу если есть\n      const servicePages = getServicePages(categoryPath);\n      for (const [servicePath, serviceName] of Object.entries(servicePages)) {\n        if (currentPath.includes(servicePath)) {\n          breadcrumbs.push({\n            \"@type\": \"ListItem\",\n            position: position,\n            name: serviceName,\n            item: `${baseUrl}/AQUANIKA${servicePath}`,\n          });\n          break;\n        }\n      }\n\n      return createBreadcrumbScript(breadcrumbs);\n    }\n  }\n\n  return null;\n}\n\n/**\n * Возвращает подуслуги для каждой категории\n */\nfunction getServicePages(categoryPath) {\n  const services = {\n    \"/services/spa\": {\n      \"/services/aquanika\": 'ПВМ \"Акваника\"',\n      \"/services/massage\": \"Массаж\",\n      \"/services/wrapping\": \"Обертывание\",\n    },\n    \"/services/epilation\": {\n      \"/services/epilation/laser\": \"Лазерная эпиляция\",\n      \"/services/epilation/sugaring\": \"Шугаринг\",\n    },\n    \"/services/brows\": {\n      \"/services/brows/architecture\": \"Архитектура бровей\",\n      \"/services/brows/extensions\": \"Наращивание ресниц\",\n    },\n    \"/services/nails\": {\n      \"/services/nails/manicure\": \"Маникюр\",\n      \"/services/nails/pedicure\": \"Педикюр\",\n      \"/services/nails/extensions\": \"Наращивание ногтей\",\n    },\n    \"/services/cosmetology\": {\n      \"/services/cosmetology/face-care\": \"Косметология\",\n      \"/services/cosmetology/injections\": \"Инъекции\",\n      \"/services/cosmetology/tattoo-removal\": \"Выведение татуажа\",\n    },\n    \"/services/hairdressing\": {\n      \"/services/hairdressing/haircuts\": \"Стрижки\",\n      \"/services/hairdressing/coloring\": \"Окрашивание\",\n      \"/services/hairdressing/styling\": \"Укладки\",\n    },\n    \"/services/men\": {\n      \"/services/men/haircut\": \"Мужская стрижка\",\n      \"/services/men/epilation\": \"Мужская эпиляция\",\n      \"/services/men/manicure\": \"Мужской маникюр\",\n    },\n  };\n\n  return services[categoryPath] || {};\n}\n\n/**\n * Создает script элемент с structured data\n */\nfunction createBreadcrumbScript(breadcrumbs) {\n  // Удаляем старые breadcrumbs если есть\n  const oldScript = document.querySelector(\n    'script[type=\"application/ld+json\"][data-breadcrumbs]'\n  );\n  if (oldScript) {\n    oldScript.remove();\n  }\n\n  const breadcrumbData = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"BreadcrumbList\",\n    itemListElement: breadcrumbs,\n  };\n\n  const script = document.createElement(\"script\");\n  script.type = \"application/ld+json\";\n  script.setAttribute(\"data-breadcrumbs\", \"true\");\n  script.textContent = JSON.stringify(breadcrumbData, null, 2);\n\n  return script;\n}\n\n/**\n * Создает визуальные хлебные крошки на странице\n */\nfunction createVisualBreadcrumbs() {\n  const breadcrumbScript = document.querySelector(\n    'script[type=\"application/ld+json\"][data-breadcrumbs]'\n  );\n  if (!breadcrumbScript) return;\n\n  const data = JSON.parse(breadcrumbScript.textContent);\n  const items = data.itemListElement;\n\n  const breadcrumbNav = document.createElement(\"nav\");\n  breadcrumbNav.setAttribute(\"aria-label\", \"Хлебные крошки\");\n  breadcrumbNav.className = \"breadcrumbs\";\n\n  // Создаем контейнер для ограничения ширины\n  const breadcrumbContainer = document.createElement(\"div\");\n  breadcrumbContainer.className = \"container\";\n\n  const ol = document.createElement(\"ol\");\n  ol.className = \"breadcrumbs__list\";\n\n  items.forEach((item, index) => {\n    const li = document.createElement(\"li\");\n    li.className = \"breadcrumbs__item\";\n\n    if (index === items.length - 1) {\n      // Текущая страница - безопасное создание\n      const currentSpan = document.createElement(\"span\");\n      currentSpan.className = \"breadcrumbs__current\";\n      currentSpan.setAttribute(\"aria-current\", \"page\");\n      currentSpan.textContent = item.name;\n      li.appendChild(currentSpan);\n    } else {\n      // Ссылка - безопасное создание\n      const link = document.createElement(\"a\");\n      link.href = item.item;\n      link.className = \"breadcrumbs__link\";\n      link.textContent = item.name;\n      li.appendChild(link);\n    }\n\n    ol.appendChild(li);\n  });\n\n  breadcrumbContainer.appendChild(ol);\n  breadcrumbNav.appendChild(breadcrumbContainer);\n\n  // Вставляем после хедера или в начало main\n  const header = document.querySelector(\"header\");\n  const main = document.querySelector(\"main\");\n\n  if (header && main) {\n    main.insertBefore(breadcrumbNav, main.firstChild);\n  }\n}\n\n/**\n * Инициализация хлебных крошек\n */\nfunction initBreadcrumbs() {\n  const breadcrumbScript = generateBreadcrumbs();\n  if (breadcrumbScript) {\n    document.head.appendChild(breadcrumbScript);\n    console.log(\"🍞 Breadcrumbs initialized\");\n\n    // Опционально: создаем визуальные крошки\n    createVisualBreadcrumbs();\n  }\n}\n\n// Делаем функции breadcrumbs доступными глобально для роутера\nwindow.initBreadcrumbs = initBreadcrumbs;\nwindow.generateBreadcrumbs = generateBreadcrumbs;\n\n// Глобальная переменная basePath для согласованности с роутером\nwindow.basePath = window.location.hostname.includes(\"github.io\")\n  ? \"/AQUANIKA\"\n  : \"\";\n\n// ========== ЮРИДИЧЕСКИЕ ФУНКЦИИ ДЛЯ СООТВЕТСТВИЯ РФ ==========\n\n// Cookie banner — безопасная программная разметка без innerHTML\nfunction injectCookieBannerStyles() {\n  if (document.getElementById(\"cookieBannerStyles\")) return;\n  const style = document.createElement(\"style\");\n  style.id = \"cookieBannerStyles\";\n  style.textContent = `\n  .cookie-banner { \n    position: fixed; \n    left: 16px; \n    right: 16px; \n    bottom: 16px; \n    z-index: 1100; \n    display: flex; \n    gap: 16px; \n    align-items: flex-start; \n    padding: 16px; \n    background: var(--color-background, #fff); \n    color: var(--color-dark, #222); \n    border: 1px solid var(--color-border, #e0e0e0); \n    border-radius: 12px; \n    box-shadow: var(--shadow-lg, 0 10px 30px rgba(0,0,0,.15)); \n    max-width: 960px; \n    margin: 0 auto; \n  }\n  .cookie-banner__text { \n    flex: 1; \n    line-height: 1.5; \n    font-size: 14px; \n  }\n  .cookie-banner__actions { \n    display: flex; \n    gap: 12px; \n    flex-wrap: wrap; \n  }\n  .cookie-banner__link { \n    color: var(--color-secondary, #a78b3d); \n    text-decoration: underline; \n  }\n  .cookie-banner__btn { \n    white-space: nowrap; \n  }\n  .consent-checkbox {\n    margin: 10px 0;\n    padding: 10px;\n    background: #f8f9fa;\n    border-radius: 4px;\n    border: 1px solid #e9ecef;\n  }\n  .consent-checkbox label {\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    font-size: 13px;\n    cursor: pointer;\n    line-height: 1.4;\n  }\n  .consent-checkbox input[type=\"checkbox\"] {\n    margin-top: 2px;\n    flex-shrink: 0;\n  }\n  .form-consent {\n    margin: 15px 0;\n    padding: 12px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    border-left: 4px solid #007bff;\n  }\n  .form-consent label {\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n    font-size: 14px;\n    cursor: pointer;\n    line-height: 1.4;\n  }\n  .form-consent input[type=\"checkbox\"] {\n    margin-top: 2px;\n    flex-shrink: 0;\n  }\n  @media (max-width: 640px){ \n    .cookie-banner{ \n      flex-direction: column; \n      gap: 12px; \n      padding: 12px; \n    }\n    .cookie-banner__actions {\n      width: 100%;\n      justify-content: stretch;\n    }\n    .cookie-banner__btn {\n      flex: 1;\n      min-width: 120px;\n    }\n  }\n  `;\n  document.head.appendChild(style);\n}\n\nfunction buildCookieBanner() {\n  if (document.getElementById(\"cookieBanner\")) return;\n\n  const banner = document.createElement(\"div\");\n  banner.id = \"cookieBanner\";\n  banner.className = \"cookie-banner\";\n  banner.setAttribute(\"role\", \"region\");\n  banner.setAttribute(\"aria-label\", \"Уведомление об использовании cookies\");\n\n  const text = document.createElement(\"p\");\n  text.className = \"cookie-banner__text\";\n\n  const span1 = document.createElement(\"span\");\n  span1.textContent = \"Мы используем файлы cookie для улучшения работы сайта. \";\n\n  const link = document.createElement(\"a\");\n  link.className = \"cookie-banner__link\";\n  link.href = \"/privacy\";\n  link.textContent = \"Подробнее в Политике конфиденциальности\";\n  link.setAttribute(\"rel\", \"noopener\");\n  link.setAttribute(\"target\", \"_self\");\n\n  const span2 = document.createElement(\"span\");\n  span2.textContent = \".\";\n\n  text.append(span1, link, span2);\n\n  const actions = document.createElement(\"div\");\n  actions.className = \"cookie-banner__actions\";\n\n  const acceptBtn = document.createElement(\"button\");\n  acceptBtn.className = \"button button--primary cookie-banner__btn\";\n  acceptBtn.type = \"button\";\n  acceptBtn.textContent = \"Принять\";\n  acceptBtn.addEventListener(\"click\", () => {\n    try {\n      localStorage.setItem(\"cookieConsent\", \"accepted\");\n      localStorage.setItem(\"cookieConsentDate\", new Date().toISOString());\n    } catch (_) {}\n    banner.remove();\n    initAnalytics();\n  });\n\n  const rejectBtn = document.createElement(\"button\");\n  rejectBtn.className = \"button button--secondary cookie-banner__btn\";\n  rejectBtn.type = \"button\";\n  rejectBtn.textContent = \"Отклонить\";\n  rejectBtn.addEventListener(\"click\", () => {\n    try {\n      localStorage.setItem(\"cookieConsent\", \"rejected\");\n    } catch (_) {}\n    banner.remove();\n  });\n\n  actions.append(acceptBtn, rejectBtn);\n  banner.append(text, actions);\n  document.body.appendChild(banner);\n}\n\n// Инициализация аналитики (после согласия)\nfunction initAnalytics() {\n  console.log(\"📊 Инициализация аналитики (после согласия пользователя)\");\n\n  // Здесь можно добавить Яндекс.Метрику или другие российские системы\n  // Пример для Яндекс.Метрики:\n  /*\n  if (typeof ym !== 'undefined') {\n    ym(12345678, 'init', {\n      clickmap: true,\n      trackLinks: true,\n      accurateTrackBounce: true\n    });\n  }\n  */\n}\n\n// Добавление согласия в формы обратной связи\nfunction addConsentToForms() {\n  const forms = document.querySelectorAll(\"form:not([data-no-consent])\");\n\n  forms.forEach((form) => {\n    // Проверяем, нет ли уже чекбокса согласия\n    if (!form.querySelector('input[name=\"personal-data-consent\"]')) {\n      const consentDiv = document.createElement(\"div\");\n      consentDiv.className = \"form-consent\";\n\n      const consentLabel = document.createElement(\"label\");\n      const consentCheckbox = document.createElement(\"input\");\n      consentCheckbox.type = \"checkbox\";\n      consentCheckbox.name = \"personal-data-consent\";\n      consentCheckbox.required = true;\n\n      const consentText = document.createElement(\"span\");\n\n      const textNode1 = document.createTextNode(\n        \"Я согласен на обработку моих персональных данных в соответствии с \"\n      );\n      const link = document.createElement(\"a\");\n      link.href = \"/privacy\";\n      link.target = \"_blank\";\n      link.textContent = \"Политикой конфиденциальности\";\n      link.style.color = \"#007bff\";\n      const textNode2 = document.createTextNode(\"\");\n\n      consentText.appendChild(textNode1);\n      consentText.appendChild(link);\n      consentText.appendChild(textNode2);\n\n      consentLabel.appendChild(consentCheckbox);\n      consentLabel.appendChild(consentText);\n      consentDiv.appendChild(consentLabel);\n\n      // Находим кнопку отправки и вставляем перед ней\n      const submitBtn = form.querySelector(\n        'button[type=\"submit\"], input[type=\"submit\"]'\n      );\n      if (submitBtn) {\n        submitBtn.parentNode.insertBefore(consentDiv, submitBtn);\n      } else {\n        form.appendChild(consentDiv);\n      }\n    }\n  });\n}\n\n// Валидация форм с согласием\nfunction initFormValidation() {\n  document.addEventListener(\"submit\", function (e) {\n    const form = e.target;\n\n    // Пропускаем формы без необходимости согласия\n    if (form.hasAttribute(\"data-no-consent\")) return;\n\n    const consentCheckbox = form.querySelector(\n      'input[name=\"personal-data-consent\"]'\n    );\n\n    if (consentCheckbox && !consentCheckbox.checked) {\n      e.preventDefault();\n      alert(\n        \"Для отправки формы необходимо согласие на обработку персональных данных\"\n      );\n      consentCheckbox.focus();\n      consentCheckbox.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n    }\n  });\n}\n\n// Проверка юридических требований при загрузке\nfunction checkLegalRequirements() {\n  const requirements = {\n    privacyPage: !!document.querySelector('a[href*=\"privacy\"]'),\n    formsWithConsent: document.querySelectorAll(\n      'input[name=\"personal-data-consent\"]'\n    ).length,\n    cookieBanner: !!document.getElementById(\"cookieBanner\"),\n    hasLegalInfo: !!document.querySelector(\n      '.legal-info, [class*=\"requisites\"], [class*=\"реквизиты\"]'\n    ),\n  };\n\n  console.log(\"📋 Проверка юридических требований:\", requirements);\n\n  if (!requirements.privacyPage) {\n    console.warn(\"⚠️ Не найдена ссылка на политику конфиденциальности\");\n  }\n\n  if (!requirements.hasLegalInfo) {\n    console.warn(\"⚠️ Не найдена юридическая информация (реквизиты)\");\n  }\n\n  return requirements;\n}\n\nfunction initCookieBanner() {\n  try {\n    if (localStorage.getItem(\"cookieConsent\") === \"accepted\") {\n      initAnalytics(); // Если уже было согласие, инициализируем аналитику\n      return;\n    }\n  } catch (_) {}\n\n  injectCookieBannerStyles();\n  buildCookieBanner();\n}\n\n// ========== КОНЕЦ ЮРИДИЧЕСКИХ ФУНКЦИЙ ==========\n\n// Умная загрузка компонентов header/footer\nasync function loadLayoutComponents() {\n  try {\n    if (document.getElementById(\"header-placeholder\")) {\n      await loadComponent(\n        \"header-placeholder\",\n        \"/components/partials/header.html\"\n      );\n    }\n    if (document.getElementById(\"footer-placeholder\")) {\n      await loadComponent(\n        \"footer-placeholder\",\n        \"/components/partials/footer.html\"\n      );\n    }\n  } catch (error) {\n    console.warn(\"Layout components loading failed:\", error);\n  }\n}\n\n// Инициализация карты на странице контактов\nfunction initContactsPage() {\n  const currentPath = window.location.pathname;\n  const isContactsPage =\n    currentPath.includes(\"/contacts\") || document.getElementById(\"map\");\n\n  if (isContactsPage) {\n    console.log(\"🗺️ Инициализация карты на странице контактов\");\n    // Даем время DOM для обновления после роутинга\n    setTimeout(() => {\n      initMap();\n    }, 100);\n  } else {\n    // Уничтожаем карту при переходе с контактов\n    destroyMap();\n  }\n}\n\n// Инициализация при загрузке страницы\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  console.log(\n    \"🚀 AQUANIKA loaded in\",\n    window.location.hostname.includes(\"github.io\")\n      ? \"GitHub Pages\"\n      : window.location.hostname === \"localhost\"\n      ? \"Local development\"\n      : \"Production\",\n    \"mode\"\n  );\n\n  // ========== ИНИЦИАЛИЗАЦИЯ BREADCRUMBS ==========\n  try {\n    initBreadcrumbs();\n  } catch (e) {\n    console.warn(\"Breadcrumbs initialization failed\", e);\n  }\n  // ========== КОНЕЦ BREADCRUMBS ==========\n\n  // Параллельная загрузка компонентов и инициализация\n  await Promise.all([\n    loadLayoutComponents(),\n    new Promise((resolve) => {\n      new MobileMenu();\n      resolve();\n    }),\n  ]);\n\n  // Инициализируем модальные формы (sidebar, контакты, моб.меню)\n  try {\n    initFormsModals();\n  } catch (e) {\n    console.warn(\"initFormsModals failed\", e);\n  }\n\n  // ========== ИНИЦИАЛИЗАЦИЯ ЮРИДИЧЕСКИХ ФУНКЦИЙ ==========\n  try {\n    initCookieBanner();\n  } catch (e) {\n    console.warn(\"initCookieBanner failed\", e);\n  }\n\n  try {\n    addConsentToForms();\n    initFormValidation();\n  } catch (e) {\n    console.warn(\"Form consent initialization failed\", e);\n  }\n\n  try {\n    checkLegalRequirements();\n  } catch (e) {\n    console.warn(\"Legal requirements check failed\", e);\n  }\n  // ========== КОНЕЦ ИНИЦИАЛИЗАЦИИ ЮРИДИЧЕСКИХ ФУНКЦИЙ ==========\n\n  // Инициализация карты на начальной загрузке\n  initContactsPage();\n\n  // Инициализация роутера\n  initRouter();\n});\n\n// Обработка изменений маршрута для карты\nwindow.addEventListener(\"popstate\", () => {\n  setTimeout(() => {\n    initContactsPage();\n  }, 50);\n});\n\n// Экспортируем юридические функции для использования в других модулях\nexport {\n  initCookieBanner,\n  addConsentToForms,\n  initFormValidation,\n  checkLegalRequirements,\n  initMap,\n  destroyMap,\n};\n"],"names":["window","factory","lazySizes","module","document","Date","lazysizes","lazySizesCfg","prop","lazySizesDefaults","docElem","supportPicture","_addEventListener","_getAttribute","addEventListener","setTimeout","requestAnimationFrame","requestIdleCallback","regPicture","loadEvents","regClassCache","forEach","hasClass","ele","cls","addClass","removeClass","reg","addRemoveLoadEvents","dom","fn","add","action","evt","triggerEvent","elem","name","detail","noBubbles","noCancelable","event","updatePolyfill","el","full","polyfill","getCSS","style","getWidth","parent","width","rAF","running","waiting","firstFns","secondFns","fns","run","runFns","rafBatch","queue","rAFIt","simple","that","args","throttle","lastTime","gDelay","rICTimeout","idleCallback","isPriority","delay","debounce","func","timeout","timestamp","wait","later","last","loader","preloadElems","isCompleted","resetPreloadingTimer","loadMode","started","eLvW","elvH","eLtop","eLleft","eLright","eLbottom","isBodyHidden","regImg","regIframe","supportScroll","shrinkExpand","currentExpand","isLoading","lowRuns","resetPreloading","e","isVisible","isNestedVisible","elemExpand","outerRect","visible","checkElements","eLlen","i","rect","autoLoadElem","loadedSomething","elemNegativeExpand","elemExpandVal","beforeExpandVal","defaultExpand","preloadExpand","hFac","lazyloadElems","unveilElement","throttledCheckElements","switchLoadingClass","rafSwitchLoadingClass","rafedSwitchLoadingClass","changeIframeSrc","src","handleSources","source","customMedia","sourceSrcset","lazyUnveil","isAuto","sizes","isImg","srcset","isPicture","firesLoad","isLoaded","autoSizer","afterScroll","altLoadmodeScrollListner","onload","loadingElements","img","autosizesElems","sizeElement","sources","len","getSizeElement","dataAttr","updateElementsSizes","debouncedUpdateElementsSizes","init","toTopButton","homeVideoUrl","initVideoModal","videoBlock","playButton","modal","video","closeModalBtn","openVideoModal","getScrollbarWidth","container","closeVideoModal","modalContent","initGalleryModal","root","filterButtons","btn","b","filter","item","cat","show","modalImg","caption","btnClose","btnPrev","btnNext","currentIndex","getVisibleItems","it","openAt","index","items","galleryItem","inited","createMarkup","tag","className","attrs","text","node","k","v","wrapper","subjectMap","createRequiredMark","addInputRow","form","labelText","required","inputAttrs","row","label","input","addSelectRow","options","select","opt","o","addTextareaRow","ta","addConsent","agree","checkbox","span","link","addActions","actions","addHidden","type","hType","hPage","hSubject","honeypot","buildModal","titleText","buildFields","content","closeBtn","title","disableScroll","scrollBarWidth","enableScroll","setPageHiddenValue","inp","openModal","overlay","m","target","closeModal","bindEvents","modalTrigger","msg","subj","subjInp","sidebarBtn","initFormsModals","loadComponent","elementId","componentPath","url","basePath","response","html","element","safe","tpl","_a","fallbackTpl","error","MobileMenu","category","submenu","mapConfig","myMap","createBalloonContent","address","addressStrong","phone","phoneStrong","phoneLink","hours","hoursStrong","createMapErrorContent","placeholder","icon","loadingText","message","initMap","loadYandexMapsAPI","createMap","showMapError","script","balloonContent","myPlacemark","setupMapControls","setupResponsive","map","searchControl","routeButton","checkMobile","mapContainer","errorContent","destroyMap","Forms","handleSubmit","submitButton","formData","validateForm","typeInput","formType","waPhone","buildWhatsAppMessage","showMessage","sendFormData","_b","inputs","isValid","clearError","showError","errorElement","messageElement","oldMessage","data","lines","method","json","initForms","generateBreadcrumbs","currentPath","baseUrl","breadcrumbs","position","createBreadcrumbScript","topLevelPages","serviceCategories","path","categoryPath","categoryName","servicePages","getServicePages","servicePath","serviceName","oldScript","breadcrumbData","createVisualBreadcrumbs","breadcrumbScript","breadcrumbNav","breadcrumbContainer","ol","li","currentSpan","header","main","initBreadcrumbs","injectCookieBannerStyles","buildCookieBanner","banner","span1","span2","acceptBtn","initAnalytics","rejectBtn","addConsentToForms","consentDiv","consentLabel","consentCheckbox","consentText","textNode1","textNode2","submitBtn","initFormValidation","checkLegalRequirements","requirements","initCookieBanner","loadLayoutComponents","initContactsPage","resolve","initRouter"],"mappings":"4xBAAC,SAASA,EAAQC,EAAS,CAC1B,IAAIC,EAAYD,EAAQD,EAAQA,EAAO,SAAU,IAAI,EACrDA,EAAO,UAAYE,EACaC,EAAO,UACtCA,EAAA,QAAiBD,EAEnB,GAAE,OAAO,OAAU,IACb,OAAS,CAAA,EAKf,SAAWF,EAAQI,EAAUC,EAAM,CAIlC,IAAIC,EAIHC,EAuCD,GArCC,UAAU,CACV,IAAIC,EAEAC,EAAoB,CACvB,UAAW,WACX,YAAa,aACb,aAAc,cACd,aAAc,cACd,WAAY,YAEZ,eAAgB,gBAChB,gBAAiB,eACjB,eAAgB,EAChB,QAAS,WACT,WAAY,cACZ,UAAW,aAEX,QAAS,GACT,YAAa,CAAA,EACb,KAAM,GACN,UAAW,IACX,KAAM,GACN,SAAU,EACV,WAAY,GACZ,WAAY,EACZ,cAAe,GAClB,EAEEF,EAAeP,EAAO,iBAAmBA,EAAO,iBAAmB,CAAA,EAEnE,IAAIQ,KAAQC,EACND,KAAQD,IACZA,EAAaC,CAAI,EAAIC,EAAkBD,CAAI,EAG/C,EAAE,EAEG,CAACJ,GAAY,CAACA,EAAS,uBAC1B,MAAO,CACN,KAAM,UAAY,CAAA,EAIlB,IAAKG,EAIL,UAAW,EACd,EAGC,IAAIG,EAAUN,EAAS,gBAEnBO,EAAiBX,EAAO,mBAExBY,EAAoB,mBAEpBC,EAAgB,eAMhBC,EAAmBd,EAAOY,CAAiB,EAAE,KAAKZ,CAAM,EAExDe,EAAaf,EAAO,WAEpBgB,EAAwBhB,EAAO,uBAAyBe,EAExDE,EAAsBjB,EAAO,oBAE7BkB,EAAa,aAEbC,EAAa,CAAC,OAAQ,QAAS,eAAgB,aAAa,EAE5DC,EAAgB,CAAA,EAEhBC,EAAU,MAAM,UAAU,QAM1BC,EAAW,SAASC,EAAKC,EAAK,CACjC,OAAIJ,EAAcI,CAAG,IACpBJ,EAAcI,CAAG,EAAI,IAAI,OAAO,UAAUA,EAAI,SAAS,GAEjDJ,EAAcI,CAAG,EAAE,KAAKD,EAAIV,CAAa,EAAE,OAAO,GAAK,EAAE,GAAKO,EAAcI,CAAG,CACxF,EAMKC,EAAW,SAASF,EAAKC,EAAK,CAC5BF,EAASC,EAAKC,CAAG,GACrBD,EAAI,aAAa,SAAUA,EAAIV,CAAa,EAAE,OAAO,GAAK,IAAI,OAAS,IAAMW,CAAG,CAEnF,EAMKE,GAAc,SAASH,EAAKC,EAAK,CACpC,IAAIG,GACCA,EAAML,EAASC,EAAIC,CAAG,IAC1BD,EAAI,aAAa,SAAUA,EAAIV,CAAa,EAAE,OAAO,GAAK,IAAI,QAAQc,EAAK,GAAG,CAAC,CAElF,EAEKC,GAAsB,SAASC,EAAKC,EAAIC,EAAI,CAC/C,IAAIC,EAASD,EAAMnB,EAAoB,sBACpCmB,GACFH,GAAoBC,EAAKC,CAAE,EAE5BX,EAAW,QAAQ,SAASc,EAAI,CAC/BJ,EAAIG,CAAM,EAAEC,EAAKH,CAAE,CACtB,CAAG,CACH,EAUKI,EAAe,SAASC,EAAMC,EAAMC,EAAQC,EAAWC,EAAa,CACvE,IAAIC,EAAQpC,EAAS,YAAY,OAAO,EAExC,OAAIiC,IACHA,EAAS,CAAA,GAGVA,EAAO,SAAW/B,EAElBkC,EAAM,UAAUJ,EAAM,CAACE,EAAW,CAACC,CAAY,EAE/CC,EAAM,OAASH,EAEfF,EAAK,cAAcK,CAAK,EACjBA,CACT,EAEKC,GAAiB,SAAUC,EAAIC,EAAK,CACvC,IAAIC,EACA,CAACjC,IAAoBiC,EAAY5C,EAAO,aAAeO,EAAa,KACpEoC,GAAQA,EAAK,KAAO,CAACD,EAAG7B,CAAa,EAAE,QAAQ,GACjD6B,EAAG,aAAa,SAAUC,EAAK,GAAG,EAEnCC,EAAS,CAAC,WAAY,GAAM,SAAU,CAACF,CAAE,CAAC,CAAC,GAClCC,GAAQA,EAAK,MACtBD,EAAG,IAAMC,EAAK,IAEjB,EAEKE,EAAS,SAAUV,EAAMW,EAAM,CAClC,OAAQ,iBAAiBX,EAAM,IAAI,GAAK,CAAA,GAAIW,CAAK,CACnD,EASKC,GAAW,SAASZ,EAAMa,EAAQC,EAAM,CAG3C,IAFAA,EAAQA,GAASd,EAAK,YAEhBc,EAAQ1C,EAAa,SAAWyC,GAAU,CAACb,EAAK,iBACrDc,EAASD,EAAO,YAChBA,EAASA,EAAO,WAGjB,OAAOC,CACT,EAEKC,EAAO,UAAU,CACpB,IAAIC,EAASC,EACTC,EAAW,CAAA,EACXC,EAAY,CAAA,EACZC,EAAMF,EAENG,EAAM,UAAU,CACnB,IAAIC,EAASF,EAOb,IALAA,EAAMF,EAAS,OAASC,EAAYD,EAEpCF,EAAU,GACVC,EAAU,GAEJK,EAAO,QACZA,EAAO,MAAK,EAAE,EAGfN,EAAU,EACb,EAEMO,EAAW,SAAS5B,EAAI6B,EAAM,CAC9BR,GAAW,CAACQ,EACd7B,EAAG,MAAM,KAAM,SAAS,GAExByB,EAAI,KAAKzB,CAAE,EAEPsB,IACHA,EAAU,IACThD,EAAS,OAASW,EAAaC,GAAuBwC,CAAG,GAG/D,EAEE,OAAAE,EAAS,SAAWF,EAEbE,CACT,EAAE,EAEGE,GAAQ,SAAS9B,EAAI+B,EAAO,CAC/B,OAAOA,EACN,UAAW,CACVX,EAAIpB,CAAE,GAEP,UAAU,CACT,IAAIgC,EAAO,KACPC,EAAO,UACXb,EAAI,UAAU,CACbpB,EAAG,MAAMgC,EAAMC,CAAI,CACxB,CAAK,EAGL,EAEKC,GAAW,SAASlC,EAAG,CAC1B,IAAIqB,EACAc,EAAW,EACXC,EAAS3D,EAAa,cACtB4D,EAAa5D,EAAa,WAC1BiD,EAAM,UAAU,CACnBL,EAAU,GACVc,EAAW5D,EAAK,IAAG,EACnByB,EAAE,CACL,EACMsC,EAAenD,GAAuBkD,EAAa,GACtD,UAAU,CACTlD,EAAoBuC,EAAK,CAAC,QAASW,CAAU,CAAC,EAE3CA,IAAe5D,EAAa,aAC9B4D,EAAa5D,EAAa,aAG5BqD,GAAM,UAAU,CACf7C,EAAWyC,CAAG,GACZ,EAAI,EAGR,OAAO,SAASa,EAAW,CAC1B,IAAIC,GAEAD,EAAaA,IAAe,MAC/BF,EAAa,IAGX,CAAAhB,IAIHA,EAAW,GAEXmB,EAAQJ,GAAU7D,EAAK,IAAG,EAAK4D,GAE5BK,EAAQ,IACVA,EAAQ,GAGND,GAAcC,EAAQ,EACxBF,EAAY,EAEZrD,EAAWqD,EAAcE,CAAK,EAElC,CACA,EAGKC,GAAW,SAASC,EAAM,CAC7B,IAAIC,EAASC,EACTC,EAAO,GACPnB,EAAM,UAAU,CACnBiB,EAAU,KACVD,EAAI,CACP,EACMI,EAAQ,UAAW,CACtB,IAAIC,EAAOxE,EAAK,IAAG,EAAKqE,EAEpBG,EAAOF,EACV5D,EAAW6D,EAAOD,EAAOE,CAAI,GAE5B5D,GAAuBuC,GAAKA,CAAG,CAEpC,EAEE,OAAO,UAAW,CACjBkB,EAAYrE,EAAK,IAAG,EAEfoE,IACJA,EAAU1D,EAAW6D,EAAOD,CAAI,EAEpC,CACA,EAEKG,GAAU,UAAU,CACvB,IAAIC,EAAcC,EAAaC,EAAsBC,EAAUC,EAE3DC,EAAMC,EAAMC,EAAOC,EAAQC,EAASC,EAAUC,EAE9CC,GAAS,SACTC,GAAY,YAEZC,GAAiB,aAAc7F,GAAW,CAAE,eAAe,KAAK,UAAU,SAAS,EAEnF8F,GAAe,EACfC,EAAgB,EAEhBC,EAAY,EACZC,EAAU,GAEVC,GAAkB,SAASC,EAAE,CAChCH,KACG,CAACG,GAAKH,EAAY,GAAK,CAACG,EAAE,UAC5BH,EAAY,EAEhB,EAEMI,GAAY,SAAUjE,EAAM,CAC/B,OAAIuD,GAAgB,OACnBA,EAAe7C,EAAOzC,EAAS,KAAM,YAAY,GAAK,UAGhDsF,GAAgB,EAAE7C,EAAOV,EAAK,WAAY,YAAY,GAAK,UAAYU,EAAOV,EAAM,YAAY,GAAK,SAC/G,EAEMkE,GAAkB,SAASlE,EAAMmE,EAAW,CAC/C,IAAIC,EACAvD,EAASb,EACTqE,EAAUJ,GAAUjE,CAAI,EAO5B,IALAmD,GAASgB,EACTb,GAAYa,EACZf,GAAUe,EACVd,GAAWc,EAELE,IAAYxD,EAASA,EAAO,eAAiBA,GAAU5C,EAAS,MAAQ4C,GAAUtC,GACvF8F,GAAY3D,EAAOG,EAAQ,SAAS,GAAK,GAAK,EAE3CwD,GAAW3D,EAAOG,EAAQ,UAAU,GAAK,YAC3CuD,EAAYvD,EAAO,sBAAqB,EACxCwD,EAAUhB,EAAUe,EAAU,MAC7BhB,EAASgB,EAAU,OACnBd,EAAWc,EAAU,IAAM,GAC3BjB,EAAQiB,EAAU,OAAS,GAK9B,OAAOC,CACV,EAEMC,GAAgB,UAAW,CAC9B,IAAIC,EAAOC,EAAGC,EAAMC,EAAcC,EAAiBR,EAAYS,EAAoBC,EAClFC,EAAiBC,EAAeC,EAAeC,EAC5CC,EAAgB/G,EAAU,SAE9B,IAAI4E,EAAW3E,EAAa,WAAayF,EAAY,IAAMU,EAAQW,EAAc,QAAQ,CAMxF,IAJAV,EAAI,EAEJV,IAEMU,EAAID,EAAOC,IAEhB,GAAG,GAACU,EAAcV,CAAC,GAAKU,EAAcV,CAAC,EAAE,WAEzC,IAAG,CAACd,IAAkBvF,EAAU,iBAAmBA,EAAU,gBAAgB+G,EAAcV,CAAC,CAAC,EAAG,CAACW,GAAcD,EAAcV,CAAC,CAAC,EAAE,QAAS,CAoC1I,IAlCG,EAAEK,EAAgBK,EAAcV,CAAC,EAAE9F,CAAa,EAAE,aAAa,IAAM,EAAEyF,EAAaU,EAAgB,MACtGV,EAAaP,GAGTmB,IACJA,EAAiB,CAAC3G,EAAa,QAAUA,EAAa,OAAS,EAC9DG,EAAQ,aAAe,KAAOA,EAAQ,YAAc,IAAM,IAAM,IAChEH,EAAa,OAEdD,EAAU,OAAS4G,EAEnBC,EAAgBD,EAAgB3G,EAAa,UAC7C6G,EAAO7G,EAAa,KACpBmF,EAAe,KAEZK,EAAgBoB,GAAiBnB,EAAY,GAAKC,EAAU,GAAKf,EAAW,GAAK,CAAC9E,EAAS,QAC7F2F,EAAgBoB,EAChBlB,EAAU,GACDf,EAAW,GAAKe,EAAU,GAAKD,EAAY,EACpDD,EAAgBmB,EAEhBnB,EAAgBD,IAIfmB,IAAoBX,IACtBlB,EAAO,WAAckB,EAAac,EAClC/B,EAAO,YAAciB,EACrBS,EAAqBT,EAAa,GAClCW,EAAkBX,GAGnBM,EAAOS,EAAcV,CAAC,EAAE,sBAAqB,GAExClB,EAAWmB,EAAK,SAAWG,IAC9BzB,EAAQsB,EAAK,MAAQvB,IACrBG,EAAUoB,EAAK,QAAUG,EAAqBK,IAC9C7B,EAASqB,EAAK,OAASxB,IACvBK,GAAYD,GAAWD,GAAUD,KACjC/E,EAAa,YAAc6F,GAAUiB,EAAcV,CAAC,CAAC,KACpD3B,GAAegB,EAAY,GAAK,CAACgB,IAAkB9B,EAAW,GAAKe,EAAU,IAAOI,GAAgBgB,EAAcV,CAAC,EAAGL,CAAU,IAGlI,GAFAgB,GAAcD,EAAcV,CAAC,CAAC,EAC9BG,EAAkB,GACfd,EAAY,EAAG,UACT,CAACc,GAAmB9B,GAAe,CAAC6B,GAC7Cb,EAAY,GAAKC,EAAU,GAAKf,EAAW,IAC1CH,EAAa,CAAC,GAAKxE,EAAa,oBAChCwE,EAAa,CAAC,GAAM,CAACiC,IAAmBvB,GAAYD,GAAWD,GAAUD,GAAU+B,EAAcV,CAAC,EAAE9F,CAAa,EAAEN,EAAa,SAAS,GAAK,WAC/IsG,EAAe9B,EAAa,CAAC,GAAKsC,EAAcV,CAAC,GAIhDE,GAAgB,CAACC,GACnBQ,GAAcT,CAAY,EAG/B,EAEMU,EAAyBvD,GAASyC,EAAa,EAE/Ce,GAAqB,SAASrB,EAAE,CACnC,IAAIhE,EAAOgE,EAAE,OAEb,GAAIhE,EAAK,WAAY,CACpB,OAAOA,EAAK,WACZ,OAGD+D,GAAgBC,CAAC,EACjB1E,EAASU,EAAM5B,EAAa,WAAW,EACvCmB,GAAYS,EAAM5B,EAAa,YAAY,EAC3CqB,GAAoBO,EAAMsF,EAAqB,EAC/CvF,EAAaC,EAAM,YAAY,CAClC,EACMuF,GAA0B9D,GAAM4D,EAAkB,EAClDC,GAAwB,SAAStB,EAAE,CACtCuB,GAAwB,CAAC,OAAQvB,EAAE,MAAM,CAAC,CAC7C,EAEMwB,GAAkB,SAASxF,EAAMyF,EAAI,CACxC,IAAI1C,EAAW/C,EAAK,aAAa,gBAAgB,GAAK5B,EAAa,eAG/D2E,GAAY,EACf/C,EAAK,cAAc,SAAS,QAAQyF,CAAG,EAC7B1C,GAAY,IACtB/C,EAAK,IAAMyF,EAEf,EAEMC,GAAgB,SAASC,EAAO,CACnC,IAAIC,EAEAC,EAAeF,EAAOjH,CAAa,EAAEN,EAAa,UAAU,GAE3DwH,EAAcxH,EAAa,YAAYuH,EAAOjH,CAAa,EAAE,YAAY,GAAKiH,EAAOjH,CAAa,EAAE,OAAO,CAAC,IAChHiH,EAAO,aAAa,QAASC,CAAW,EAGtCC,GACFF,EAAO,aAAa,SAAUE,CAAY,CAE9C,EAEMC,GAAarE,GAAM,SAAUzB,EAAME,EAAQ6F,EAAQC,EAAOC,EAAM,CACnE,IAAIR,EAAKS,EAAQrF,EAAQsF,EAAW9F,EAAO+F,GAEtC/F,EAAQN,EAAaC,EAAM,mBAAoBE,CAAM,GAAG,mBAEzD8F,IACCD,EACFzG,EAASU,EAAM5B,EAAa,cAAc,EAE1C4B,EAAK,aAAa,QAASgG,CAAK,GAIlCE,EAASlG,EAAKtB,CAAa,EAAEN,EAAa,UAAU,EACpDqH,EAAMzF,EAAKtB,CAAa,EAAEN,EAAa,OAAO,EAE3C6H,IACFpF,EAASb,EAAK,WACdmG,EAAYtF,GAAU9B,EAAW,KAAK8B,EAAO,UAAY,EAAE,GAG5DuF,EAAYlG,EAAO,WAAe,QAASF,IAAUkG,GAAUT,GAAOU,GAEtE9F,EAAQ,CAAC,OAAQL,CAAI,EAErBV,EAASU,EAAM5B,EAAa,YAAY,EAErCgI,IACF,aAAatD,CAAoB,EACjCA,EAAuBlE,EAAWmF,GAAiB,IAAI,EACvDtE,GAAoBO,EAAMsF,GAAuB,EAAI,GAGnDa,GACFjH,EAAQ,KAAK2B,EAAO,qBAAqB,QAAQ,EAAG6E,EAAa,EAG/DQ,EACFlG,EAAK,aAAa,SAAUkG,CAAM,EACzBT,GAAO,CAACU,IACd1C,GAAU,KAAKzD,EAAK,QAAQ,EAC9BwF,GAAgBxF,EAAMyF,CAAG,EAEzBzF,EAAK,IAAMyF,GAIVQ,IAAUC,GAAUC,IACtB7F,GAAeN,EAAM,CAAC,IAAKyF,CAAG,CAAC,GAI9BzF,EAAK,WACP,OAAOA,EAAK,UAEbT,GAAYS,EAAM5B,EAAa,SAAS,EAExC2C,EAAI,UAAU,CAEb,IAAIsF,EAAWrG,EAAK,UAAYA,EAAK,aAAe,GAEhD,CAACoG,GAAaC,KACbA,GACH/G,EAASU,EAAM5B,EAAa,eAAe,EAE5CiH,GAAmBhF,CAAK,EACxBL,EAAK,WAAa,GAClBpB,EAAW,UAAU,CAChB,eAAgBoB,GACnB,OAAOA,EAAK,YAEX,CAAC,GAEDA,EAAK,SAAW,QACnB6D,KAEC,EAAI,CACV,CAAG,EAMGsB,GAAgB,SAAUnF,EAAK,CAClC,GAAI,CAAAA,EAAK,UACT,KAAIE,EAEA+F,EAAQzC,GAAO,KAAKxD,EAAK,QAAQ,EAGjCgG,EAAQC,IAAUjG,EAAKtB,CAAa,EAAEN,EAAa,SAAS,GAAK4B,EAAKtB,CAAa,EAAE,OAAO,GAC5FqH,EAASC,GAAS,QAEjBD,GAAU,CAAClD,IAAgBoD,IAAUjG,EAAKtB,CAAa,EAAE,KAAK,GAAKsB,EAAK,SAAW,CAACA,EAAK,UAAY,CAACb,EAASa,EAAM5B,EAAa,UAAU,GAAKe,EAASa,EAAM5B,EAAa,SAAS,IAE3L8B,EAASH,EAAaC,EAAM,gBAAgB,EAAE,OAE3C+F,GACDO,GAAU,WAAWtG,EAAM,GAAMA,EAAK,WAAW,EAGnDA,EAAK,UAAY,GACjB6D,IAEAiC,GAAW9F,EAAME,EAAQ6F,EAAQC,EAAOC,CAAK,GAChD,EAEMM,GAAcnE,GAAS,UAAU,CACpChE,EAAa,SAAW,EACxBgH,EAAsB,CACzB,CAAG,EAEGoB,GAA2B,UAAU,CACrCpI,EAAa,UAAY,IAC3BA,EAAa,SAAW,GAEzBmI,GAAW,CACd,EAEME,GAAS,UAAU,CACtB,GAAG,CAAA5D,EACH,IAAG3E,EAAK,MAAQ8E,EAAU,IAAI,CAC7BpE,EAAW6H,GAAQ,GAAG,EACtB,OAID5D,EAAc,GAEdzE,EAAa,SAAW,EAExBgH,EAAsB,EAEtBzG,EAAiB,SAAU6H,GAA0B,EAAI,EAC5D,EAEE,MAAO,CACN,EAAG,UAAU,CACZxD,EAAU9E,EAAK,IAAG,EAElBC,EAAU,SAAWF,EAAS,uBAAuBG,EAAa,SAAS,EAC3EwE,EAAe3E,EAAS,uBAAuBG,EAAa,UAAY,IAAMA,EAAa,YAAY,EAEvGO,EAAiB,SAAUyG,EAAwB,EAAI,EAEvDzG,EAAiB,SAAUyG,EAAwB,EAAI,EAEvDzG,EAAiB,WAAY,SAAUqF,EAAG,CACzC,GAAIA,EAAE,UAAW,CAChB,IAAI0C,EAAkBzI,EAAS,iBAAiB,IAAMG,EAAa,YAAY,EAE3EsI,EAAgB,QAAUA,EAAgB,SAC7C7H,EAAsB,UAAY,CACjC6H,EAAgB,QAAS,SAAUC,EAAK,CACnCA,EAAI,UACPxB,GAAcwB,CAAG,CAE3B,CAAS,CACT,CAAQ,EAGR,CAAK,EAEE9I,EAAO,iBACT,IAAI,iBAAkBuH,GAAyB,QAAS7G,EAAS,CAAC,UAAW,GAAM,QAAS,GAAM,WAAY,EAAI,CAAC,GAEnHA,EAAQE,CAAiB,EAAE,kBAAmB2G,EAAwB,EAAI,EAC1E7G,EAAQE,CAAiB,EAAE,kBAAmB2G,EAAwB,EAAI,EAC1E,YAAYA,EAAwB,GAAG,GAGxCzG,EAAiB,aAAcyG,EAAwB,EAAI,EAG3D,CAAC,QAAS,YAAa,QAAS,OAAQ,gBAAiB,cAAc,EAAE,QAAQ,SAASnF,EAAK,CAC9FhC,EAASQ,CAAiB,EAAEwB,EAAMmF,EAAwB,EAAI,CACnE,CAAK,EAEG,QAAQ,KAAKnH,EAAS,UAAU,EACnCwI,GAAM,GAEN9H,EAAiB,OAAQ8H,EAAM,EAC/BxI,EAASQ,CAAiB,EAAE,mBAAoB2G,CAAsB,EACtExG,EAAW6H,GAAQ,GAAK,GAGtBtI,EAAU,SAAS,QACrBmG,GAAa,EACbvD,EAAI,SAAQ,GAEZqE,EAAsB,GAGxB,WAAYA,EACZ,OAAQD,GACR,MAAOqB,EACV,CACA,EAAE,EAGGF,GAAa,UAAU,CAC1B,IAAIM,EAEAC,EAAcpF,GAAM,SAASzB,EAAMa,EAAQR,EAAOS,EAAM,CAC3D,IAAIgG,EAAStC,EAAGuC,EAMhB,GALA/G,EAAK,gBAAkBc,EACvBA,GAAS,KAETd,EAAK,aAAa,QAASc,CAAK,EAE7B/B,EAAW,KAAK8B,EAAO,UAAY,EAAE,EAEvC,IADAiG,EAAUjG,EAAO,qBAAqB,QAAQ,EAC1C2D,EAAI,EAAGuC,EAAMD,EAAQ,OAAQtC,EAAIuC,EAAKvC,IACzCsC,EAAQtC,CAAC,EAAE,aAAa,QAAS1D,CAAK,EAIpCT,EAAM,OAAO,UAChBC,GAAeN,EAAMK,EAAM,MAAM,CAErC,CAAG,EAOG2G,EAAiB,SAAUhH,EAAMiH,EAAUnG,EAAM,CACpD,IAAIT,EACAQ,EAASb,EAAK,WAEfa,IACFC,EAAQF,GAASZ,EAAMa,EAAQC,CAAK,EACpCT,EAAQN,EAAaC,EAAM,kBAAmB,CAAC,MAAOc,EAAO,SAAU,CAAC,CAACmG,CAAQ,CAAC,EAE9E5G,EAAM,mBACTS,EAAQT,EAAM,OAAO,MAElBS,GAASA,IAAUd,EAAK,iBAC1B6G,EAAY7G,EAAMa,EAAQR,EAAOS,CAAK,GAI5C,EAEMoG,EAAsB,UAAU,CACnC,IAAI1C,EACAuC,EAAMH,EAAe,OACzB,GAAGG,EAGF,IAFAvC,EAAI,EAEEA,EAAIuC,EAAKvC,IACdwC,EAAeJ,EAAepC,CAAC,CAAC,CAGrC,EAEM2C,EAA+B/E,GAAS8E,CAAmB,EAE/D,MAAO,CACN,EAAG,UAAU,CACZN,EAAiB3I,EAAS,uBAAuBG,EAAa,cAAc,EAC5EO,EAAiB,SAAUwI,CAA4B,GAExD,WAAYA,EACZ,WAAYH,CACf,CACA,EAAE,EAEGI,GAAO,UAAU,CACjB,CAACA,GAAK,GAAKnJ,EAAS,yBACtBmJ,GAAK,EAAI,GACTd,GAAU,EAAC,EACX3D,GAAO,EAAC,EAEX,EAEC,OAAA/D,EAAW,UAAU,CACjBR,EAAa,MACfgJ,GAAI,CAEP,CAAE,EAEDjJ,EAAY,CAIX,IAAKC,EACL,UAAWkI,GACX,OAAQ3D,GACR,KAAMyE,GACN,GAAI9G,GACJ,GAAIhB,EACJ,GAAIC,GACJ,GAAIJ,EACJ,KAAMY,EACN,GAAIa,GACJ,IAAKG,CACP,EAEQ5C,UCxyBR,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMkJ,EAAc,SAAS,eAAe,aAAa,EACpDA,IAGL,OAAO,iBAAiB,SAAU,IAAM,CAClC,OAAO,YAAc,IACvBA,EAAY,UAAU,IAAI,MAAM,EAEhCA,EAAY,UAAU,OAAO,MAAM,CAEzC,CAAG,EAGDA,EAAY,iBAAiB,QAAS,IAAM,CAC1C,OAAO,SAAS,CACd,IAAK,EACL,SAAU,QAChB,CAAK,CACL,CAAG,EACH,CAAC,ECvBD,MAAAC,GAAe,qCCGR,SAASC,IAAiB,CAE7B,MAAMC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAQ,SAAS,eAAe,YAAY,EAC5CC,EAAQ,SAAS,eAAe,YAAY,EAC5CC,EAAgB,SAAS,eAAe,YAAY,EAG1D,GAAI,CAACJ,GAAc,CAACC,GAAc,CAACC,GAAS,CAACC,GAAS,CAACC,EACnD,OAIJ,GAAI,CACIN,KACAK,EAAM,IAAML,GACZK,EAAM,aAAa,UAAW,MAAM,EAGhD,OAAa3D,EAAG,CACR,QAAQ,KAAK,sCAAuCA,CAAC,CAC7D,CAGI,eAAe6D,GAAiB,CAC5BH,EAAM,MAAM,QAAU,QACtB,SAAS,KAAK,MAAM,SAAW,SAC/B,SAAS,KAAK,MAAM,aAAeI,EAAiB,EAAK,KAGzD,MAAMC,EAAYL,EAAM,cAAc,kBAAkB,GAAKC,EAC7D,GAAI,CACII,EAAU,kBACV,MAAMA,EAAU,kBAAiB,EAC1BA,EAAU,wBACjBA,EAAU,wBAAuB,EAC1BJ,EAAM,uBACbA,EAAM,sBAAqB,CAE3C,OAAiB3D,EAAG,CACR,QAAQ,KAAK,oBAAqBA,CAAC,CAC/C,CAGQ,GAAI,CACA,MAAM2D,EAAM,KAAI,CAC5B,OAAiB3D,EAAG,CACR,QAAQ,IAAI,oCAAqCA,CAAC,CAC9D,CACA,CAGI,eAAegE,GAAkB,CAC7B,GAAI,CAAEL,EAAM,MAAK,CAAG,MAAY,CAAA,CAChCD,EAAM,MAAM,QAAU,OACtB,SAAS,KAAK,MAAM,SAAW,OAC/B,SAAS,KAAK,MAAM,aAAe,GAEnC,GAAI,CACI,SAAS,mBAAqB,SAAS,eACvC,MAAM,SAAS,eAAc,EACtB,SAAS,yBAA2B,SAAS,sBACpD,SAAS,qBAAoB,CAE7C,OAAiB1D,EAAG,CACR,QAAQ,KAAK,yBAA0BA,CAAC,CACpD,CACA,CAGI,SAAS8D,GAAoB,CACzB,OAAO,OAAO,WAAa,SAAS,gBAAgB,WAC5D,CAGIN,EAAW,iBAAiB,QAAS,SAASxD,EAAG,CAEzCA,EAAE,SAAWyD,GAAc,CAACA,EAAW,SAASzD,EAAE,MAAM,GACxD6D,EAAc,CAE1B,CAAK,EAGDJ,EAAW,iBAAiB,QAASI,CAAc,EAGnDD,EAAc,iBAAiB,QAASI,CAAe,EAGvDN,EAAM,iBAAiB,QAAS,SAASrH,EAAO,CACxCA,EAAM,SAAWqH,GACjBM,EAAe,CAE3B,CAAK,EAGD,SAAS,iBAAiB,UAAW,SAAS3H,EAAO,CAC7CA,EAAM,MAAQ,UAAYqH,EAAM,MAAM,UAAY,SAClDM,EAAe,CAE3B,CAAK,EAGD,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EACxDA,GACAA,EAAa,iBAAiB,QAAS,SAASjE,EAAG,CAC/CA,EAAE,gBAAe,CAC7B,CAAS,EAGL,QAAQ,IAAI,sCAAsC,CACtD,CCjHO,SAASkE,IAAmB,CACjC,MAAMC,EAAO,SACPJ,EAAYI,EAAK,eAAe,gBAAgB,EAEtD,GAAI,CAACJ,EAAW,OAGhB,MAAMK,EAAgBD,EAAK,iBAAiB,gCAAgC,EAC5EC,EAAc,QAASC,GAAQ,CAC7BA,EAAI,iBAAiB,QAAS,IAAM,CAClCD,EAAc,QAASE,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EACzDD,EAAI,UAAU,IAAI,QAAQ,EAC1B,MAAME,EAASF,EAAI,aAAa,aAAa,EAC/BN,EAAU,iBAAiB,eAAe,EAClD,QAASS,GAAS,CACtB,MAAMC,EAAMD,EAAK,aAAa,eAAe,EACvCE,EAAOH,IAAW,OAASE,IAAQF,EACzCC,EAAK,MAAM,QAAUE,EAAO,GAAK,MACzC,CAAO,CACP,CAAK,CACL,CAAG,EAGD,MAAMhB,EAAQS,EAAK,eAAe,cAAc,EAChD,GAAI,CAACT,EAAO,OAEZ,MAAMiB,EAAWjB,EAAM,cAAc,uBAAuB,EACtDkB,EAAUlB,EAAM,cAAc,yBAAyB,EACvDmB,EAAWnB,EAAM,cAAc,uBAAuB,EACtDoB,EAAUpB,EAAM,cAAc,sBAAsB,EACpDqB,EAAUrB,EAAM,cAAc,sBAAsB,EAE1D,IAAIsB,EAAe,GACnB,MAAMC,EAAkB,IACtB,MAAM,KAAKlB,EAAU,iBAAiB,eAAe,CAAC,EAAE,OACrDmB,GAAOA,EAAG,MAAM,UAAY,MACnC,EAEE,SAASC,EAAOC,EAAO,CACrB,MAAMC,EAAQJ,IACd,GAAI,CAACI,EAAM,OAAQ,OACnBL,GAAgBI,EAAQC,EAAM,QAAUA,EAAM,OAC9C,MAAM1C,EAAM0C,EAAML,CAAY,EAAE,cAAc,KAAK,EACnDL,EAAS,IAAMhC,EAAI,IACnBgC,EAAS,IAAMhC,EAAI,KAAO,GAC1BiC,EAAQ,YAAcjC,EAAI,KAAO,GACjCe,EAAM,UAAU,IAAI,SAAS,CACjC,CAEEK,EAAU,iBAAiB,QAAU/D,GAAM,CAEzC,IAAI2C,EAAM3C,EAAE,OAAO,QAAQ,KAAK,EAC5BsF,EAActF,EAAE,OAAO,QAAQ,eAAe,EAOlD,GAJI,CAAC2C,GAAO2C,IACV3C,EAAM2C,EAAY,cAAc,KAAK,GAGnC,CAAC3C,GAAO,CAAC2C,EAAa,OAG1B,MAAMF,EADQH,IACM,QAAQK,CAAW,EACvCH,EAAOC,CAAK,CAChB,CAAG,EAEDP,EAAS,iBAAiB,QAAS,IAAMnB,EAAM,UAAU,OAAO,SAAS,CAAC,EAC1EA,EAAM,iBAAiB,QAAU1D,GAAM,CACjCA,EAAE,SAAW0D,GAAOA,EAAM,UAAU,OAAO,SAAS,CAC5D,CAAG,EAEDoB,EAAQ,iBAAiB,QAAS,IAAMK,EAAOH,EAAe,CAAC,CAAC,EAChED,EAAQ,iBAAiB,QAAS,IAAMI,EAAOH,EAAe,CAAC,CAAC,EAChE,OAAO,iBAAiB,UAAYhF,GAAM,CACnC0D,EAAM,UAAU,SAAS,SAAS,IACnC1D,EAAE,MAAQ,UAAU0D,EAAM,UAAU,OAAO,SAAS,EACpD1D,EAAE,MAAQ,aAAamF,EAAOH,EAAe,CAAC,EAC9ChF,EAAE,MAAQ,cAAcmF,EAAOH,EAAe,CAAC,EACvD,CAAG,CACH,CC9EA,IAAIO,GAAS,GAEb,SAASC,IAAe,CACtB,GAAI,SAAS,eAAe,mBAAmB,EAAG,OAGlD,MAAMjJ,EAAK,CAACkJ,EAAKC,EAAWC,EAAQ,CAAA,EAAIC,IAAS,CAC/C,MAAMC,EAAO,SAAS,cAAcJ,CAAG,EACnCC,IAAWG,EAAK,UAAYH,GAChC,SAAW,CAACI,EAAGC,CAAC,IAAK,OAAO,QAAQJ,CAAK,EAChBI,GAAM,MAC7BF,EAAK,aAAaC,EAAG,OAAOC,CAAC,CAAC,EAEhC,OAAIH,IAAS,SAAWC,EAAK,YAAcD,GACpCC,CACX,EAEQG,EAAUzJ,EAAG,MAAO,gBAAiB,CAAE,GAAI,oBAAqB,EAEhE0J,EAAa,CACjB,SAAU,4BACV,SAAU,mBACV,OAAQ,kBACR,OAAQ,kBACZ,EAGQC,EAAqB,IAAM3J,EAAG,OAAQ,YAAa,CAAA,EAAI,GAAG,EAE1D4J,EAAc,CAACC,EAAMC,EAAWC,EAAUC,IAAe,CAC7D,MAAMC,EAAMjK,EAAG,MAAO,WAAW,EAC3BkK,EAAQlK,EAAG,QAAS,aAAa,EACvCkK,EAAM,OAAO,SAAS,eAAeJ,CAAS,CAAC,EAC3CC,GAAUG,EAAM,OAAOP,EAAkB,CAAE,EAC/C,MAAMQ,EAAQnK,EAAG,QAAS,cAAegK,CAAU,EACnD,OAAID,IAAUI,EAAM,SAAW,IAC/BD,EAAM,OAAOC,CAAK,EAClBF,EAAI,OAAOC,CAAK,EAChBL,EAAK,OAAOI,CAAG,EACRE,CACX,EAEQC,EAAe,CAACP,EAAMC,EAAWC,EAAUrK,EAAM2K,IAAY,CACjE,MAAMJ,EAAMjK,EAAG,MAAO,WAAW,EAC3BkK,EAAQlK,EAAG,QAAS,aAAa,EACvCkK,EAAM,OAAO,SAAS,eAAeJ,CAAS,CAAC,EAE/C,MAAMQ,EAAStK,EAAG,SAAU,cAAe,CAAE,KAAAN,CAAI,CAAE,EACnD,OAAA2K,EAAQ,QAASE,GAAQ,CACvB,MAAMC,EAAI,SAAS,cAAc,QAAQ,EACrC,OAAOD,GAAQ,UACbA,EAAI,QAAU,SAAWC,EAAE,MAAQ,OAAOD,EAAI,KAAK,GACvDC,EAAE,YACAD,EAAI,OAAS,OAAY,OAAOA,EAAI,IAAI,EAAI,OAAOA,EAAI,OAAS,EAAE,GAEpEC,EAAE,YAAc,OAAOD,CAAG,EAE5BD,EAAO,OAAOE,CAAC,CACrB,CAAK,EACDN,EAAM,OAAOI,CAAM,EACnBL,EAAI,OAAOC,CAAK,EAChBL,EAAK,OAAOI,CAAG,EACRK,CACX,EAEQG,EAAiB,CAACZ,EAAMC,EAAWC,EAAUX,IAAU,CAC3D,MAAMa,EAAMjK,EAAG,MAAO,WAAW,EAC3BkK,EAAQlK,EAAG,QAAS,aAAa,EACvCkK,EAAM,OAAO,SAAS,eAAeJ,CAAS,CAAC,EAC3CC,GAAUG,EAAM,OAAOP,EAAkB,CAAE,EAC/C,MAAMe,EAAK1K,EAAG,WAAY,iBAAkBoJ,CAAK,EACjD,OAAIW,IAAUW,EAAG,SAAW,IAC5BR,EAAM,OAAOQ,CAAE,EACfT,EAAI,OAAOC,CAAK,EAChBL,EAAK,OAAOI,CAAG,EACRS,CACX,EAEQC,EAAcd,GAAS,CAC3B,MAAMe,EAAQ5K,EAAG,MAAO,aAAa,EAC/BkK,EAAQ,SAAS,cAAc,OAAO,EACtCW,EAAW,SAAS,cAAc,OAAO,EAC/CA,EAAS,KAAO,WAChBA,EAAS,KAAO,UAChBA,EAAS,SAAW,GAEpB,MAAMC,EAAO,SAAS,cAAc,MAAM,EAGpCC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO,WACZA,EAAK,YAAc,gCACnBA,EAAK,OAAS,SACdA,EAAK,IAAM,sBACXA,EAAK,UAAY,iBAEjBD,EAAK,YAAc,gBACnBA,EAAK,YAAYC,CAAI,EAErBb,EAAM,OAAOW,EAAUC,CAAI,EAC3BF,EAAM,OAAOV,CAAK,EAClBL,EAAK,OAAOe,CAAK,CACrB,EAEQI,EAAcnB,GAAS,CAC3B,MAAMoB,EAAUjL,EAAG,MAAO,eAAe,EACnC8H,EAAM9H,EACV,SACA,yBACA,CAAE,KAAM,QAAQ,EAChB,WACN,EACIiL,EAAQ,OAAOnD,CAAG,EAClB+B,EAAK,OAAOoB,CAAO,CACvB,EAEQC,EAAY,CAACrB,EAAMsB,IAAS,CAChC,MAAMC,EAAQpL,EAAG,QAAS,KAAM,CAC9B,KAAM,SACN,KAAM,OACN,MAAOmL,CACb,CAAK,EACKE,EAAQrL,EAAG,QAAS,KAAM,CAC9B,KAAM,SACN,KAAM,OACN,MAAO,EACb,CAAK,EACKsL,EAAWtL,EAAG,QAAS,KAAM,CACjC,KAAM,SACN,KAAM,WACN,MAAO0J,EAAWyB,CAAI,GAAK,UACjC,CAAK,EACKI,EAAWvL,EAAG,QAAS,KAAM,CACjC,KAAM,OACN,KAAM,UACN,SAAU,KACV,aAAc,MACd,MAAO,cACb,CAAK,EACD6J,EAAK,OAAOuB,EAAOC,EAAOC,EAAUC,CAAQ,CAChD,EAEQC,EAAa,CAACL,EAAMM,EAAWC,IAAgB,CACnD,MAAMvE,EAAQnH,EAAG,MAAO,cAAe,CACrC,aAAcmL,EACd,cAAe,OACf,KAAM,SACN,aAAc,MACpB,CAAK,EACKQ,EAAU3L,EAAG,MAAO,sBAAsB,EAC1C4L,EAAW5L,EACf,SACA,qBACA,CAAE,aAAc,SAAS,EACzB,GACN,EACU6L,EAAQ7L,EAAG,KAAM,qBAAsB,CAAA,EAAIyL,CAAS,EAEpD5B,EAAO7J,EAAG,OAAQ,cAAe,CACrC,OAAQ,kCACR,OAAQ,MACd,CAAK,EAEDkL,EAAUrB,EAAMsB,CAAI,EACpBO,EAAY7B,CAAI,EAChBc,EAAWd,CAAI,EACfmB,EAAWnB,CAAI,EAEf8B,EAAQ,OAAOC,EAAUC,EAAOhC,CAAI,EACpC1C,EAAM,OAAOwE,CAAO,EACpBlC,EAAQ,OAAOtC,CAAK,CACxB,EAGEqE,EAAW,WAAY,kBAAoB3B,GAAS,CAClDD,EAAYC,EAAM,MAAO,GAAM,CAC7B,KAAM,OACN,KAAM,OACN,YAAa,UACnB,CAAK,EACDD,EAAYC,EAAM,UAAW,GAAM,CACjC,KAAM,MACN,KAAM,QACN,YAAa,oBACnB,CAAK,EACDO,EAAaP,EAAM,gBAAiB,GAAO,iBAAkB,CAC3D,CAAE,MAAO,GAAI,KAAM,UAAU,EAC7B,CAAE,MAAO,eAAe,EACxB,CAAE,MAAO,eAAe,EACxB,CAAE,MAAO,eAAe,EACxB,CAAE,MAAO,eAAe,CAC9B,CAAK,EACDY,EAAeZ,EAAM,cAAe,GAAO,CACzC,KAAM,UACN,KAAM,IACN,YAAa,gBACnB,CAAK,CACL,CAAG,EAGD2B,EAAW,WAAY,gBAAkB3B,GAAS,CAChDD,EAAYC,EAAM,MAAO,GAAM,CAC7B,KAAM,OACN,KAAM,OACN,YAAa,UACnB,CAAK,EAEDY,EAAeZ,EAAM,YAAa,GAAM,CACtC,KAAM,UACN,KAAM,IACN,YAAa,YACnB,CAAK,CACL,CAAG,EAGD2B,EAAW,SAAU,mBAAqB3B,GAAS,CACjDD,EAAYC,EAAM,MAAO,GAAM,CAC7B,KAAM,OACN,KAAM,OACN,YAAa,UACnB,CAAK,EACDD,EAAYC,EAAM,QAAS,GAAM,CAC/B,KAAM,QACN,KAAM,QACN,YAAa,kBACnB,CAAK,EACDD,EAAYC,EAAM,UAAW,GAAO,CAClC,KAAM,MACN,KAAM,QACN,YAAa,oBACnB,CAAK,EACDD,EAAYC,EAAM,wBAAyB,GAAO,CAChD,KAAM,OACN,KAAM,WACN,YAAa,sBACnB,CAAK,EACDY,EAAeZ,EAAM,0BAA2B,GAAO,CACrD,KAAM,UACN,KAAM,IACN,YAAa,mCACnB,CAAK,CACL,CAAG,EAGD2B,EAAW,SAAU,iBAAmB3B,GAAS,CAC/CD,EAAYC,EAAM,MAAO,GAAM,CAC7B,KAAM,OACN,KAAM,OACN,YAAa,UACnB,CAAK,EACDO,EAAaP,EAAM,SAAU,GAAO,SAAU,CAC5C,CAAE,MAAO,GAAI,KAAM,GAAG,EACtB,CAAE,MAAO,GAAG,EACZ,CAAE,MAAO,GAAG,EACZ,CAAE,MAAO,GAAG,EACZ,CAAE,MAAO,GAAG,EACZ,CAAE,MAAO,GAAG,CAClB,CAAK,EACDY,EAAeZ,EAAM,QAAS,GAAM,CAClC,KAAM,UACN,KAAM,IACN,YAAa,WACnB,CAAK,CACL,CAAG,EAED,SAAS,KAAK,YAAYJ,CAAO,CACnC,CAEA,SAASqC,IAAgB,CACvB,MAAMC,EACJ,OAAO,WAAa,SAAS,gBAAgB,YAC/C,SAAS,KAAK,QAAQ,aAAe,SAAS,KAAK,MAAM,UAAY,GACrE,SAAS,KAAK,QAAQ,iBACpB,SAAS,KAAK,MAAM,cAAgB,GACtC,SAAS,KAAK,MAAM,SAAW,SAC3BA,EAAiB,IACnB,SAAS,KAAK,MAAM,aAAeA,EAAiB,KAExD,CAEA,SAASC,IAAe,CACtB,SAAS,KAAK,MAAM,SAAW,SAAS,KAAK,QAAQ,cAAgB,GACrE,SAAS,KAAK,MAAM,aAClB,SAAS,KAAK,QAAQ,kBAAoB,GAC5C,OAAO,SAAS,KAAK,QAAQ,aAC7B,OAAO,SAAS,KAAK,QAAQ,gBAC/B,CAEA,SAASC,IAAqB,CACd,SAAS,iBACrB,4CACJ,EACQ,QAASC,GAASA,EAAI,MAAQ,OAAO,SAAS,IAAK,CAC3D,CAEA,SAASC,GAAUhB,EAAM,CACvB,MAAMiB,EAAU,SAAS,eAAe,mBAAmB,EAC3D,GAAI,CAACA,EAAS,OACdH,GAAkB,EAEHG,EAAQ,iBAAiB,cAAc,EAC/C,QAASC,GAAMA,EAAE,aAAa,cAAe,MAAM,CAAC,EAE3D,MAAMC,EAASF,EAAQ,cAAc,4BAA4BjB,CAAI,IAAI,EACpEmB,IAELF,EAAQ,UAAU,IAAI,SAAS,EAC/BE,EAAO,aAAa,cAAe,OAAO,EAC1CR,GAAa,EACf,CAEA,SAASS,IAAa,CACpB,MAAMH,EAAU,SAAS,eAAe,mBAAmB,EACtDA,IACLA,EAAQ,UAAU,OAAO,SAAS,EAClCA,EACG,iBAAiB,cAAc,EAC/B,QAASC,GAAMA,EAAE,aAAa,cAAe,MAAM,CAAC,EACvDL,GAAY,EACd,CAGA,OAAO,gBAAkBO,GAEzB,SAASC,IAAa,CACpB,MAAMJ,EAAU,SAAS,eAAe,mBAAmB,EACtDA,IAGLA,EAAQ,iBAAiB,QAAU3I,GAAM,CACnCA,EAAE,SAAW2I,GACfG,GAAU,CAEhB,CAAG,EAGDH,EAAQ,iBAAiB,QAAU3I,GAAM,CAC3BA,EAAE,OAAO,QAAQ,qBAAqB,GAEhD8I,GAAU,CAEhB,CAAG,EAGD,SAAS,iBAAiB,UAAY9I,GAAM,CACtCA,EAAE,MAAQ,UAAY2I,EAAQ,UAAU,SAAS,SAAS,GAC5DG,GAAU,CAEhB,CAAG,EAGD,SAAS,iBAAiB,QAAU9I,GAAM,CAExC,MAAMgJ,EAAehJ,EAAE,OAAO,QAAQ,mBAAmB,EACzD,GAAIgJ,EAAc,CAChBhJ,EAAE,eAAc,EAChB,MAAM0H,EAAOsB,EAAa,QAAQ,WAAa,WAC/CN,GAAUhB,CAAI,EAGd,GAAI,CACF,MAAMiB,EAAU,SAAS,eAAe,mBAAmB,EACrDjF,EACJiF,GACAA,EAAQ,cAAc,4BAA4BjB,CAAI,IAAI,EACtDtB,EAAO1C,GAASA,EAAM,cAAc,MAAM,EAChD,GAAI0C,EAAM,CACR,MAAM6C,EAAMD,EAAa,QAAQ,QACjC,GAAIC,EAAK,CACP,MAAMhC,EAAKb,EAAK,cAAc,0BAA0B,EACpDa,IAAIA,EAAG,MAAQgC,EAC/B,CACU,MAAMC,EAAOF,EAAa,QAAQ,QAClC,GAAIE,EAAM,CACR,MAAMC,EAAU/C,EAAK,cAAc,wBAAwB,EACvD+C,IAASA,EAAQ,MAAQD,EACzC,CACA,CACA,MAAkB,CAAA,CACZ,MACN,CAEI,MAAME,EAAapJ,EAAE,OAAO,QAAQ,kBAAkB,EACtD,GAAIoJ,GAAcA,EAAW,QAAQ,OAAQ,CAC3CpJ,EAAE,eAAc,EAChB0I,GAAUU,EAAW,QAAQ,MAAM,EACnC,MACN,CAGI,GADmBpJ,EAAE,OAAO,QAAQ,uBAAuB,EAC3C,CACdA,EAAE,eAAc,EAChB0I,GAAU,UAAU,EACpB,MACN,CAGI,GADqB1I,EAAE,OAAO,QAAQ,yBAAyB,EAC7C,CAChBA,EAAE,eAAc,EAChB0I,GAAU,UAAU,EACpB,MACN,CACA,CAAG,EACH,CAEO,SAASW,IAAkB,CAC5B9D,KACJC,GAAY,EACZuD,GAAU,EACVxD,GAAS,GACT,QAAQ,IAAI,kCAAkC,EAChD,CC5ZA,eAAe+D,GAAcC,EAAWC,EAAe,OACrD,GAAI,CAEF,MAAMC,EAAMD,EAAc,WAAW,GAAG,EACpC,GAAGE,EAAQ,GAAGF,CAAa,GAC3B,GAAGE,EAAQ,IAAIF,CAAa,GAE1BG,EAAW,MAAM,MAAMF,CAAG,EAChC,GAAI,CAACE,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE1D,MAAMC,EAAO,MAAMD,EAAS,KAAI,EAC1BE,EAAU,SAAS,eAAeN,CAAS,EACjD,GAAIM,EAEF,GAAI,CACF,MAAMC,EAAO,OAAO,aAAe,OAAO,aAAaF,CAAI,EAAIA,EACzDG,EAAM,SAAS,cAAc,UAAU,EAC7CA,EAAI,UAAYD,EAChBD,EAAQ,gBAAe,EACvBA,EAAQ,OAAOE,EAAI,QAAQ,UAAU,EAAI,CAAC,EAC1C,GAAI,EACFC,EAAA,OAAO,sBAAP,MAAAA,EAAA,YAA6BH,EACvC,MAAoB,CAAA,CACpB,MAAkB,CACV,MAAMI,EAAc,SAAS,cAAc,UAAU,EACrDA,EAAY,UAAYL,EACxBC,EAAQ,gBAAe,EACvBA,EAAQ,OAAOI,EAAY,QAAQ,UAAU,EAAI,CAAC,CAC1D,MAEM,QAAQ,KAAK,gBAAgBV,CAAS,YAAY,CAExD,OAAWW,EAAO,CACd,QAAQ,MAAM,kCAAkCV,CAAa,IAAKU,CAAK,CAC3E,CACA,CCrCO,MAAMC,EAAW,CACtB,aAAc,CAEZ,KAAK,QAAU,SAAS,cAAc,sBAAsB,EAC5D,KAAK,OAAS,SAAS,cAAc,qBAAqB,EAC1D,KAAK,UAAY,SAAS,cAAc,yBAAyB,EACjE,KAAK,aAAe,SAAS,cAAc,4BAA4B,EACvE,KAAK,QAAU,SAAS,cAAc,uBAAuB,EAC7D,KAAK,SAAW,SAAS,cAAc,oBAAoB,EAC3D,KAAK,QAAU,SAAS,cAAc,mBAAmB,EACzD,KAAK,YAAc,SAAS,cAAc,2BAA2B,EACrE,KAAK,eAAiB,SAAS,cAAc,yBAAyB,EACtE,KAAK,gBAAkB,SAAS,iBAC9B,8BACN,EACI,KAAK,SAAW,SAAS,iBAAiB,yBAAyB,EAGnE,KAAK,OAAS,GACd,KAAK,cAAgB,GACrB,KAAK,iBAAmB,GAGxB,KAAK,WAAa,KAAK,WAAW,KAAK,IAAI,EAC3C,KAAK,UAAY,KAAK,UAAU,KAAK,IAAI,EACzC,KAAK,iBAAmB,KAAK,iBAAiB,KAAK,IAAI,EACvD,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAC7C,KAAK,YAAc,KAAK,YAAY,KAAK,IAAI,EAC7C,KAAK,mBAAqB,KAAK,mBAAmB,KAAK,IAAI,EAG3D,KAAK,mBAAkB,CAC3B,CAGE,oBAAqB,CAEnB,KAAK,QAAQ,iBAAiB,QAAS,KAAK,UAAU,EACtD,KAAK,SAAS,iBAAiB,QAAS,KAAK,SAAS,EAGtD,KAAK,YAAY,iBAAiB,QAAS,KAAK,gBAAgB,EAGhE,KAAK,gBAAgB,QAAS9F,GAAQ,CACpCA,EAAI,iBAAiB,QAAS,IAAM,CAClC,MAAM+F,EAAW/F,EAAI,QAAQ,SAC7B,KAAK,YAAY+F,CAAQ,CACjC,CAAO,CACP,CAAK,EAED,KAAK,QAAQ,iBAAiB,QAAS,KAAK,WAAW,EAGvD,SAAS,iBAAiB,QAAS,KAAK,kBAAkB,EAG1D,KAAK,QAAQ,iBAAiB,QAAUpK,GAAM,CACxCA,EAAE,OAAO,QAAQ,GAAG,GACtB,KAAK,UAAS,CAEtB,CAAK,EAGD,KAAK,sBAAqB,CAC9B,CAGE,uBAAwB,CAEM,KAAK,QAAQ,iBAAiB,WAAW,EAEjD,QAAS6J,GAAY,CAEvCA,EAAQ,iBAAiB,aAAc,IAAM,CAC3CA,EAAQ,MAAM,WAAa,gBAC3BA,EAAQ,MAAM,UAAY,kBAClC,CAAO,EAGDA,EAAQ,iBAAiB,aAAc,IAAM,CAC3CA,EAAQ,MAAM,UAAY,eAClC,CAAO,EAGDA,EAAQ,iBAAiB,YAAa,IAAM,CAC1CA,EAAQ,MAAM,UAAY,iBAClC,CAAO,EAGDA,EAAQ,iBAAiB,UAAW,IAAM,CACxCA,EAAQ,MAAM,UAAY,kBAClC,CAAO,CACP,CAAK,CACL,CAGE,YAAa,CACP,KAAK,OACP,KAAK,UAAS,EAEd,KAAK,SAAQ,CAEnB,CAGE,UAAW,CACT,KAAK,OAAS,GACd,KAAK,QAAQ,UAAU,IAAI,SAAS,EACpC,SAAS,KAAK,MAAM,SAAW,QACnC,CAGE,WAAY,CACV,KAAK,OAAS,GACd,KAAK,cAAgB,GACrB,KAAK,iBAAmB,GACxB,KAAK,QAAQ,UAAU,OAAO,SAAS,EACvC,KAAK,OAAO,UAAU,OAAO,cAAc,EAC3C,KAAK,YAAY,UAAU,OAAO,SAAS,EAC3C,KAAK,eAAe,UAAU,OAAO,SAAS,EAC9C,SAAS,KAAK,MAAM,SAAW,EACnC,CAGE,kBAAmB,CACjB,KAAK,iBAAmB,CAAC,KAAK,iBAC9B,KAAK,YAAY,UAAU,OAAO,SAAS,EAC3C,KAAK,eAAe,UAAU,OAAO,SAAS,CAClD,CAGE,YAAYO,EAAU,CACpB,KAAK,cAAgB,GACrB,KAAK,OAAO,UAAU,IAAI,cAAc,EAUxC,KAAK,SAAS,QAASC,GAAY,CAC7BA,EAAQ,QAAQ,WAAaD,EAC/BC,EAAQ,UAAU,IAAI,WAAW,EAEjCA,EAAQ,UAAU,OAAO,WAAW,CAE5C,CAAK,CACL,CAGE,aAAc,CACZ,KAAK,cAAgB,GACrB,KAAK,OAAO,UAAU,OAAO,cAAc,EAG3C,KAAK,SAAS,QAASA,GAAY,CACjCA,EAAQ,UAAU,OAAO,WAAW,CAC1C,CAAK,CACL,CAGE,mBAAmBhO,EAAO,CAEtB,KAAK,QACL,CAAC,KAAK,QAAQ,SAASA,EAAM,MAAM,GACnC,CAAC,KAAK,QAAQ,SAASA,EAAM,MAAM,GAEnC,KAAK,UAAS,CAEpB,CACA,CC7KA,MAAMiO,GAAY,CAChB,iBAAkB,CAAC,UAAW,SAAS,EACvC,WAAY,CACV,KAAM,GACN,SAAU,CAAC,cAAe,oBAAqB,cAAc,CACjE,CACA,EAEA,IAAIC,EAAQ,KAGZ,SAASC,IAAuB,CAC9B,MAAMzG,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,kBAEtB,MAAM0G,EAAU,SAAS,cAAc,GAAG,EACpCC,EAAgB,SAAS,cAAc,QAAQ,EACrDA,EAAc,YAAc,SAC5BD,EAAQ,YAAYC,CAAa,EACjCD,EAAQ,YAAY,SAAS,eAAe,yBAAyB,CAAC,EAEtE,MAAME,EAAQ,SAAS,cAAc,GAAG,EAClCC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,WAC1BD,EAAM,YAAYC,CAAW,EAE7B,MAAMC,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,KAAO,kBACjBA,EAAU,YAAc,sBACxBF,EAAM,YAAYE,CAAS,EAE3B,MAAMC,EAAQ,SAAS,cAAc,GAAG,EAClCC,EAAc,SAAS,cAAc,QAAQ,EACnD,OAAAA,EAAY,YAAc,gBAC1BD,EAAM,YAAYC,CAAW,EAC7BD,EAAM,YAAY,SAAS,eAAe,mBAAmB,CAAC,EAE9D/G,EAAU,YAAY0G,CAAO,EAC7B1G,EAAU,YAAY4G,CAAK,EAC3B5G,EAAU,YAAY+G,CAAK,EAEpB/G,CACT,CAGA,SAASiH,IAAwB,CAC/B,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,kBAExB,MAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAY,wBAEjB,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,eAExB,MAAMC,EAAU,SAAS,cAAc,GAAG,EAC1CA,EAAQ,YAAc,4BAEtB,MAAM9D,EAAO,SAAS,cAAc,GAAG,EACvC,OAAAA,EAAK,KACH,qIACFA,EAAK,OAAS,SACdA,EAAK,IAAM,sBACXA,EAAK,YAAc,+BAEnB6D,EAAY,YAAYC,CAAO,EAC/BD,EAAY,YAAY7D,CAAI,EAC5B2D,EAAY,YAAYC,CAAI,EAC5BD,EAAY,YAAYE,CAAW,EAE5BF,CACT,CAEO,SAASI,IAAU,CACxB,GAAK,SAAS,eAAe,KAAK,EAIlC,IAAI,OAAO,MAAU,IAAa,CAChCC,KACA,MACJ,CAEE,MAAM,MAAM,IAAM,CAChB,GAAI,CACFC,IACN,OAAarB,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDsB,IACN,CACA,CAAG,EACH,CAEA,SAASF,IAAoB,CAC3B,MAAMG,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,IAAM,yFACbA,EAAO,KAAO,kBAEdA,EAAO,OAAS,IAAM,CACpB,MAAM,MAAM,IAAM,CAChB,GAAI,CACFF,IACR,OAAerB,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDsB,IACR,CACA,CAAK,CACL,EAEEC,EAAO,QAAU,IAAM,CACrB,QAAQ,MAAM,iCAAiC,EAC/CD,IACJ,EAEE,SAAS,KAAK,YAAYC,CAAM,CAClC,CAEA,SAASF,IAAY,CAOnB,GANIhB,IACFA,EAAM,QAAO,EACbA,EAAQ,MAIN,CADiB,SAAS,eAAe,KAAK,EAC/B,OAEnBA,EAAQ,IAAI,MAAM,IAChB,MACA,CACE,OAAQD,GAAU,iBAClB,KAAMA,GAAU,WAAW,KAC3B,SAAUA,GAAU,WAAW,QACrC,EACI,CACE,sBAAuB,eAC7B,CACA,EAGE,MAAMoB,EAAiBlB,KAEjBmB,EAAc,IAAI,MAAM,UAC5BrB,GAAU,iBACV,CACE,qBAAsB,yBACtB,mBAAoBoB,EAAe,UACnC,YAAa,wBACnB,EACI,CACE,OAAQ,yBACR,UAAW,UACX,mBAAoB,GACpB,sBAAuB,EAC7B,CACA,EAEEnB,EAAM,WAAW,IAAIoB,CAAW,EAChCC,GAAiBrB,CAAK,EACtBsB,GAAgBtB,CAAK,EAErB,WAAW,IAAM,CACfoB,EAAY,QAAQ,MACxB,EAAK,GAAI,CACT,CAEA,SAASC,GAAiBE,EAAK,CAC7B,MAAMC,EAAgB,IAAI,MAAM,QAAQ,cAAc,CACpD,QAAS,CACP,YAAa,GACb,SAAU,CAAE,IAAK,GAAI,MAAO,EAAE,CACpC,CACA,CAAG,EAEDD,EAAI,SAAS,IAAIC,CAAa,EAE9B,MAAMC,EAAc,IAAI,MAAM,QAAQ,OAAO,CAC3C,KAAM,CACJ,QAAS,oBACT,MAAO,6BACb,EACI,QAAS,CACP,SAAU,IACV,SAAU,CAAE,IAAK,GAAI,MAAO,EAAE,CACpC,CACA,CAAG,EAEDA,EAAY,OAAO,IAAI,QAAS,UAAY,CAC1C,MAAMvC,EAAM,kCAAkCa,GAAU,iBAAiB,KACvE,GACN,CAAK,GACD,OAAO,KAAKb,EAAK,QAAQ,CAC7B,CAAG,EAEDqC,EAAI,SAAS,IAAIE,CAAW,CAC9B,CAEA,SAASH,GAAgBC,EAAK,CAC5B,SAASG,GAAc,CACjB,OAAO,YAAc,IACvBH,EAAI,UAAU,QAAQ,YAAY,EAElCA,EAAI,UAAU,OAAO,YAAY,CAEvC,CAEEG,IACA,OAAO,iBAAiB,SAAUA,CAAW,CAC/C,CAEA,SAAST,IAAe,CACtB,MAAMU,EAAe,SAAS,eAAe,KAAK,EAClD,GAAIA,EAAc,CAChB,MAAMC,EAAenB,KACrBkB,EAAa,gBAAe,EAC5BA,EAAa,YAAYC,CAAY,CACzC,CACA,CAEO,SAASC,IAAa,CACvB7B,IACFA,EAAM,QAAO,EACbA,EAAQ,KAEZ,CChOO,MAAM8B,EAAM,CACjB,aAAc,CACZ,KAAK,KAAI,CACb,CAEE,MAAO,CACL,QAAQ,IAAI,oBAAoB,EAClB,SAAS,iBACrB,0CACN,EAEU,QAASjG,GAAS,CACtBA,EAAK,iBAAiB,SAAUkG,CAAY,EAC5ClG,EAAK,QAAQ,gBAAkB,MACrC,CAAK,EAGD,eAAekG,EAAatM,EAAG,SAC7BA,EAAE,eAAc,EAEhB,MAAMoG,EAAOpG,EAAE,OACTuM,EAAenG,EAAK,cAAc,iBAAiB,EACnDoG,EAAW,IAAI,SAASpG,CAAI,EAIlC,GAHa,OAAO,YAAYoG,EAAS,QAAO,CAAE,EAG9C,CAACC,EAAarG,CAAI,EACpB,OAIF,MAAMsG,EAAYtG,EAAK,cAAc,oBAAoB,EACnDuG,EAAWD,EAAYA,EAAU,MAAQ,GAC/C,GAAIC,IAAa,YAAcA,IAAa,SAAU,CACpD,GAAI,CACF,MAAMC,EAAU,cACVxB,EAAUyB,EACdF,EACA,OAAO,YAAY,IAAI,SAASvG,CAAI,EAAE,QAAO,CAAE,CAC3D,EACgBqD,EAAM,iBAAiBmD,CAAO,SAAS,mBAC3CxB,CACZ,CAAW,GACD,OAAO,KAAK3B,EAAK,SAAU,qBAAqB,EAChDqD,EACE1G,EACA,6CACA,SACZ,EACUA,EAAK,MAAK,EACV,GAAI,EACF4D,EAAA,OAAO,kBAAP,MAAAA,EAAA,YACZ,MAAsB,CAAA,CACtB,OAAiBhK,EAAG,CACV8M,EAAY1G,EAAM,+BAAgC,OAAO,EACzD,QAAQ,MAAM,uBAAwBpG,CAAC,CACjD,CACQ,MACR,CAEM,GAAI,CAEFuM,EAAa,UAAU,IAAI,iBAAiB,EAC5CA,EAAa,SAAW,GAGxB,MAAM5C,EAAW,MAAMoD,EAAa3G,CAAI,EAGxC0G,EAAY1G,EAAM,gCAAiC,SAAS,EAC5DA,EAAK,MAAK,EACV,GAAI,EACF4G,EAAA,OAAO,kBAAP,MAAAA,EAAA,YACV,MAAoB,CAAA,CACpB,OAAe9C,EAAO,CAEd4C,EAAY1G,EAAM,sCAAuC,OAAO,EAChE,QAAQ,MAAM,yBAA0B8D,CAAK,CACrD,QAAO,CAECqC,EAAa,UAAU,OAAO,iBAAiB,EAC/CA,EAAa,SAAW,EAChC,CACA,CAGI,SAASE,EAAarG,EAAM,CAC1B,MAAM6G,EAAS7G,EAAK,iBAAiB,iBAAiB,EACtD,IAAI8G,EAAU,GAEd,OAAAD,EAAO,QAASvG,GAAU,CAExByG,EAAWzG,CAAK,EAGZA,EAAM,UAAY,CAACA,EAAM,MAAM,KAAI,IACrC0G,EAAU1G,EAAO,qCAAqC,EACtDwG,EAAU,IAIRxG,EAAM,OAAS,SAAWA,EAAM,QACf,6BACH,KAAKA,EAAM,KAAK,IAC9B0G,EAAU1G,EAAO,0BAA0B,EAC3CwG,EAAU,KAKVxG,EAAM,OAAS,OAASA,EAAM,QACb,uBACH,KAAKA,EAAM,KAAK,IAC9B0G,EAAU1G,EAAO,mCAAmC,EACpDwG,EAAU,IAGtB,CAAO,EAEMA,CACb,CAGI,SAASE,EAAU1G,EAAO0E,EAAS,CACjC,MAAMiC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,cACzBA,EAAa,YAAcjC,EAE3B1E,EAAM,UAAU,IAAI,cAAc,EAClCA,EAAM,WAAW,YAAY2G,CAAY,CAC/C,CAGI,SAASF,EAAWzG,EAAO,CACzB,MAAM2G,EAAe3G,EAAM,WAAW,cAAc,cAAc,EAC9D2G,GACFA,EAAa,OAAM,EAErB3G,EAAM,UAAU,OAAO,cAAc,CAC3C,CAGI,SAASoG,EAAY1G,EAAMgF,EAAS1D,EAAM,CACxC,MAAM4F,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,gCAAgC5F,CAAI,GAC/D4F,EAAe,YAAclC,EAG7B,MAAMmC,EAAanH,EAAK,cAAc,gBAAgB,EAClDmH,GACFA,EAAW,OAAM,EAGnBnH,EAAK,YAAYkH,CAAc,EAG/B,WAAW,IAAM,CACfA,EAAe,OAAM,CAC7B,EAAS,GAAI,CACb,CAGI,SAAST,EAAqBnF,EAAM8F,EAAM,CACxC,MAAMC,EAAQ,CAAA,EACd,OAAI/F,IAAS,WACX+F,EAAM,KAAK,mCAAmC,EACrC/F,IAAS,UAClB+F,EAAM,KAAK,oCAAoC,EAE7CD,EAAK,MAAMC,EAAM,KAAK,QAAQD,EAAK,IAAI,EAAE,EACzCA,EAAK,OAAOC,EAAM,KAAK,YAAYD,EAAK,KAAK,EAAE,EAC/CA,EAAK,OAAOC,EAAM,KAAK,UAAUD,EAAK,KAAK,EAAE,EAC7CA,EAAK,gBACPC,EAAM,KAAK,kBAAkBD,EAAK,cAAc,EAAE,EAChDA,EAAK,QAAQC,EAAM,KAAK,WAAWD,EAAK,MAAM,EAAE,EAChDA,EAAK,SAASC,EAAM,KAAK,cAAcD,EAAK,OAAO,EAAE,EACrDA,EAAK,MAAMC,EAAM,KAAK,aAAaD,EAAK,IAAI,EAAE,EAC3CC,EAAM,KAAK;AAAA,CAAI,CAC5B,CAGI,eAAeV,EAAa3G,EAAM,CAChC,MAAMvK,EAASuK,EAAK,aAAa,QAAQ,GAAK,iBACxCsH,GAAUtH,EAAK,aAAa,QAAQ,GAAK,QAAQ,YAAW,EAC5DoG,EAAW,IAAI,SAASpG,CAAI,EAElC,GAAIvK,EAAO,SAAS,cAAc,EAAG,CACnC,MAAM8N,EAAW,MAAM,MAAM9N,EAAQ,CACnC,OAAA6R,EACA,KAAMlB,EACN,QAAS,CAAE,OAAQ,kBAAkB,CAC/C,CAAS,EAED,GAAI,CAAC7C,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,GAAI,CACF,OAAO,MAAMA,EAAS,KAAI,CACpC,MAAoB,CACV,MAAO,CAAA,CACjB,CACA,CAEM,MAAMgE,EAAO,OAAO,YAAYnB,EAAS,QAAO,CAAE,EAC5C7C,EAAW,MAAM,MAAM9N,EAAQ,CACnC,OAAA6R,EACA,QAAS,CACP,eAAgB,kBAC1B,EACQ,KAAM,KAAK,UAAUC,CAAI,CACjC,CAAO,EAED,GAAI,CAAChE,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,OAAO,MAAMA,EAAS,KAAI,CAChC,CACA,CACA,CAGO,SAASiE,IAAY,CAC1B,eAAQ,IAAI,2BAA2B,EAChC,IAAIvB,EACb,CCpNA,OAAO,eAAiB9I,GACxB,OAAO,iBAAmBW,GAG1B,OAAO,QAAUmH,GACjB,OAAO,WAAae,GAIpB,OAAO,UAAYwB,GAInB,OAAO,aAAe,OAAO,eAAkBhE,GAASA,GAOxD,SAASiE,IAAsB,CAC7B,MAAMC,EAAc,OAAO,SAAS,SAC9BC,EAAU,OAAO,SAAS,OAG1BrE,EACJ,OAAO,WACN,OAAO,SAAS,SAAS,SAAS,WAAW,EAAI,YAAc,IAG5DsE,EAAc,CAClB,CACE,QAAS,WACT,SAAU,EACV,KAAM,UACN,KAAM,GAAGD,CAAO,GAAGrE,CAAQ,GACjC,CACA,EAEE,IAAIuE,EAAW,EAGf,GAAIH,IAAgB,GAAGpE,CAAQ,KAAOoE,IAAgB,IACpD,OAAOI,GAAuBF,CAAW,EAI3C,MAAMG,EAAgB,CACpB,SAAU,QACV,QAAS,eACT,WAAY,SACZ,SAAU,OACV,WAAY,UACZ,aAAc,WACd,YAAa,WACb,WAAY,6BAChB,EAGQC,EAAoB,CACxB,gBAAiB,eACjB,sBAAuB,WACvB,kBAAmB,kBACnB,kBAAmB,oBACnB,wBAAyB,gBACzB,yBAA0B,wBAC1B,mBAAoB,SACpB,gBAAiB,YACrB,EAGE,SAAW,CAACC,EAAMpS,CAAI,IAAK,OAAO,QAAQkS,CAAa,EACrD,GAAIL,EAAY,SAASO,CAAI,EAC3B,OAAAL,EAAY,KAAK,CACf,QAAS,WACT,SAAUC,EACV,KAAMhS,EACN,KAAM,GAAG8R,CAAO,YAAYM,CAAI,EACxC,CAAO,EACMH,GAAuBF,CAAW,EAK7C,SAAW,CAACM,EAAcC,CAAY,IAAK,OAAO,QAChDH,CACJ,EACI,GAAIN,EAAY,SAASQ,CAAY,EAAG,CAEtCN,EAAY,KAAK,CACf,QAAS,WACT,SAAUC,IACV,KAAMM,EACN,KAAM,GAAGR,CAAO,YAAYO,CAAY,EAChD,CAAO,EAGD,MAAME,EAAeC,GAAgBH,CAAY,EACjD,SAAW,CAACI,EAAaC,CAAW,IAAK,OAAO,QAAQH,CAAY,EAClE,GAAIV,EAAY,SAASY,CAAW,EAAG,CACrCV,EAAY,KAAK,CACf,QAAS,WACT,SAAUC,EACV,KAAMU,EACN,KAAM,GAAGZ,CAAO,YAAYW,CAAW,EACnD,CAAW,EACD,KACV,CAGM,OAAOR,GAAuBF,CAAW,CAC/C,CAGE,OAAO,IACT,CAKA,SAASS,GAAgBH,EAAc,CAqCrC,MApCiB,CACf,gBAAiB,CACf,qBAAsB,iBACtB,oBAAqB,SACrB,qBAAsB,aAC5B,EACI,sBAAuB,CACrB,4BAA6B,oBAC7B,+BAAgC,UACtC,EACI,kBAAmB,CACjB,+BAAgC,qBAChC,6BAA8B,oBACpC,EACI,kBAAmB,CACjB,2BAA4B,UAC5B,2BAA4B,UAC5B,6BAA8B,oBACpC,EACI,wBAAyB,CACvB,kCAAmC,eACnC,mCAAoC,WACpC,uCAAwC,mBAC9C,EACI,yBAA0B,CACxB,kCAAmC,UACnC,kCAAmC,cACnC,iCAAkC,SACxC,EACI,gBAAiB,CACf,wBAAyB,kBACzB,0BAA2B,mBAC3B,yBAA0B,iBAChC,CACA,EAEkBA,CAAY,GAAK,CAAA,CACnC,CAKA,SAASJ,GAAuBF,EAAa,CAE3C,MAAMY,EAAY,SAAS,cACzB,sDACJ,EACMA,GACFA,EAAU,OAAM,EAGlB,MAAMC,EAAiB,CACrB,WAAY,qBACZ,QAAS,iBACT,gBAAiBb,CACrB,EAEQvC,EAAS,SAAS,cAAc,QAAQ,EAC9C,OAAAA,EAAO,KAAO,sBACdA,EAAO,aAAa,mBAAoB,MAAM,EAC9CA,EAAO,YAAc,KAAK,UAAUoD,EAAgB,KAAM,CAAC,EAEpDpD,CACT,CAKA,SAASqD,IAA0B,CACjC,MAAMC,EAAmB,SAAS,cAChC,sDACJ,EACE,GAAI,CAACA,EAAkB,OAGvB,MAAM1J,EADO,KAAK,MAAM0J,EAAiB,WAAW,EACjC,gBAEbC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,aAAa,aAAc,gBAAgB,EACzDA,EAAc,UAAY,cAG1B,MAAMC,EAAsB,SAAS,cAAc,KAAK,EACxDA,EAAoB,UAAY,YAEhC,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtCA,EAAG,UAAY,oBAEf7J,EAAM,QAAQ,CAACb,EAAMY,IAAU,CAC7B,MAAM+J,EAAK,SAAS,cAAc,IAAI,EAGtC,GAFAA,EAAG,UAAY,oBAEX/J,IAAUC,EAAM,OAAS,EAAG,CAE9B,MAAM+J,EAAc,SAAS,cAAc,MAAM,EACjDA,EAAY,UAAY,uBACxBA,EAAY,aAAa,eAAgB,MAAM,EAC/CA,EAAY,YAAc5K,EAAK,KAC/B2K,EAAG,YAAYC,CAAW,CAChC,KAAW,CAEL,MAAM9H,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO9C,EAAK,KACjB8C,EAAK,UAAY,oBACjBA,EAAK,YAAc9C,EAAK,KACxB2K,EAAG,YAAY7H,CAAI,CACzB,CAEI4H,EAAG,YAAYC,CAAE,CACrB,CAAG,EAEDF,EAAoB,YAAYC,CAAE,EAClCF,EAAc,YAAYC,CAAmB,EAG7C,MAAMI,EAAS,SAAS,cAAc,QAAQ,EACxCC,EAAO,SAAS,cAAc,MAAM,EAEtCD,GAAUC,GACZA,EAAK,aAAaN,EAAeM,EAAK,UAAU,CAEpD,CAKA,SAASC,IAAkB,CACzB,MAAMR,EAAmBlB,GAAmB,EACxCkB,IACF,SAAS,KAAK,YAAYA,CAAgB,EAC1C,QAAQ,IAAI,4BAA4B,EAGxCD,GAAuB,EAE3B,CAGA,OAAO,gBAAkBS,GACzB,OAAO,oBAAsB1B,GAG7B,OAAO,SAAW,OAAO,SAAS,SAAS,SAAS,WAAW,EAC3D,YACA,GAKJ,SAAS2B,IAA2B,CAClC,GAAI,SAAS,eAAe,oBAAoB,EAAG,OACnD,MAAM7S,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,GAAK,qBACXA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA0FpB,SAAS,KAAK,YAAYA,CAAK,CACjC,CAEA,SAAS8S,IAAoB,CAC3B,GAAI,SAAS,eAAe,cAAc,EAAG,OAE7C,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,GAAK,eACZA,EAAO,UAAY,gBACnBA,EAAO,aAAa,OAAQ,QAAQ,EACpCA,EAAO,aAAa,aAAc,sCAAsC,EAExE,MAAM9J,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAY,sBAEjB,MAAM+J,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,YAAc,0DAEpB,MAAMrI,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAY,sBACjBA,EAAK,KAAO,WACZA,EAAK,YAAc,0CACnBA,EAAK,aAAa,MAAO,UAAU,EACnCA,EAAK,aAAa,SAAU,OAAO,EAEnC,MAAMsI,EAAQ,SAAS,cAAc,MAAM,EAC3CA,EAAM,YAAc,IAEpBhK,EAAK,OAAO+J,EAAOrI,EAAMsI,CAAK,EAE9B,MAAMpI,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,yBAEpB,MAAMqI,EAAY,SAAS,cAAc,QAAQ,EACjDA,EAAU,UAAY,4CACtBA,EAAU,KAAO,SACjBA,EAAU,YAAc,UACxBA,EAAU,iBAAiB,QAAS,IAAM,CACxC,GAAI,CACF,aAAa,QAAQ,gBAAiB,UAAU,EAChD,aAAa,QAAQ,oBAAqB,IAAI,KAAI,EAAG,YAAW,CAAE,CACxE,MAAgB,CAAA,CACZH,EAAO,OAAM,EACbI,GAAa,CACjB,CAAG,EAED,MAAMC,EAAY,SAAS,cAAc,QAAQ,EACjDA,EAAU,UAAY,8CACtBA,EAAU,KAAO,SACjBA,EAAU,YAAc,YACxBA,EAAU,iBAAiB,QAAS,IAAM,CACxC,GAAI,CACF,aAAa,QAAQ,gBAAiB,UAAU,CACtD,MAAgB,CAAA,CACZL,EAAO,OAAM,CACjB,CAAG,EAEDlI,EAAQ,OAAOqI,EAAWE,CAAS,EACnCL,EAAO,OAAO9J,EAAM4B,CAAO,EAC3B,SAAS,KAAK,YAAYkI,CAAM,CAClC,CAGA,SAASI,IAAgB,CACvB,QAAQ,IAAI,0DAA0D,CAaxE,CAGA,SAASE,IAAoB,CACb,SAAS,iBAAiB,6BAA6B,EAE/D,QAAS5J,GAAS,CAEtB,GAAI,CAACA,EAAK,cAAc,qCAAqC,EAAG,CAC9D,MAAM6J,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,eAEvB,MAAMC,EAAe,SAAS,cAAc,OAAO,EAC7CC,EAAkB,SAAS,cAAc,OAAO,EACtDA,EAAgB,KAAO,WACvBA,EAAgB,KAAO,wBACvBA,EAAgB,SAAW,GAE3B,MAAMC,EAAc,SAAS,cAAc,MAAM,EAE3CC,EAAY,SAAS,eACzB,oEACR,EACY/I,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO,WACZA,EAAK,OAAS,SACdA,EAAK,YAAc,+BACnBA,EAAK,MAAM,MAAQ,UACnB,MAAMgJ,EAAY,SAAS,eAAe,EAAE,EAE5CF,EAAY,YAAYC,CAAS,EACjCD,EAAY,YAAY9I,CAAI,EAC5B8I,EAAY,YAAYE,CAAS,EAEjCJ,EAAa,YAAYC,CAAe,EACxCD,EAAa,YAAYE,CAAW,EACpCH,EAAW,YAAYC,CAAY,EAGnC,MAAMK,EAAYnK,EAAK,cACrB,6CACR,EACUmK,EACFA,EAAU,WAAW,aAAaN,EAAYM,CAAS,EAEvDnK,EAAK,YAAY6J,CAAU,CAEnC,CACA,CAAG,CACH,CAGA,SAASO,IAAqB,CAC5B,SAAS,iBAAiB,SAAU,SAAU,EAAG,CAC/C,MAAMpK,EAAO,EAAE,OAGf,GAAIA,EAAK,aAAa,iBAAiB,EAAG,OAE1C,MAAM+J,EAAkB/J,EAAK,cAC3B,qCACN,EAEQ+J,GAAmB,CAACA,EAAgB,UACtC,EAAE,eAAc,EAChB,MACE,yEACR,EACMA,EAAgB,MAAK,EACrBA,EAAgB,eAAe,CAAE,SAAU,SAAU,MAAO,SAAU,EAE5E,CAAG,CACH,CAGA,SAASM,IAAyB,CAChC,MAAMC,EAAe,CACnB,YAAa,CAAC,CAAC,SAAS,cAAc,oBAAoB,EAC1D,iBAAkB,SAAS,iBACzB,qCACN,EAAM,OACF,aAAc,CAAC,CAAC,SAAS,eAAe,cAAc,EACtD,aAAc,CAAC,CAAC,SAAS,cACvB,0DACN,CACA,EAEE,eAAQ,IAAI,sCAAuCA,CAAY,EAE1DA,EAAa,aAChB,QAAQ,KAAK,qDAAqD,EAG/DA,EAAa,cAChB,QAAQ,KAAK,kDAAkD,EAG1DA,CACT,CAEA,SAASC,IAAmB,CAC1B,GAAI,CACF,GAAI,aAAa,QAAQ,eAAe,IAAM,WAAY,CACxDb,KACA,MACN,CACA,MAAc,CAAA,CAEZN,GAAwB,EACxBC,GAAiB,CACnB,CAKA,eAAemB,IAAuB,CACpC,GAAI,CACE,SAAS,eAAe,oBAAoB,GAC9C,MAAMtH,GACJ,qBACA,kCACR,EAEQ,SAAS,eAAe,oBAAoB,GAC9C,MAAMA,GACJ,qBACA,kCACR,CAEA,OAAWY,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CAC3D,CACA,CAGA,SAAS2G,IAAmB,CACN,OAAO,SAAS,SAEtB,SAAS,WAAW,GAAK,SAAS,eAAe,KAAK,GAGlE,QAAQ,IAAI,+CAA+C,EAE3D,WAAW,IAAM,CACfxF,GAAO,CACb,EAAO,GAAG,GAGNe,GAAU,CAEd,CAGA,SAAS,iBAAiB,mBAAoB,SAAY,CACxD,QAAQ,IACN,wBACA,OAAO,SAAS,SAAS,SAAS,WAAW,EACzC,eACA,OAAO,SAAS,WAAa,YAC7B,oBACA,aACJ,MACJ,EAGE,GAAI,CACFmD,GAAe,CACnB,OAAW,EAAG,CACV,QAAQ,KAAK,oCAAqC,CAAC,CACvD,CAIE,MAAM,QAAQ,IAAI,CAChBqB,GAAoB,EACpB,IAAI,QAASE,GAAY,CACvB,IAAI3G,GACJ2G,EAAO,CACb,CAAK,CACL,CAAG,EAGD,GAAI,CACFzH,GAAe,CACnB,OAAW,EAAG,CACV,QAAQ,KAAK,yBAA0B,CAAC,CAC5C,CAGE,GAAI,CACFsH,GAAgB,CACpB,OAAW,EAAG,CACV,QAAQ,KAAK,0BAA2B,CAAC,CAC7C,CAEE,GAAI,CACFX,GAAiB,EACjBQ,GAAkB,CACtB,OAAW,EAAG,CACV,QAAQ,KAAK,qCAAsC,CAAC,CACxD,CAEE,GAAI,CACFC,GAAsB,CAC1B,OAAW,EAAG,CACV,QAAQ,KAAK,kCAAmC,CAAC,CACrD,CAIEI,GAAgB,EAGhBE,GAAU,CACZ,CAAC,EAGD,OAAO,iBAAiB,WAAY,IAAM,CACxC,WAAW,IAAM,CACfF,GAAgB,CACpB,EAAK,EAAE,CACP,CAAC","x_google_ignoreList":[0]}