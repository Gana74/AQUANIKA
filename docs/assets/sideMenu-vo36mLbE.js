const M="modulepreload",C=function(e){return"/AQUANIKA/"+e},w={},y=function(n,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=C(c),c in w)return;w[c]=!0;const m=c.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${b}`))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":M,m||(u.as="script"),u.crossOrigin="",u.href=c,a&&u.setAttribute("nonce",a),document.head.appendChild(u),m)return new Promise((S,E)=>{u.addEventListener("load",S),u.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return s.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return n().catch(o)})},l=window.location.hostname.includes("github.io")||window.location.hostname==="localhost"?"/AQUANIKA":"",P=window.location.hostname.includes("github.io"),d={"/":"/pages/home.html","/about":"/pages/about.html","/team":"/pages/team.html","/reviews":"/pages/reviews.html","/vacancies":"/pages/vacancies.html","/gallery":"/pages/gallery.html","/price":"/pages/price.html","/contacts":"/pages/contacts.html","/privacy":"/pages/privacy.html","/services/spa":"/pages/spa-and-massage.html","/services/aquanika":"/pages/aquanika-massage.html","/services/massage":"/pages/massage.html","/services/wrapping":"/pages/wrapping.html","/services/epilation":"/pages/epilation.html","/services/epilation/laser":"/pages/laser-epilation.html","/services/epilation/sugaring":"/pages/sugaring.html","/services/brows":"/pages/brows-and-lashes.html","/services/brows/architecture":"/pages/brows-architecture.html","/services/brows/extensions":"/pages/brows-extensions.html","/services/nails":"/pages/manicure-pedicure.html","/services/nails/manicure":"/pages/manicure.html","/services/nails/pedicure":"/pages/pedicure.html","/services/nails/extensions":"/pages/nails-extensions.html","/services/cosmetology":"/pages/cosmetology.html","/services/cosmetology/face-care":"/pages/face-care.html","/services/cosmetology/injections":"/pages/injections.html","/services/cosmetology/tattoo-removal":"/pages/tattoo-removal.html","/services/hairdressing":"/pages/hairdressing.html","/services/hairdressing/haircuts":"/pages/haircuts.html","/services/hairdressing/coloring":"/pages/hair-coloring.html","/services/hairdressing/styling":"/pages/hair-styling.html","/services/makeup":"/pages/makeup.html","/services/men":"/pages/men-services.html","/services/men/haircut":"/pages/men-haircut.html","/services/men/epilation":"/pages/men-epilation.html","/services/men/manicure":"/pages/men-manicure.html"},L=["/about","/team","/reviews","/vacancies","/gallery"],T={"/":"Aquanika – салон красоты премиум-класса","/about":"О нас – Aquanika","/team":"Наша команда – Aquanika","/reviews":"Отзывы – Aquanika","/vacancies":"Вакансии – Aquanika","/gallery":"Галерея – Aquanika","/prices":"Цены – Aquanika","/contacts":"Контакты – Aquanika","/price":"Прайс-лист","/privacy":"Политика конфиденциальности","/services/spa":"SPA и массаж – Aquanika","/services/aquanika":"Подводно-вакуумный массаж 'Акваника' – Aquanika","/services/massage":"Массаж – Aquanika","/services/wrapping":"Обертывания – Aquanika","/services/epilation":"Эпиляция – Aquanika","/services/epilation/laser":"Лазерная эпиляция – Aquanika","/services/epilation/sugaring":"Шугаринг – Aquanika","/services/brows":"Брови и ресницы – Aquanika","/services/brows/architecture":"Брови — Архитектура – Aquanika","/services/brows/extensions":"Ресницы — Наращивание – Aquanika","/services/nails":"Ногтевой сервис – Aquanika","/services/nails/manicure":"Маникюр – Aquanika","/services/nails/pedicure":"Педикюр – Aquanika","/services/nails/extensions":"Наращивание ногтей – Aquanika","/services/cosmetology":"Косметология – Aquanika","/services/cosmetology/face-care":"Косметология — Уход за лицом – Aquanika","/services/cosmetology/injections":"Косметология — Инъекции – Aquanika","/services/cosmetology/tattoo-removal":"Косметология — Выведение татуажа – Aquanika","/services/hairdressing":"Парикмахерские услуги – Aquanika","/services/hairdressing/haircuts":"Стрижки – Aquanika","/services/hairdressing/coloring":"Окрашивание – Aquanika","/services/hairdressing/styling":"Укладки – Aquanika","/services/makeup":"Макияж – Aquanika","/services/men":"Услуги для мужчин – Aquanika","/services/men/haircut":"Для мужчин — Стрижка – Aquanika","/services/men/epilation":"Для мужчин — Эпиляция – Aquanika","/services/men/manicure":"Для мужчин — Маникюр – Aquanika"};function p(e,n={},t=[]){const i=document.createElement(e);return Object.entries(n).forEach(([s,o])=>{s==="className"?i.className=o:s==="textContent"?i.textContent=o:s==="innerHTML"?console.warn("Потенциально опасное использование innerHTML"):s.startsWith("on")?console.warn("Потенциально опасные обработчики событий запрещены"):i.setAttribute(s,o)}),t.forEach(s=>{typeof s=="string"?i.appendChild(document.createTextNode(s)):s instanceof Node&&i.appendChild(s)}),i}async function A(e){let n=e;e.startsWith("/")&&(n=`${l}${e}`);const t=await fetch(n);if(!t.ok)throw new Error(`HTTP ${t.status} – ${n}`);return t.text()}function k(e){var n;try{const i=new DOMParser().parseFromString(e,"text/html"),s=i.querySelector("main");return s?Array.from(s.childNodes):Array.from(((n=i.body)==null?void 0:n.childNodes)||[])}catch(t){return console.warn("Safe HTML parse failed, using fallback",t),[document.createTextNode("Контент временно недоступен")]}}function q(e=document){e.querySelectorAll('a[target="_blank"]').forEach(t=>{const i=(t.getAttribute("rel")||"").split(/\s+/).filter(Boolean);i.includes("noopener")||i.push("noopener"),i.includes("noreferrer")||i.push("noreferrer"),t.setAttribute("rel",i.join(" "))})}function x(){let e=window.location.pathname;return l&&e.startsWith(l)&&(e=e.slice(l.length)),e||"/"}function f(e,n){e.replaceChildren(),n.forEach(t=>{const i=t.cloneNode(!0);e.appendChild(i)})}async function _(e){const n=d[e]||d["/"],t=L.includes(e);document.title=T[e]||"Aquanika";try{const i=await A(n),s=k(i),o=document.querySelector("main");if(!o)return;t?await N(o,s):f(o,s),await O(),I(t)}catch(i){console.error("Ошибка загрузки страницы:",i),e!=="/"&&h("/")}}async function N(e,n){try{const t=await A("/components/partials/side-menu.html"),i=k(t),s=p("div",{className:"page-with-sidebar container"}),o=p("div",{className:"side-menu-container"});f(o,i),s.appendChild(o);const r=p("div",{className:"page-content"});f(r,n),s.appendChild(r),e.replaceChildren(),e.appendChild(s);try{const a=await y(()=>Promise.resolve().then(()=>H),void 0),c=a.initSideMenu||a.default&&a.default.initSideMenu;c&&c()}catch(a){console.warn("sideMenu.js not available:",a)}}catch(t){console.error("Ошибка загрузки side menu:",t),f(e,n)}}function I(e){const{hash:n}=window.location;if(n){const t=()=>{const i=n.slice(1),s=document.getElementById(i);return s?(s.scrollIntoView({behavior:"smooth",block:"start"}),!0):!1};t()||requestAnimationFrame(()=>{t()||setTimeout(t,50)})}else if(e){const t=document.querySelector(".page-content");t?setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50):window.scrollTo({top:0,behavior:"smooth"})}else window.scrollTo(0,0)}function h(e){const n=e.startsWith("/")?e:"/"+e,t=n.indexOf("#"),i=t>=0?n.slice(0,t):n,s=t>=0?n.slice(t):"",o=l+i+s;window.history.pushState({},"",o),g()}function R(e){const n=e.target.closest("a");if(!n)return;const t=new URL(n.href);if(t.origin!==window.location.origin||n.closest(".side-menu"))return;const i=window.location.pathname,s=t.pathname;if(n.hash&&s===i){e.preventDefault();const r=n.hash.slice(1),a=document.getElementById(r);a?a.scrollIntoView({behavior:"smooth",block:"start"}):window.location.hash=n.hash;return}e.preventDefault();const o=s.replace(l,"")||"/";h(o+(t.hash||""))}function j(){if(P){const t=sessionStorage.getItem("redirectPath");if(t&&(console.log("GitHub Pages редирект:",t),sessionStorage.removeItem("redirectPath"),d[t]))return h(t),!0}const e=window.location.pathname;let n=e;return l&&e.startsWith(l)&&(n=e.slice(l.length)),n!=="/"&&!n.endsWith(".html")&&d[n]?(console.log("Прямой переход по ссылке:",n),h(n),!0):!1}async function O(){typeof window.initCarousels=="function"&&window.initCarousels(),typeof window.initForms=="function"&&window.initForms(),typeof window.initVideoModal=="function"&&window.initVideoModal(),typeof window.initGalleryModal=="function"&&window.initGalleryModal();try{const e=document.querySelectorAll(".promo-carousel");e.length&&y(()=>import("./carousel-Csg7kf2D.js"),[]).then(n=>{const t=n.initCarousel||n.default&&n.default.initCarousel;t&&e.forEach(i=>{i.dataset.inited||(t(i),i.dataset.inited="true")})})}catch(e){console.warn("Carousel init failed",e)}try{q(document)}catch(e){console.warn("secureExternalLinks failed",e)}try{const e=!!document.getElementById("map");e&&typeof window.initMap=="function"?window.initMap():!e&&typeof window.destroyMap=="function"&&window.destroyMap()}catch(e){console.warn("Map init/destroy failed",e)}}function g(){_(x()),setTimeout(()=>{window.initBreadcrumbs&&typeof window.initBreadcrumbs=="function"&&window.initBreadcrumbs()},100)}function W(){j()||(document.addEventListener("click",R),window.addEventListener("popstate",g),g())}window.navigateTo=h;window.secureExternalLinks=q;function $(){const e=window.location.pathname.replace(l,"")||"/",n=document.querySelectorAll(".side-menu__link"),t=document.querySelector("main");n.forEach(i=>{i.getAttribute("href")===e&&i.classList.add("active"),i.removeEventListener("click",v),i.addEventListener("click",v)}),t&&(t.classList.add("with-side-menu"),B(t))}function B(e){if(document.querySelector(".side-menu")){let i=function(s){s.matches?e.classList.remove("with-side-menu"):e.classList.add("with-side-menu")};const t=window.matchMedia("(max-width: 992px)");t.addListener(i),i(t)}}function v(e){e.preventDefault();const n=this.getAttribute("href"),t=document.querySelector(".page-content");window.history.pushState({},"",n),document.querySelectorAll(".side-menu__link").forEach(i=>{i.classList.remove("active")}),this.classList.add("active"),d[n]?typeof window.navigateTo=="function"?window.navigateTo(n):window.location.href=`${l}${n}`:(console.error("Маршрут не найден:",n),t&&(t.innerHTML="<h1>Страница не найдена</h1>"))}const H=Object.freeze(Object.defineProperty({__proto__:null,initSideMenu:$},Symbol.toStringTag,{value:"Module"}));export{l as b,W as i};
//# sourceMappingURL=sideMenu-vo36mLbE.js.map
