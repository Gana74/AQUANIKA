class C{constructor(o){this.element=o,this.init()}init(){const o=this.element.querySelector(".promo-carousel__container"),h=Array.from(this.element.querySelectorAll(".promo-carousel__slide")),f=this.element.querySelector(".promo-carousel__controls");if(!o||!h.length)return;let n=h.length;const L=this.element.classList.contains("promo-carousel--compact"),g=()=>{if(!L)return 1;const t=window.innerWidth||1920;return t<=480?1:t<=768?2:t<=1200?3:4};let s=g(),m=100/s,l=s===1?1:Math.min(s,n),x=s===1?1:Math.min(s,n),r=n>1?l:0,a=!1,y;const v=[];if(f){f.replaceChildren();for(let t=0;t<n;t++){const e=document.createElement("button");e.className=`promo-carousel__dot ${t===0?"promo-carousel__dot--active":""}`,e.addEventListener("click",()=>this.goToSlide(t)),f.appendChild(e),v.push(e)}}const c=document.createElement("button");c.className="promo-carousel__arrow promo-carousel__arrow--prev",c.setAttribute("aria-label","Предыдущие фото"),c.textContent="❮",c.addEventListener("click",t=>{t.stopPropagation(),this.prev()});const u=document.createElement("button");u.className="promo-carousel__arrow promo-carousel__arrow--next",u.setAttribute("aria-label","Следующие фото"),u.textContent="❯",u.addEventListener("click",t=>{t.stopPropagation(),this.next()}),this.element.appendChild(c),this.element.appendChild(u);const p=()=>{if(!v.length)return;const t=n>1?(r-1+n)%n:0;v.forEach((e,d)=>{e.classList.toggle("promo-carousel__dot--active",d===t)})},i=(t=!0)=>{if(t){const e=s===1?`translateX(-${r*100}%)`:`translateX(-${r*m}%)`;o.style.transform=e}else{const e=o.style.transition;o.style.transition="none";const d=s===1?`translateX(-${r*100}%)`:`translateX(-${r*m}%)`;o.style.transform=d,o.offsetWidth,o.style.transition=e||""}};if(n>1){for(let t=0;t<l;t++){const e=n-1-t,d=h[e].cloneNode(!0);o.insertBefore(d,o.firstChild)}for(let t=0;t<x;t++){const e=h[t].cloneNode(!0);o.appendChild(e)}i(!1),o.addEventListener("transitionend",()=>{a=!1;const t=l,e=l+n;r<t?(r+=n,i(!1)):r>=e&&(r-=n,i(!1)),p()})}else i(!1);this.goToSlide=t=>{if(a||n<=1)return;const e=t+l;e!==r&&(a=!0,r=e,i(!0),p())},this.prev=()=>{if(a||n<=1)return;a=!0,r-=1,i(!0),p()},this.next=()=>{if(a||n<=1)return;a=!0,r+=1,i(!0),p()},this.startAutoplay=function(){n<=1||(y=setInterval(()=>this.next(),8e3))},this.stopAutoplay=function(){clearInterval(y)},this.element.addEventListener("mouseenter",()=>this.stopAutoplay()),this.element.addEventListener("mouseleave",()=>this.startAutoplay()),this.element.addEventListener("touchstart",()=>this.stopAutoplay()),this.element.addEventListener("touchend",()=>this.startAutoplay()),this.element.classList.contains("promo-carousel--compact")&&this.element.addEventListener("click",t=>{t.target.closest(".promo-carousel__arrow")||t.target.closest(".promo-carousel__controls")||(t.target.closest("picture")||t.target.closest("img"))&&(typeof window.navigateTo=="function"?window.navigateTo("/gallery"):window.location.href="/gallery")});const A=()=>{const t=g();t!==s&&(s=t,m=100/s,i(!1))};window.addEventListener("resize",A),this.startAutoplay();let w=0,E=0;this.element.addEventListener("touchstart",t=>{w=t.touches[0].clientX}),this.element.addEventListener("touchmove",t=>{E=t.touches[0].clientX}),this.element.addEventListener("touchend",()=>{const t=E-w,e=s===1?30:50;Math.abs(t)>e&&(t>0?this.prev():this.next())})}}function X(_){return new C(_)}export{C as Carousel,X as initCarousel};
//# sourceMappingURL=carousel-Csg7kf2D.js.map
