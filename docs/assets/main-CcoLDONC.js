import{b as we,i as He}from"./sideMenu-vo36mLbE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const r of u.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function a(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(c){if(c.ep)return;c.ep=!0;const u=a(c);fetch(c.href,u)}})();var Ue={exports:{}};(function(e){(function(t,a){var n=a(t,t.document,Date);t.lazySizes=n,e.exports&&(e.exports=n)})(typeof window<"u"?window:{},function(a,n,c){var u,r;if(function(){var p,m={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};r=a.lazySizesConfig||a.lazysizesConfig||{};for(p in m)p in r||(r[p]=m[p])}(),!n||!n.getElementsByClassName)return{init:function(){},cfg:r,noSupport:!0};var f=n.documentElement,C=a.HTMLPictureElement,l="addEventListener",s="getAttribute",o=a[l].bind(a),i=a.setTimeout,h=a.requestAnimationFrame||i,y=a.requestIdleCallback,g=/^picture$/i,E=["load","error","lazyincluded","_lazyloaded"],w={},I=Array.prototype.forEach,q=function(p,m){return w[m]||(w[m]=new RegExp("(\\s|^)"+m+"(\\s|$)")),w[m].test(p[s]("class")||"")&&w[m]},F=function(p,m){q(p,m)||p.setAttribute("class",(p[s]("class")||"").trim()+" "+m)},ie=function(p,m){var b;(b=q(p,m))&&p.setAttribute("class",(p[s]("class")||"").replace(b," "))},ce=function(p,m,b){var A=b?l:"removeEventListener";b&&ce(p,m),E.forEach(function(S){p[A](S,m)})},G=function(p,m,b,A,S){var _=n.createEvent("Event");return b||(b={}),b.instance=u,_.initEvent(m,!A,!S),_.detail=b,p.dispatchEvent(_),_},le=function(p,m){var b;!C&&(b=a.picturefill||r.pf)?(m&&m.src&&!p[s]("srcset")&&p.setAttribute("srcset",m.src),b({reevaluate:!0,elements:[p]})):m&&m.src&&(p.src=m.src)},J=function(p,m){return(getComputedStyle(p,null)||{})[m]},pe=function(p,m,b){for(b=b||p.offsetWidth;b<r.minSize&&m&&!p._lazysizesWidth;)b=m.offsetWidth,m=m.parentNode;return b},Z=function(){var p,m,b=[],A=[],S=b,_=function(){var x=S;for(S=b.length?A:b,p=!0,m=!1;x.length;)x.shift()();p=!1},z=function(x,L){p&&!L?x.apply(this,arguments):(S.push(x),m||(m=!0,(n.hidden?i:h)(_)))};return z._lsFlush=_,z}(),ne=function(p,m){return m?function(){Z(p)}:function(){var b=this,A=arguments;Z(function(){p.apply(b,A)})}},Ne=function(p){var m,b=0,A=r.throttleDelay,S=r.ricTimeout,_=function(){m=!1,b=c.now(),p()},z=y&&S>49?function(){y(_,{timeout:S}),S!==r.ricTimeout&&(S=r.ricTimeout)}:ne(function(){i(_)},!0);return function(x){var L;(x=x===!0)&&(S=33),!m&&(m=!0,L=A-(c.now()-b),L<0&&(L=0),x||L<9?z():i(z,L))}},fe=function(p){var m,b,A=99,S=function(){m=null,p()},_=function(){var z=c.now()-b;z<A?i(_,A-z):(y||S)(S)};return function(){b=c.now(),m||(m=i(_,A))}},he=function(){var p,m,b,A,S,_,z,x,L,O,R,V,Ie=/^img$/i,Oe=/^iframe$/i,Pe="onscroll"in a&&!/(gle|ing)bot/.test(navigator.userAgent),Te=0,X=0,$=0,Q=-1,ve=function(d){$--,(!d||$<0||!d.target)&&($=0)},ye=function(d){return V==null&&(V=J(n.body,"visibility")=="hidden"),V||!(J(d.parentNode,"visibility")=="hidden"&&J(d,"visibility")=="hidden")},Fe=function(d,v){var k,B=d,M=ye(d);for(x-=v,R+=v,L-=v,O+=v;M&&(B=B.offsetParent)&&B!=n.body&&B!=f;)M=(J(B,"opacity")||1)>0,M&&J(B,"overflow")!="visible"&&(k=B.getBoundingClientRect(),M=O>k.left&&L<k.right&&R>k.top-1&&x<k.bottom+1);return M},ge=function(){var d,v,k,B,M,N,W,D,U,H,K,Y,T=u.elements;if((A=r.loadMode)&&$<8&&(d=T.length)){for(v=0,Q++;v<d;v++)if(!(!T[v]||T[v]._lazyRace)){if(!Pe||u.prematureUnveil&&u.prematureUnveil(T[v])){ee(T[v]);continue}if((!(D=T[v][s]("data-expand"))||!(N=D*1))&&(N=X),H||(H=!r.expand||r.expand<1?f.clientHeight>500&&f.clientWidth>500?500:370:r.expand,u._defEx=H,K=H*r.expFactor,Y=r.hFac,V=null,X<K&&$<1&&Q>2&&A>2&&!n.hidden?(X=K,Q=0):A>1&&Q>1&&$<6?X=H:X=Te),U!==N&&(_=innerWidth+N*Y,z=innerHeight+N,W=N*-1,U=N),k=T[v].getBoundingClientRect(),(R=k.bottom)>=W&&(x=k.top)<=z&&(O=k.right)>=W*Y&&(L=k.left)<=_&&(R||O||L||x)&&(r.loadHidden||ye(T[v]))&&(m&&$<3&&!D&&(A<3||Q<4)||Fe(T[v],N))){if(ee(T[v]),M=!0,$>9)break}else!M&&m&&!B&&$<4&&Q<4&&A>2&&(p[0]||r.preloadAfterLoad)&&(p[0]||!D&&(R||O||L||x||T[v][s](r.sizesAttr)!="auto"))&&(B=p[0]||T[v])}B&&!M&&ee(B)}},P=Ne(ge),be=function(d){var v=d.target;if(v._lazyCache){delete v._lazyCache;return}ve(d),F(v,r.loadedClass),ie(v,r.loadingClass),ce(v,Ee),G(v,"lazyloaded")},$e=ne(be),Ee=function(d){$e({target:d.target})},Re=function(d,v){var k=d.getAttribute("data-load-mode")||r.iframeLoadMode;k==0?d.contentWindow.location.replace(v):k==1&&(d.src=v)},je=function(d){var v,k=d[s](r.srcsetAttr);(v=r.customMedia[d[s]("data-media")||d[s]("media")])&&d.setAttribute("media",v),k&&d.setAttribute("srcset",k)},We=ne(function(d,v,k,B,M){var N,W,D,U,H,K;(H=G(d,"lazybeforeunveil",v)).defaultPrevented||(B&&(k?F(d,r.autosizesClass):d.setAttribute("sizes",B)),W=d[s](r.srcsetAttr),N=d[s](r.srcAttr),M&&(D=d.parentNode,U=D&&g.test(D.nodeName||"")),K=v.firesLoad||"src"in d&&(W||N||U),H={target:d},F(d,r.loadingClass),K&&(clearTimeout(b),b=i(ve,2500),ce(d,Ee,!0)),U&&I.call(D.getElementsByTagName("source"),je),W?d.setAttribute("srcset",W):N&&!U&&(Oe.test(d.nodeName)?Re(d,N):d.src=N),M&&(W||U)&&le(d,{src:N})),d._lazyRace&&delete d._lazyRace,ie(d,r.lazyClass),Z(function(){var Y=d.complete&&d.naturalWidth>1;(!K||Y)&&(Y&&F(d,r.fastLoadedClass),be(H),d._lazyCache=!0,i(function(){"_lazyCache"in d&&delete d._lazyCache},9)),d.loading=="lazy"&&$--},!0)}),ee=function(d){if(!d._lazyRace){var v,k=Ie.test(d.nodeName),B=k&&(d[s](r.sizesAttr)||d[s]("sizes")),M=B=="auto";(M||!m)&&k&&(d[s]("src")||d.srcset)&&!d.complete&&!q(d,r.errorClass)&&q(d,r.lazyClass)||(v=G(d,"lazyunveilread").detail,M&&de.updateElem(d,!0,d.offsetWidth),d._lazyRace=!0,$++,We(d,v,M,B,k))}},De=fe(function(){r.loadMode=3,P()}),Ce=function(){r.loadMode==3&&(r.loadMode=2),De()},ae=function(){if(!m){if(c.now()-S<999){i(ae,999);return}m=!0,r.loadMode=3,P(),o("scroll",Ce,!0)}};return{_:function(){S=c.now(),u.elements=n.getElementsByClassName(r.lazyClass),p=n.getElementsByClassName(r.lazyClass+" "+r.preloadClass),o("scroll",P,!0),o("resize",P,!0),o("pageshow",function(d){if(d.persisted){var v=n.querySelectorAll("."+r.loadingClass);v.length&&v.forEach&&h(function(){v.forEach(function(k){k.complete&&ee(k)})})}}),a.MutationObserver?new MutationObserver(P).observe(f,{childList:!0,subtree:!0,attributes:!0}):(f[l]("DOMNodeInserted",P,!0),f[l]("DOMAttrModified",P,!0),setInterval(P,999)),o("hashchange",P,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(d){n[l](d,P,!0)}),/d$|^c/.test(n.readyState)?ae():(o("load",ae),n[l]("DOMContentLoaded",P),i(ae,2e4)),u.elements.length?(ge(),Z._lsFlush()):P()},checkElems:P,unveil:ee,_aLSL:Ce}}(),de=function(){var p,m=ne(function(_,z,x,L){var O,R,V;if(_._lazysizesWidth=L,L+="px",_.setAttribute("sizes",L),g.test(z.nodeName||""))for(O=z.getElementsByTagName("source"),R=0,V=O.length;R<V;R++)O[R].setAttribute("sizes",L);x.detail.dataAttr||le(_,x.detail)}),b=function(_,z,x){var L,O=_.parentNode;O&&(x=pe(_,O,x),L=G(_,"lazybeforesizes",{width:x,dataAttr:!!z}),L.defaultPrevented||(x=L.detail.width,x&&x!==_._lazysizesWidth&&m(_,O,L,x)))},A=function(){var _,z=p.length;if(z)for(_=0;_<z;_++)b(p[_])},S=fe(A);return{_:function(){p=n.getElementsByClassName(r.autosizesClass),o("resize",S)},checkElems:S,updateElem:b}}(),oe=function(){!oe.i&&n.getElementsByClassName&&(oe.i=!0,de._(),he._())};return i(function(){r.init&&oe()}),u={cfg:r,autoSizer:de,loader:he,init:oe,uP:le,aC:F,rC:ie,hC:q,fire:G,gW:pe,rAF:Z},u})})(Ue);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("toTopButton");e&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))});const _e="/AQUANIKA/assets/home-BCn1Fb8x.mp4";function Ve(){const e=document.getElementById("videoBlock"),t=document.getElementById("playButton"),a=document.getElementById("videoModal"),n=document.getElementById("aboutVideo"),c=document.getElementById("closeModal");if(!e||!t||!a||!n||!c)return;try{_e&&(n.src=_e,n.setAttribute("preload","none"))}catch(l){console.warn("Не удалось назначить src для видео:",l)}async function u(){a.style.display="block",document.body.style.overflow="hidden",document.body.style.paddingRight=f()+"px";const l=a.querySelector(".video-container")||n;try{l.requestFullscreen?await l.requestFullscreen():l.webkitRequestFullscreen?l.webkitRequestFullscreen():n.webkitEnterFullscreen&&n.webkitEnterFullscreen()}catch(s){console.warn("Fullscreen error:",s)}try{await n.play()}catch(s){console.log("Автовоспроизведение не разрешено:",s)}}async function r(){try{n.pause()}catch{}a.style.display="none",document.body.style.overflow="auto",document.body.style.paddingRight="";try{document.fullscreenElement&&document.exitFullscreen?await document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(l){console.warn("Exit fullscreen error:",l)}}function f(){return window.innerWidth-document.documentElement.clientWidth}e.addEventListener("click",function(l){l.target!==t&&!t.contains(l.target)&&u()}),t.addEventListener("click",u),c.addEventListener("click",r),a.addEventListener("click",function(l){l.target===a&&r()}),document.addEventListener("keydown",function(l){l.key==="Escape"&&a.style.display==="block"&&r()});const C=document.querySelector(".modal-content");C&&C.addEventListener("click",function(l){l.stopPropagation()}),console.log("Modal video initialized successfully")}function Ke(){const e=document,t=e.getElementById("galleryMasonry");if(!t)return;const a=e.querySelectorAll(".gallery-filter .filter-button");a.forEach(i=>{i.addEventListener("click",()=>{a.forEach(g=>g.classList.remove("active")),i.classList.add("active");const h=i.getAttribute("data-filter");t.querySelectorAll(".gallery-item").forEach(g=>{const E=g.getAttribute("data-category"),w=h==="all"||E===h;g.style.display=w?"":"none"})})});const n=e.getElementById("galleryModal");if(!n)return;const c=n.querySelector(".gallery-modal__image"),u=n.querySelector(".gallery-modal__caption"),r=n.querySelector(".gallery-modal__close"),f=n.querySelector(".gallery-modal__prev"),C=n.querySelector(".gallery-modal__next");let l=-1;const s=()=>Array.from(t.querySelectorAll(".gallery-item")).filter(i=>i.style.display!=="none");function o(i){const h=s();if(!h.length)return;l=(i+h.length)%h.length;const y=h[l].querySelector("img");c.src=y.src,c.alt=y.alt||"",u.textContent=y.alt||"",n.classList.add("is-open")}t.addEventListener("click",i=>{let h=i.target.closest("img"),y=i.target.closest(".gallery-item");if(!h&&y&&(h=y.querySelector("img")),!h||!y)return;const E=s().indexOf(y);o(E)}),r.addEventListener("click",()=>n.classList.remove("is-open")),n.addEventListener("click",i=>{i.target===n&&n.classList.remove("is-open")}),f.addEventListener("click",()=>o(l-1)),C.addEventListener("click",()=>o(l+1)),window.addEventListener("keydown",i=>{n.classList.contains("is-open")&&(i.key==="Escape"&&n.classList.remove("is-open"),i.key==="ArrowLeft"&&o(l-1),i.key==="ArrowRight"&&o(l+1))})}let xe=!1;function Qe(){if(document.getElementById("formsModalOverlay"))return;const e=(o,i,h={},y)=>{const g=document.createElement(o);i&&(g.className=i);for(const[E,w]of Object.entries(h))w!=null&&g.setAttribute(E,String(w));return y!==void 0&&(g.textContent=y),g},t=e("div","modal-overlay",{id:"formsModalOverlay"}),a={callback:"AQUANIKA: Заказать звонок",question:"AQUANIKA: Вопрос",review:"AQUANIKA: Отзыв",resume:"AQUANIKA: Резюме"},n=()=>e("span","form__req",{},"*"),c=(o,i,h,y)=>{const g=e("div","form__row"),E=e("label","form__label");E.append(document.createTextNode(i)),h&&E.append(n());const w=e("input","form__input",y);return h&&(w.required=!0),E.append(w),g.append(E),o.append(g),w},u=(o,i,h,y,g)=>{const E=e("div","form__row"),w=e("label","form__label");w.append(document.createTextNode(i));const I=e("select","form__input",{name:y});return g.forEach(q=>{const F=document.createElement("option");typeof q=="object"?(q.value!==void 0&&(F.value=String(q.value)),F.textContent=q.text!==void 0?String(q.text):String(q.value??"")):F.textContent=String(q),I.append(F)}),w.append(I),E.append(w),o.append(E),I},r=(o,i,h,y)=>{const g=e("div","form__row"),E=e("label","form__label");E.append(document.createTextNode(i)),h&&E.append(n());const w=e("textarea","form__textarea",y);return h&&(w.required=!0),E.append(w),g.append(E),o.append(g),w},f=o=>{const i=e("div","form__agree"),h=document.createElement("label"),y=document.createElement("input");y.type="checkbox",y.name="consent",y.required=!0;const g=document.createElement("span"),E=document.createElement("a");E.href="/privacy",E.textContent=" политикой конфиденциальности",E.target="_blank",E.rel="noopener noreferrer",E.className="highlight-link",g.textContent="Соглашаюсь с ",g.appendChild(E),h.append(y,g),i.append(h),o.append(i)},C=o=>{const i=e("div","form__actions"),h=e("button","button button--primary",{type:"submit"},"Отправить");i.append(h),o.append(i)},l=(o,i)=>{const h=e("input",null,{type:"hidden",name:"type",value:i}),y=e("input",null,{type:"hidden",name:"page",value:""}),g=e("input",null,{type:"hidden",name:"_subject",value:a[i]||"AQUANIKA"}),E=e("input",null,{type:"text",name:"_gotcha",tabindex:"-1",autocomplete:"off",style:"display:none"});o.append(h,y,g,E)},s=(o,i,h)=>{const y=e("div","forms-modal",{"data-modal":o,"aria-hidden":"true",role:"dialog","aria-modal":"true"}),g=e("div","forms-modal__content"),E=e("button","forms-modal__close",{"aria-label":"Закрыть"},"×"),w=e("h3","forms-modal__title",{},i),I=e("form","modal__form",{action:"https://formspree.io/f/xldpwwpb",method:"POST"});l(I,o),h(I),f(I),C(I),g.append(E,w,I),y.append(g),t.append(y)};s("callback","Заказать звонок",o=>{c(o,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),c(o,"Телефон",!0,{type:"tel",name:"phone",placeholder:"+7 (___) ___-__-__"}),u(o,"Удобное время",!1,"preferred_time",[{value:"",text:"Не важно"},{value:"10:00 - 12:00"},{value:"12:00 - 15:00"},{value:"15:00 - 18:00"},{value:"18:00 - 21:00"}]),r(o,"Комментарий",!1,{name:"message",rows:"4",placeholder:"Опишите вопрос"})}),s("question","Задать вопрос",o=>{c(o,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),r(o,"Сообщение",!0,{name:"message",rows:"5",placeholder:"Ваш вопрос"})}),s("resume","Отправить резюме",o=>{c(o,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),c(o,"Email",!0,{type:"email",name:"email",placeholder:"name@example.com"}),c(o,"Телефон",!1,{type:"tel",name:"phone",placeholder:"+7 (___) ___-__-__"}),c(o,"Должность/направление",!1,{type:"text",name:"position",placeholder:"Например: Косметолог"}),r(o,"Сопроводительное письмо",!1,{name:"message",rows:"5",placeholder:"Коротко о вашем опыте и ожиданиях"})}),s("review","Оставить отзыв",o=>{c(o,"Имя",!0,{type:"text",name:"name",placeholder:"Ваше имя"}),u(o,"Оценка",!1,"rating",[{value:"",text:"—"},{value:"5"},{value:"4"},{value:"3"},{value:"2"},{value:"1"}]),r(o,"Отзыв",!0,{name:"message",rows:"5",placeholder:"Ваш отзыв"})}),document.body.appendChild(t)}function Ye(){const e=window.innerWidth-document.documentElement.clientWidth;document.body.dataset.prevOverflow=document.body.style.overflow||"",document.body.dataset.prevPaddingRight=document.body.style.paddingRight||"",document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=e+"px")}function Ge(){document.body.style.overflow=document.body.dataset.prevOverflow||"",document.body.style.paddingRight=document.body.dataset.prevPaddingRight||"",delete document.body.dataset.prevOverflow,delete document.body.dataset.prevPaddingRight}function Je(){document.querySelectorAll('#formsModalOverlay form input[name="page"]').forEach(t=>t.value=window.location.href)}function re(e){const t=document.getElementById("formsModalOverlay");if(!t)return;Je(),t.querySelectorAll(".forms-modal").forEach(c=>c.setAttribute("aria-hidden","true"));const n=t.querySelector(`.forms-modal[data-modal="${e}"]`);n&&(t.classList.add("is-open"),n.setAttribute("aria-hidden","false"),Ye())}function se(){const e=document.getElementById("formsModalOverlay");e&&(e.classList.remove("is-open"),e.querySelectorAll(".forms-modal").forEach(t=>t.setAttribute("aria-hidden","true")),Ge())}window.closeFormsModal=se;function Ze(){const e=document.getElementById("formsModalOverlay");e&&(e.addEventListener("click",t=>{t.target===e&&se()}),e.addEventListener("click",t=>{t.target.closest(".forms-modal__close")&&se()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&e.classList.contains("is-open")&&se()}),document.addEventListener("click",t=>{const a=t.target.closest("[data-open-modal]");if(a){t.preventDefault();const r=a.dataset.openModal||"question";re(r);try{const f=document.getElementById("formsModalOverlay"),C=f&&f.querySelector(`.forms-modal[data-modal="${r}"]`),l=C&&C.querySelector("form");if(l){const s=a.dataset.message;if(s){const i=l.querySelector('textarea[name="message"]');i&&(i.value=s)}const o=a.dataset.subject;if(o){const i=l.querySelector('input[name="_subject"]');i&&(i.value=o)}}}catch{}return}const n=t.target.closest(".sidebar__button");if(n&&n.dataset.action){t.preventDefault(),re(n.dataset.action);return}if(t.target.closest(".contacts-message-btn")){t.preventDefault(),re("question");return}if(t.target.closest(".mobile-nav__action-btn")){t.preventDefault(),re("question");return}}))}function Xe(){xe||(Qe(),Ze(),xe=!0,console.log("Модальные формы инициализированы"))}async function ke(e,t){var a;try{const n=t.startsWith("/")?`${we}${t}`:`${we}/${t}`,c=await fetch(n);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const u=await c.text(),r=document.getElementById(e);if(r)try{const f=window.sanitizeHTML?window.sanitizeHTML(u):u,C=document.createElement("template");C.innerHTML=f,r.replaceChildren(),r.append(C.content.cloneNode(!0));try{(a=window.secureExternalLinks)==null||a.call(window,r)}catch{}}catch{const C=document.createElement("template");C.innerHTML=u,r.replaceChildren(),r.append(C.content.cloneNode(!0))}else console.warn(`Элемент с ID ${e} не найден`)}catch(n){console.error(`Ошибка при загрузке компонента ${t}:`,n)}}class et{constructor(){this.sidebar=document.querySelector(".mobile-nav__sidebar"),this.slides=document.querySelector(".mobile-nav__slides"),this.mainSlide=document.querySelector(".mobile-nav__slide-main"),this.submenuSlide=document.querySelector(".mobile-nav__slide-submenu"),this.menuBtn=document.querySelector(".mobile-nav__menu-btn"),this.closeBtn=document.querySelector(".mobile-nav__close"),this.backBtn=document.querySelector(".mobile-nav__back"),this.servicesBtn=document.querySelector(".mobile-nav__category-btn"),this.categoriesList=document.querySelector(".mobile-nav__categories"),this.subcategoryBtns=document.querySelectorAll(".mobile-nav__subcategory-btn"),this.submenus=document.querySelectorAll(".mobile-nav__subsubmenu"),this.isOpen=!1,this.isSubmenuOpen=!1,this.isCategoriesOpen=!1,this.toggleMenu=this.toggleMenu.bind(this),this.closeMenu=this.closeMenu.bind(this),this.toggleCategories=this.toggleCategories.bind(this),this.showSubmenu=this.showSubmenu.bind(this),this.hideSubmenu=this.hideSubmenu.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.initEventListeners()}initEventListeners(){this.menuBtn.addEventListener("click",this.toggleMenu),this.closeBtn.addEventListener("click",this.closeMenu),this.servicesBtn.addEventListener("click",this.toggleCategories),this.subcategoryBtns.forEach(t=>{t.addEventListener("click",()=>{const a=t.dataset.category;this.showSubmenu(a)})}),this.backBtn.addEventListener("click",this.hideSubmenu),document.addEventListener("click",this.handleClickOutside),this.sidebar.addEventListener("click",t=>{t.target.closest("a")&&this.closeMenu()}),this.addInteractiveEffects()}addInteractiveEffects(){this.sidebar.querySelectorAll("a, button").forEach(a=>{a.addEventListener("mouseenter",()=>{a.style.transition="all 0.2s ease",a.style.transform="translateY(-1px)"}),a.addEventListener("mouseleave",()=>{a.style.transform="translateY(0)"}),a.addEventListener("mousedown",()=>{a.style.transform="translateY(1px)"}),a.addEventListener("mouseup",()=>{a.style.transform="translateY(-1px)"})})}toggleMenu(){this.isOpen?this.closeMenu():this.openMenu()}openMenu(){this.isOpen=!0,this.sidebar.classList.add("is-open"),document.body.style.overflow="hidden"}closeMenu(){this.isOpen=!1,this.isSubmenuOpen=!1,this.isCategoriesOpen=!1,this.sidebar.classList.remove("is-open"),this.slides.classList.remove("show-submenu"),this.servicesBtn.classList.remove("is-open"),this.categoriesList.classList.remove("is-open"),document.body.style.overflow=""}toggleCategories(){this.isCategoriesOpen=!this.isCategoriesOpen,this.servicesBtn.classList.toggle("is-open"),this.categoriesList.classList.toggle("is-open")}showSubmenu(t){this.isSubmenuOpen=!0,this.slides.classList.add("show-submenu"),this.submenus.forEach(a=>{a.dataset.category===t?a.classList.add("is-active"):a.classList.remove("is-active")})}hideSubmenu(){this.isSubmenuOpen=!1,this.slides.classList.remove("show-submenu"),this.submenus.forEach(t=>{t.classList.remove("is-active")})}handleClickOutside(t){this.isOpen&&!this.sidebar.contains(t.target)&&!this.menuBtn.contains(t.target)&&this.closeMenu()}}const te={salonCoordinates:[55.175026,61.310027],mapOptions:{zoom:16,controls:["zoomControl","fullscreenControl","typeSelector"]}};let j=null;function tt(){const e=document.createElement("div");e.className="balloon-content";const t=document.createElement("p"),a=document.createElement("strong");a.textContent="Адрес:",t.appendChild(a),t.appendChild(document.createTextNode(" Братьев Кашириных, 131"));const n=document.createElement("p"),c=document.createElement("strong");c.textContent="Телефон:",n.appendChild(c);const u=document.createElement("a");u.href="tel:79227445287",u.textContent=" +7 (922) 744-52-87",n.appendChild(u);const r=document.createElement("p"),f=document.createElement("strong");return f.textContent="Время работы:",r.appendChild(f),r.appendChild(document.createTextNode(" с 10:00 до 21:00")),e.appendChild(t),e.appendChild(n),e.appendChild(r),e}function nt(){const e=document.createElement("div");e.className="map-placeholder";const t=document.createElement("i");t.className="fas fa-map-marked-alt";const a=document.createElement("div");a.className="loading-text";const n=document.createElement("p");n.textContent="Карта временно недоступна";const c=document.createElement("a");return c.href="https://yandex.ru/maps/?um=constructor%3A6c71b99ccf1f2b1ece9efab9e7a6672d6bb373294df3d4738952dd7d58ef905a&source=constructorStatic",c.target="_blank",c.rel="noopener noreferrer",c.textContent="Посмотреть статическую карту",a.appendChild(n),a.appendChild(c),e.appendChild(t),e.appendChild(a),e}function Le(){if(document.getElementById("map")){if(typeof ymaps>"u"){ot();return}ymaps.ready(()=>{try{Se()}catch(e){console.error("Ошибка при создании карты:",e),me()}})}}function ot(){const e=document.createElement("script");e.src="https://api-maps.yandex.ru/2.1/?apikey=480aa768-745b-4ac9-8ec8-e40c2e8d6c82&lang=ru_RU",e.type="text/javascript",e.onload=()=>{ymaps.ready(()=>{try{Se()}catch(t){console.error("Ошибка при создании карты:",t),me()}})},e.onerror=()=>{console.error("Ошибка загрузки API Яндекс.Карт"),me()},document.head.appendChild(e)}function Se(){if(j&&(j.destroy(),j=null),!document.getElementById("map"))return;j=new ymaps.Map("map",{center:te.salonCoordinates,zoom:te.mapOptions.zoom,controls:te.mapOptions.controls},{searchControlProvider:"yandex#search"});const t=tt(),a=new ymaps.Placemark(te.salonCoordinates,{balloonContentHeader:"Салон красоты Aquanika",balloonContentBody:t.innerHTML,hintContent:"Салон красоты Aquanika"},{preset:"islands#blueBeautyIcon",iconColor:"#ff6b9d",balloonCloseButton:!0,hideIconOnBalloonOpen:!1});j.geoObjects.add(a),at(j),rt(j),setTimeout(()=>{a.balloon.open()},1e3)}function at(e){const t=new ymaps.control.SearchControl({options:{noPlacemark:!0,position:{top:10,right:10}}});e.controls.add(t);const a=new ymaps.control.Button({data:{content:"Проложить маршрут",title:"Проложить маршрут до салона"},options:{maxWidth:200,position:{top:50,right:10}}});a.events.add("press",function(){const n=`https://yandex.ru/maps/?rtext=~${te.salonCoordinates.join(",")}`;window.open(n,"_blank")}),e.controls.add(a)}function rt(e){function t(){window.innerWidth<=768?e.behaviors.disable("scrollZoom"):e.behaviors.enable("scrollZoom")}t(),window.addEventListener("resize",t)}function me(){const e=document.getElementById("map");if(e){const t=nt();e.replaceChildren(),e.appendChild(t)}}function Ae(){j&&(j.destroy(),j=null)}class st{constructor(){this.init()}init(){console.log("Инициализация форм"),document.querySelectorAll('form:not([data-form-initialized="true"])').forEach(l=>{l.addEventListener("submit",a),l.dataset.formInitialized="true"});async function a(l){var g,E;l.preventDefault();const s=l.target,o=s.querySelector('[type="submit"]'),i=new FormData(s);if(Object.fromEntries(i.entries()),!n(s))return;const h=s.querySelector('input[name="type"]'),y=h?h.value:"";if(y==="question"||y==="review"){try{const w="79227445287",I=f(y,Object.fromEntries(new FormData(s).entries())),q=`https://wa.me/${w}?text=${encodeURIComponent(I)}`;window.open(q,"_blank","noopener,noreferrer"),r(s,"Откроется WhatsApp для отправки сообщения.","success"),s.reset();try{(g=window.closeFormsModal)==null||g.call(window)}catch{}}catch(w){r(s,"Не удалось открыть WhatsApp.","error"),console.error("WhatsApp open error:",w)}return}try{o.classList.add("button--loading"),o.disabled=!0;const w=await C(s);r(s,"Сообщение отправлено успешно!","success"),s.reset();try{(E=window.closeFormsModal)==null||E.call(window)}catch{}}catch(w){r(s,"Произошла ошибка. Попробуйте позже.","error"),console.error("Form submission error:",w)}finally{o.classList.remove("button--loading"),o.disabled=!1}}function n(l){const s=l.querySelectorAll("input, textarea");let o=!0;return s.forEach(i=>{u(i),i.required&&!i.value.trim()&&(c(i,"Это поле обязательно для заполнения"),o=!1),i.type==="email"&&i.value&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.value)||(c(i,"Введите корректный email"),o=!1)),i.type==="tel"&&i.value&&(/^\+?[0-9\s-()]{10,}$/.test(i.value)||(c(i,"Введите корректный номер телефона"),o=!1))}),o}function c(l,s){const o=document.createElement("div");o.className="form__error",o.textContent=s,l.classList.add("input--error"),l.parentNode.appendChild(o)}function u(l){const s=l.parentNode.querySelector(".form__error");s&&s.remove(),l.classList.remove("input--error")}function r(l,s,o){const i=document.createElement("div");i.className=`form__message form__message--${o}`,i.textContent=s;const h=l.querySelector(".form__message");h&&h.remove(),l.appendChild(i),setTimeout(()=>{i.remove()},5e3)}function f(l,s){const o=[];return l==="question"?o.push("Здравствуйте! Хочу задать вопрос."):l==="review"&&o.push("Здравствуйте! Хочу оставить отзыв."),s.name&&o.push(`Имя: ${s.name}`),s.phone&&o.push(`Телефон: ${s.phone}`),s.email&&o.push(`Email: ${s.email}`),s.preferred_time&&o.push(`Удобное время: ${s.preferred_time}`),s.rating&&o.push(`Оценка: ${s.rating}`),s.message&&o.push(`Сообщение: ${s.message}`),s.page&&o.push(`Страница: ${s.page}`),o.join(`
`)}async function C(l){const s=l.getAttribute("action")||"/api/send-form",o=(l.getAttribute("method")||"POST").toUpperCase(),i=new FormData(l);if(s.includes("formspree.io")){const g=await fetch(s,{method:o,body:i,headers:{Accept:"application/json"}});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);try{return await g.json()}catch{return{}}}const h=Object.fromEntries(i.entries()),y=await fetch(s,{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);return await y.json()}}}function it(){return console.log("Запуск инициализации форм"),new st}window.initVideoModal=Ve;window.initGalleryModal=Ke;window.initMap=Le;window.destroyMap=Ae;window.initForms=it;window.sanitizeHTML=window.sanitizeHTML||(e=>e);function ze(){const e=window.location.pathname,t=window.location.origin,a=window.basePath||(window.location.hostname.includes("github.io")?"/AQUANIKA":""),n=[{"@type":"ListItem",position:1,name:"Главная",item:`${t}${a}/`}];let c=2;if(e===`${a}/`||e==="/")return ue(n);const u={"/about":"О нас","/team":"Наша команда","/reviews":"Отзывы","/price":"Цены","/gallery":"Галерея","/vacancies":"Вакансии","/contacts":"Контакты","/privacy":"Политика конфиденциальности"},r={"/services/spa":"SPA и массаж","/services/epilation":"Эпиляция","/services/brows":"Брови и ресницы","/services/nails":"Маникюр и педикюр","/services/cosmetology":"Уход за кожей","/services/hairdressing":"Парикмахерские услуги","/services/makeup":"Макияж","/services/men":"Для мужчин"};for(const[f,C]of Object.entries(u))if(e.includes(f))return n.push({"@type":"ListItem",position:c,name:C,item:`${t}/AQUANIKA${f}`}),ue(n);for(const[f,C]of Object.entries(r))if(e.includes(f)){n.push({"@type":"ListItem",position:c++,name:C,item:`${t}/AQUANIKA${f}`});const l=ct(f);for(const[s,o]of Object.entries(l))if(e.includes(s)){n.push({"@type":"ListItem",position:c,name:o,item:`${t}/AQUANIKA${s}`});break}return ue(n)}return null}function ct(e){return{"/services/spa":{"/services/aquanika":'ПВМ "Акваника"',"/services/massage":"Массаж","/services/wrapping":"Обертывание"},"/services/epilation":{"/services/epilation/laser":"Лазерная эпиляция","/services/epilation/sugaring":"Шугаринг"},"/services/brows":{"/services/brows/architecture":"Архитектура бровей","/services/brows/extensions":"Наращивание ресниц"},"/services/nails":{"/services/nails/manicure":"Маникюр","/services/nails/pedicure":"Педикюр","/services/nails/extensions":"Наращивание ногтей"},"/services/cosmetology":{"/services/cosmetology/face-care":"Косметология","/services/cosmetology/injections":"Инъекции","/services/cosmetology/tattoo-removal":"Выведение татуажа"},"/services/hairdressing":{"/services/hairdressing/haircuts":"Стрижки","/services/hairdressing/coloring":"Окрашивание","/services/hairdressing/styling":"Укладки"},"/services/men":{"/services/men/haircut":"Мужская стрижка","/services/men/epilation":"Мужская эпиляция","/services/men/manicure":"Мужской маникюр"}}[e]||{}}function ue(e){const t=document.querySelector('script[type="application/ld+json"][data-breadcrumbs]');t&&t.remove();const a={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:e},n=document.createElement("script");return n.type="application/ld+json",n.setAttribute("data-breadcrumbs","true"),n.textContent=JSON.stringify(a,null,2),n}function lt(){const e=document.querySelector('script[type="application/ld+json"][data-breadcrumbs]');if(!e)return;const a=JSON.parse(e.textContent).itemListElement,n=document.createElement("nav");n.setAttribute("aria-label","Хлебные крошки"),n.className="breadcrumbs";const c=document.createElement("div");c.className="container";const u=document.createElement("ol");u.className="breadcrumbs__list",a.forEach((C,l)=>{const s=document.createElement("li");if(s.className="breadcrumbs__item",l===a.length-1){const o=document.createElement("span");o.className="breadcrumbs__current",o.setAttribute("aria-current","page"),o.textContent=C.name,s.appendChild(o)}else{const o=document.createElement("a");o.href=C.item,o.className="breadcrumbs__link",o.textContent=C.name,s.appendChild(o)}u.appendChild(s)}),c.appendChild(u),n.appendChild(c);const r=document.querySelector("header"),f=document.querySelector("main");r&&f&&f.insertBefore(n,f.firstChild)}function Be(){const e=ze();e&&(document.head.appendChild(e),console.log("🍞 Breadcrumbs initialized"),lt())}window.initBreadcrumbs=Be;window.generateBreadcrumbs=ze;window.basePath=window.location.hostname.includes("github.io")?"/AQUANIKA":"";function dt(){if(document.getElementById("cookieBannerStyles"))return;const e=document.createElement("style");e.id="cookieBannerStyles",e.textContent=`
  .cookie-banner { 
    position: fixed; 
    left: 16px; 
    right: 16px; 
    bottom: 16px; 
    z-index: 1100; 
    display: flex; 
    gap: 16px; 
    align-items: flex-start; 
    padding: 16px; 
    background: var(--color-background, #fff); 
    color: var(--color-dark, #222); 
    border: 1px solid var(--color-border, #e0e0e0); 
    border-radius: 12px; 
    box-shadow: var(--shadow-lg, 0 10px 30px rgba(0,0,0,.15)); 
    max-width: 960px; 
    margin: 0 auto; 
  }
  .cookie-banner__text { 
    flex: 1; 
    line-height: 1.5; 
    font-size: 14px; 
  }
  .cookie-banner__actions { 
    display: flex; 
    gap: 12px; 
    flex-wrap: wrap; 
  }
  .cookie-banner__link { 
    color: var(--color-secondary, #a78b3d); 
    text-decoration: underline; 
  }
  .cookie-banner__btn { 
    white-space: nowrap; 
  }
  .consent-checkbox {
    margin: 10px 0;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 4px;
    border: 1px solid #e9ecef;
  }
  .consent-checkbox label {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    font-size: 13px;
    cursor: pointer;
    line-height: 1.4;
  }
  .consent-checkbox input[type="checkbox"] {
    margin-top: 2px;
    flex-shrink: 0;
  }
  .form-consent {
    margin: 15px 0;
    padding: 12px;
    background: #f8f9fa;
    border-radius: 6px;
    border-left: 4px solid #007bff;
  }
  .form-consent label {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    font-size: 14px;
    cursor: pointer;
    line-height: 1.4;
  }
  .form-consent input[type="checkbox"] {
    margin-top: 2px;
    flex-shrink: 0;
  }
  @media (max-width: 640px){ 
    .cookie-banner{ 
      flex-direction: column; 
      gap: 12px; 
      padding: 12px; 
    }
    .cookie-banner__actions {
      width: 100%;
      justify-content: stretch;
    }
    .cookie-banner__btn {
      flex: 1;
      min-width: 120px;
    }
  }`,document.head.appendChild(e)}function ut(){if(document.getElementById("cookieBanner"))return;const e=document.createElement("div");e.id="cookieBanner",e.className="cookie-banner",e.setAttribute("role","region"),e.setAttribute("aria-label","Уведомление об использовании cookies");const t=document.createElement("p");t.className="cookie-banner__text";const a=document.createElement("span");a.textContent="Мы используем файлы cookie для улучшения работы сайта. ";const n=document.createElement("a");n.className="cookie-banner__link",n.href="/privacy",n.textContent="Подробнее в Политике конфиденциальности",n.setAttribute("rel","noopener"),n.setAttribute("target","_self");const c=document.createElement("span");c.textContent=".",t.append(a,n,c);const u=document.createElement("div");u.className="cookie-banner__actions";const r=document.createElement("button");r.className="button button--primary cookie-banner__btn",r.type="button",r.textContent="Принять",r.addEventListener("click",()=>{try{localStorage.setItem("cookieConsent","accepted"),localStorage.setItem("cookieConsentDate",new Date().toISOString())}catch{}e.remove(),Me()});const f=document.createElement("button");f.className="button button--secondary cookie-banner__btn",f.type="button",f.textContent="Отклонить",f.addEventListener("click",()=>{try{localStorage.setItem("cookieConsent","rejected")}catch{}e.remove()}),u.append(r,f),e.append(t,u),document.body.appendChild(e)}function Me(){console.log("📊 Инициализация аналитики (после согласия пользователя)")}function mt(){document.querySelectorAll("form:not([data-no-consent])").forEach(t=>{if(!t.querySelector('input[name="personal-data-consent"]')){const a=document.createElement("div");a.className="form-consent";const n=document.createElement("label"),c=document.createElement("input");c.type="checkbox",c.name="personal-data-consent",c.required=!0;const u=document.createElement("span"),r=document.createTextNode("Я согласен на обработку моих персональных данных в соответствии с "),f=document.createElement("a");f.href="/privacy",f.target="_blank",f.textContent="Политикой конфиденциальности",f.style.color="#007bff";const C=document.createTextNode("");u.appendChild(r),u.appendChild(f),u.appendChild(C),n.appendChild(c),n.appendChild(u),a.appendChild(n);const l=t.querySelector('button[type="submit"], input[type="submit"]');l?l.parentNode.insertBefore(a,l):t.appendChild(a)}})}function pt(){document.addEventListener("submit",function(e){const t=e.target;if(t.hasAttribute("data-no-consent"))return;const a=t.querySelector('input[name="personal-data-consent"]');a&&!a.checked&&(e.preventDefault(),alert("Для отправки формы необходимо согласие на обработку персональных данных"),a.focus(),a.scrollIntoView({behavior:"smooth",block:"center"}))})}function ft(){const e={privacyPage:!!document.querySelector('a[href*="privacy"]'),formsWithConsent:document.querySelectorAll('input[name="personal-data-consent"]').length,cookieBanner:!!document.getElementById("cookieBanner"),hasLegalInfo:!!document.querySelector('.legal-info, [class*="requisites"], [class*="реквизиты"]')};return console.log("📋 Проверка юридических требований:",e),e.privacyPage||console.warn("⚠️ Не найдена ссылка на политику конфиденциальности"),e.hasLegalInfo||console.warn("⚠️ Не найдена юридическая информация (реквизиты)"),e}function ht(){try{if(localStorage.getItem("cookieConsent")==="accepted"){Me();return}}catch{}dt(),ut()}async function vt(){try{document.getElementById("header-placeholder")&&await ke("header-placeholder","/components/partials/header.html"),document.getElementById("footer-placeholder")&&await ke("footer-placeholder","/components/partials/footer.html")}catch(e){console.warn("Layout components loading failed:",e)}}function qe(){window.location.pathname.includes("/contacts")||document.getElementById("map")?(console.log("🗺️ Инициализация карты на странице контактов"),setTimeout(()=>{Le()},100)):Ae()}document.addEventListener("DOMContentLoaded",async()=>{console.log("🚀 AQUANIKA loaded in",window.location.hostname.includes("github.io")?"GitHub Pages":window.location.hostname==="localhost"?"Local development":"Production","mode");try{Be()}catch(e){console.warn("Breadcrumbs initialization failed",e)}await Promise.all([vt(),new Promise(e=>{new et,e()})]);try{Xe()}catch(e){console.warn("initFormsModals failed",e)}try{ht()}catch(e){console.warn("initCookieBanner failed",e)}try{mt(),pt()}catch(e){console.warn("Form consent initialization failed",e)}try{ft()}catch(e){console.warn("Legal requirements check failed",e)}qe(),He()});window.addEventListener("popstate",()=>{setTimeout(()=>{qe()},50)});
//# sourceMappingURL=main-CcoLDONC.js.map
