{"version":3,"mappings":"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","names":["basePath","isGitHubPages","routes","pagesWithSideMenu","pageTitles","createElement","tag","attributes","children","element","key","value","child","loadComponent","path","url","res","extractPageContentSafely","html","doc","mainEl","_a","e","secureExternalLinks","root","a","rel","getRoute","safelyInsertContent","container","contentNodes","node","clonedNode","loadPage","route","htmlPath","showSideMenu","rawContent","pageContentNodes","loadSideMenuSafely","initPageComponents","handleSafeScrolling","error","navigateTo","sideMenuContent","sideMenuNodes","wrapper","sideMenuContainer","contentContainer","sideMenuModule","__vitePreload","sideMenu","initFn","err","hash","tryScrollToHash","id","target","pageContentContainer","raw","hashIndex","pathnameOnly","fullPath","handleLocation","handleNavigation","link","currentPath","linkPath","relativePath","handleRedirects","redirectPath","cleanPath","carousels","m","init","el","initRouter","initSideMenu","sideMenuLinks","mainContent","handleSideMenuClick","setupMobileMenu","handleScreenChange","mediaQuery","href","pageContent"],"ignoreList":[],"sources":["../../src/js/components/router.js","../../src/js/components/sideMenu.js"],"sourcesContent":["// ==============  router.js  ==============\n// Умное определение basePath для всех окружений\nexport const basePath = (() => {\n  if (window.location.hostname.includes(\"github.io\")) {\n    return \"/AQUANIKA\";\n  }\n  if (window.location.hostname === \"localhost\") {\n    return \"/AQUANIKA\";\n  }\n  return \"\";\n})();\n\nexport const isGitHubPages = window.location.hostname.includes(\"github.io\");\nexport const isLocal = window.location.hostname === \"localhost\";\n\n// Маршруты\nexport const routes = {\n  \"/\": \"/pages/home.html\",\n  \"/about\": \"/pages/about.html\",\n  \"/team\": \"/pages/team.html\",\n  \"/reviews\": \"/pages/reviews.html\",\n  \"/vacancies\": \"/pages/vacancies.html\",\n  \"/gallery\": \"/pages/gallery.html\",\n  \"/price\": \"/pages/price.html\",\n  \"/contacts\": \"/pages/contacts.html\",\n  \"/privacy\": \"/pages/privacy.html\",\n\n  \"/services/spa\": \"/pages/spa-and-massage.html\",\n  \"/services/aquanika\": \"/pages/aquanika-massage.html\",\n  \"/services/massage\": \"/pages/massage.html\",\n  \"/services/wrapping\": \"/pages/wrapping.html\",\n\n  \"/services/epilation\": \"/pages/epilation.html\",\n  \"/services/epilation/laser\": \"/pages/laser-epilation.html\",\n  \"/services/epilation/sugaring\": \"/pages/sugaring.html\",\n\n  \"/services/brows\": \"/pages/brows-and-lashes.html\",\n  \"/services/brows/architecture\": \"/pages/brows-architecture.html\",\n  \"/services/brows/extensions\": \"/pages/brows-extensions.html\",\n\n  \"/services/nails\": \"/pages/manicure-pedicure.html\",\n  \"/services/nails/manicure\": \"/pages/manicure.html\",\n  \"/services/nails/pedicure\": \"/pages/pedicure.html\",\n  \"/services/nails/extensions\": \"/pages/nails-extensions.html\",\n\n  \"/services/cosmetology\": \"/pages/cosmetology.html\",\n  \"/services/cosmetology/face-care\": \"/pages/face-care.html\",\n  \"/services/cosmetology/injections\": \"/pages/injections.html\",\n  \"/services/cosmetology/tattoo-removal\": \"/pages/tattoo-removal.html\",\n\n  \"/services/hairdressing\": \"/pages/hairdressing.html\",\n  \"/services/hairdressing/haircuts\": \"/pages/haircuts.html\",\n  \"/services/hairdressing/coloring\": \"/pages/hair-coloring.html\",\n  \"/services/hairdressing/styling\": \"/pages/hair-styling.html\",\n\n  \"/services/makeup\": \"/pages/makeup.html\",\n\n  \"/services/men\": \"/pages/men-services.html\",\n  \"/services/men/haircut\": \"/pages/men-haircut.html\",\n  \"/services/men/epilation\": \"/pages/men-epilation.html\",\n  \"/services/men/manicure\": \"/pages/men-manicure.html\",\n};\n\n// Страницы с боковым меню\nconst pagesWithSideMenu = [\n  \"/about\",\n  \"/team\",\n  \"/reviews\",\n  \"/vacancies\",\n  \"/gallery\",\n];\n\n// Заголовки страниц\nconst pageTitles = {\n  \"/\": \"Aquanika – салон красоты премиум-класса\",\n  \"/about\": \"О нас – Aquanika\",\n  \"/team\": \"Наша команда – Aquanika\",\n  \"/reviews\": \"Отзывы – Aquanika\",\n  \"/vacancies\": \"Вакансии – Aquanika\",\n  \"/gallery\": \"Галерея – Aquanika\",\n  \"/prices\": \"Цены – Aquanika\",\n  \"/contacts\": \"Контакты – Aquanika\",\n  \"/price\": \"Прайс-лист\",\n  \"/privacy\": \"Политика конфиденциальности\",\n\n  \"/services/spa\": \"SPA и массаж – Aquanika\",\n  \"/services/aquanika\": \"Подводно-вакуумный массаж 'Акваника' – Aquanika\",\n  \"/services/massage\": \"Массаж – Aquanika\",\n  \"/services/wrapping\": \"Обертывания – Aquanika\",\n  \"/services/epilation\": \"Эпиляция – Aquanika\",\n  \"/services/epilation/laser\": \"Лазерная эпиляция – Aquanika\",\n  \"/services/epilation/sugaring\": \"Шугаринг – Aquanika\",\n  \"/services/brows\": \"Брови и ресницы – Aquanika\",\n  \"/services/brows/architecture\": \"Брови — Архитектура – Aquanika\",\n  \"/services/brows/extensions\": \"Ресницы — Наращивание – Aquanika\",\n  \"/services/nails\": \"Ногтевой сервис – Aquanika\",\n  \"/services/nails/manicure\": \"Маникюр – Aquanika\",\n  \"/services/nails/pedicure\": \"Педикюр – Aquanika\",\n  \"/services/nails/extensions\": \"Наращивание ногтей – Aquanika\",\n  \"/services/cosmetology\": \"Косметология – Aquanika\",\n  \"/services/cosmetology/face-care\": \"Косметология — Уход за лицом – Aquanika\",\n  \"/services/cosmetology/injections\": \"Косметология — Инъекции – Aquanika\",\n  \"/services/cosmetology/tattoo-removal\":\n    \"Косметология — Выведение татуажа – Aquanika\",\n  \"/services/hairdressing\": \"Парикмахерские услуги – Aquanika\",\n  \"/services/hairdressing/haircuts\": \"Стрижки – Aquanika\",\n  \"/services/hairdressing/coloring\": \"Окрашивание – Aquanika\",\n  \"/services/hairdressing/styling\": \"Укладки – Aquanika\",\n  \"/services/makeup\": \"Макияж – Aquanika\",\n  \"/services/men\": \"Услуги для мужчин – Aquanika\",\n  \"/services/men/haircut\": \"Для мужчин — Стрижка – Aquanika\",\n  \"/services/men/epilation\": \"Для мужчин — Эпиляция – Aquanika\",\n  \"/services/men/manicure\": \"Для мужчин — Маникюр – Aquanika\",\n};\n\n// ---------------- БЕЗОПАСНЫЕ HELPERS ----------------\n\n// Безопасное создание элементов\nfunction createElement(tag, attributes = {}, children = []) {\n  const element = document.createElement(tag);\n\n  // Установка атрибутов\n  Object.entries(attributes).forEach(([key, value]) => {\n    if (key === \"className\") {\n      element.className = value;\n    } else if (key === \"textContent\") {\n      element.textContent = value;\n    } else if (key === \"innerHTML\") {\n      // ВАЖНО: никогда не используем innerHTML в продакшене\n      console.warn(\"Потенциально опасное использование innerHTML\");\n    } else if (key.startsWith(\"on\")) {\n      // Запрещаем обработчики событий извне\n      console.warn(\"Потенциально опасные обработчики событий запрещены\");\n    } else {\n      element.setAttribute(key, value);\n    }\n  });\n\n  // Добавление детей\n  children.forEach((child) => {\n    if (typeof child === \"string\") {\n      element.appendChild(document.createTextNode(child));\n    } else if (child instanceof Node) {\n      element.appendChild(child);\n    }\n  });\n\n  return element;\n}\n\n// Безопасное создание ссылки\nfunction createSafeLink(href, text, className = \"\", target = \"_self\") {\n  const link = createElement(\n    \"a\",\n    {\n      href: href,\n      className: className,\n      target: target,\n      rel: target === \"_blank\" ? \"noopener noreferrer\" : \"\",\n    },\n    [text]\n  );\n\n  return link;\n}\n\n// Безопасная загрузка компонентов\nasync function loadComponent(path) {\n  let url = path;\n  if (path.startsWith(\"/\")) {\n    url = `${basePath}${path}`;\n  }\n\n  const res = await fetch(url);\n  if (!res.ok) throw new Error(`HTTP ${res.status} – ${url}`);\n  return res.text();\n}\n\n// Безопасное извлечение контента страницы\nfunction extractPageContentSafely(html) {\n  try {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n\n    // Полностью безопасное извлечение - только текстовые узлы и разрешенные элементы\n    const mainEl = doc.querySelector(\"main\");\n    if (mainEl) {\n      return Array.from(mainEl.childNodes);\n    }\n\n    return Array.from(doc.body?.childNodes || []);\n  } catch (e) {\n    console.warn(\"Safe HTML parse failed, using fallback\", e);\n    return [document.createTextNode(\"Контент временно недоступен\")];\n  }\n}\n\n// Усиление безопасности внешних ссылок\nfunction secureExternalLinks(root = document) {\n  const links = root.querySelectorAll('a[target=\"_blank\"]');\n  links.forEach((a) => {\n    const rel = (a.getAttribute(\"rel\") || \"\").split(/\\s+/).filter(Boolean);\n    if (!rel.includes(\"noopener\")) rel.push(\"noopener\");\n    if (!rel.includes(\"noreferrer\")) rel.push(\"noreferrer\");\n    a.setAttribute(\"rel\", rel.join(\" \"));\n  });\n}\n\n// ---------------- БЕЗОПАСНЫЙ ROUTING ----------------\n\n// Определяет актуальный маршрут\nexport function getRoute() {\n  let path = window.location.pathname;\n  if (basePath && path.startsWith(basePath)) {\n    path = path.slice(basePath.length);\n  }\n  return path || \"/\";\n}\n\n// Безопасная вставка контента\nfunction safelyInsertContent(container, contentNodes) {\n  container.replaceChildren(); // Очищаем безопасно\n\n  contentNodes.forEach((node) => {\n    // Клонируем узлы для безопасности\n    const clonedNode = node.cloneNode(true);\n    container.appendChild(clonedNode);\n  });\n}\n\n// Загружает контент безопасно\nexport async function loadPage(route) {\n  const htmlPath = routes[route] || routes[\"/\"];\n  const showSideMenu = pagesWithSideMenu.includes(route);\n\n  document.title = pageTitles[route] || \"Aquanika\";\n\n  try {\n    const rawContent = await loadComponent(htmlPath);\n    const pageContentNodes = extractPageContentSafely(rawContent);\n\n    const mainEl = document.querySelector(\"main\");\n    if (!mainEl) return;\n\n    if (showSideMenu) {\n      // Загрузка side menu безопасно\n      await loadSideMenuSafely(mainEl, pageContentNodes);\n    } else {\n      // Прямая вставка контента\n      safelyInsertContent(mainEl, pageContentNodes);\n    }\n\n    // Инициализация компонентов после загрузки\n    await initPageComponents();\n\n    // Безопасный скроллинг\n    handleSafeScrolling(showSideMenu);\n  } catch (error) {\n    console.error(\"Ошибка загрузки страницы:\", error);\n    if (route !== \"/\") {\n      navigateTo(\"/\");\n    }\n  }\n}\n\n// Безопасная загрузка side menu\nasync function loadSideMenuSafely(mainEl, pageContentNodes) {\n  try {\n    const sideMenuContent = await loadComponent(\n      \"/components/partials/side-menu.html\"\n    );\n    const sideMenuNodes = extractPageContentSafely(sideMenuContent);\n\n    const wrapper = createElement(\"div\", {\n      className: \"page-with-sidebar container\",\n    });\n\n    // Создаем контейнер для side menu\n    const sideMenuContainer = createElement(\"div\", {\n      className: \"side-menu-container\",\n    });\n    safelyInsertContent(sideMenuContainer, sideMenuNodes);\n    wrapper.appendChild(sideMenuContainer);\n\n    // Создаем контейнер для контента\n    const contentContainer = createElement(\"div\", {\n      className: \"page-content\",\n    });\n    safelyInsertContent(contentContainer, pageContentNodes);\n    wrapper.appendChild(contentContainer);\n\n    // Очищаем и вставляем\n    mainEl.replaceChildren();\n    mainEl.appendChild(wrapper);\n\n    // Динамический импорт sideMenu.js\n    try {\n      const sideMenuModule = await import(\"./sideMenu.js\");\n      const initFn =\n        sideMenuModule.initSideMenu ||\n        (sideMenuModule.default && sideMenuModule.default.initSideMenu);\n      if (initFn) initFn();\n    } catch (err) {\n      console.warn(\"sideMenu.js not available:\", err);\n    }\n  } catch (error) {\n    console.error(\"Ошибка загрузки side menu:\", error);\n    // Fallback - показываем только контент\n    safelyInsertContent(mainEl, pageContentNodes);\n  }\n}\n\n// Безопасный скроллинг\nfunction handleSafeScrolling(showSideMenu) {\n  const { hash } = window.location;\n\n  if (hash) {\n    const tryScrollToHash = () => {\n      const id = hash.slice(1);\n      const target = document.getElementById(id);\n      if (target) {\n        target.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n        return true;\n      }\n      return false;\n    };\n\n    if (!tryScrollToHash()) {\n      requestAnimationFrame(() => {\n        if (!tryScrollToHash()) {\n          setTimeout(tryScrollToHash, 50);\n        }\n      });\n    }\n  } else if (showSideMenu) {\n    const pageContentContainer = document.querySelector(\".page-content\");\n    if (pageContentContainer) {\n      setTimeout(() => {\n        pageContentContainer.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\",\n          inline: \"nearest\",\n        });\n      }, 50);\n    } else {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  } else {\n    window.scrollTo(0, 0);\n  }\n}\n\n// Функция для программного перехода\nexport function navigateTo(path) {\n  const raw = path.startsWith(\"/\") ? path : \"/\" + path;\n  const hashIndex = raw.indexOf(\"#\");\n  const pathnameOnly = hashIndex >= 0 ? raw.slice(0, hashIndex) : raw;\n  const hash = hashIndex >= 0 ? raw.slice(hashIndex) : \"\";\n  const fullPath = basePath + pathnameOnly + hash;\n  window.history.pushState({}, \"\", fullPath);\n  handleLocation();\n}\n\n// Обработчик навигации\nfunction handleNavigation(e) {\n  const link = e.target.closest(\"a\");\n  if (!link) return;\n\n  const url = new URL(link.href);\n  if (url.origin !== window.location.origin || link.closest(\".side-menu\"))\n    return;\n\n  // Обработка якорей\n  const currentPath = window.location.pathname;\n  const linkPath = url.pathname;\n  if (link.hash && linkPath === currentPath) {\n    e.preventDefault();\n    const id = link.hash.slice(1);\n    const target = document.getElementById(id);\n    if (target) {\n      target.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n    } else {\n      window.location.hash = link.hash;\n    }\n    return;\n  }\n\n  e.preventDefault();\n  const relativePath = linkPath.replace(basePath, \"\") || \"/\";\n  navigateTo(relativePath + (url.hash || \"\"));\n}\n\n// Обработка редиректов\nexport function handleRedirects() {\n  if (isGitHubPages) {\n    const redirectPath = sessionStorage.getItem(\"redirectPath\");\n    if (redirectPath) {\n      console.log(\"GitHub Pages редирект:\", redirectPath);\n      sessionStorage.removeItem(\"redirectPath\");\n      if (routes[redirectPath]) {\n        navigateTo(redirectPath);\n        return true;\n      }\n    }\n  }\n\n  const currentPath = window.location.pathname;\n  let cleanPath = currentPath;\n\n  if (basePath && currentPath.startsWith(basePath)) {\n    cleanPath = currentPath.slice(basePath.length);\n  }\n\n  if (cleanPath !== \"/\" && !cleanPath.endsWith(\".html\") && routes[cleanPath]) {\n    console.log(\"Прямой переход по ссылке:\", cleanPath);\n    navigateTo(cleanPath);\n    return true;\n  }\n\n  return false;\n}\n\n// Безопасная инициализация компонентов\nasync function initPageComponents() {\n  // Инициализация других компонентов\n  if (typeof window.initCarousels === \"function\") {\n    window.initCarousels();\n  }\n  if (typeof window.initForms === \"function\") {\n    window.initForms();\n  }\n  if (typeof window.initVideoModal === \"function\") {\n    window.initVideoModal();\n  }\n  if (typeof window.initGalleryModal === \"function\") {\n    window.initGalleryModal();\n  }\n\n  // Безопасная инициализация каруселей\n  try {\n    const carousels = document.querySelectorAll(\".promo-carousel\");\n    if (carousels.length) {\n      import(\"./carousel.js\").then((m) => {\n        const init = m.initCarousel || (m.default && m.default.initCarousel);\n        if (!init) return;\n        carousels.forEach((el) => {\n          if (!el.dataset.inited) {\n            init(el);\n            el.dataset.inited = \"true\";\n          }\n        });\n      });\n    }\n  } catch (e) {\n    console.warn(\"Carousel init failed\", e);\n  }\n\n  // Усиление безопасности внешних ссылок\n  try {\n    secureExternalLinks(document);\n  } catch (e) {\n    console.warn(\"secureExternalLinks failed\", e);\n  }\n}\n\n// Обработчик изменения location\nfunction handleLocation() {\n  loadPage(getRoute());\n  // Обновляем breadcrumbs при смене страницы\n  setTimeout(() => {\n    if (window.initBreadcrumbs && typeof window.initBreadcrumbs === 'function') {\n      window.initBreadcrumbs();\n    }\n  }, 100);\n}\n\n// Инициализация роутера\nexport function initRouter() {\n  const hasRedirect = handleRedirects();\n\n  if (!hasRedirect) {\n    document.addEventListener(\"click\", handleNavigation);\n    window.addEventListener(\"popstate\", handleLocation);\n    handleLocation();\n  }\n}\n\n\n// Глобальные экспорты\nwindow.navigateTo = navigateTo;\nwindow.secureExternalLinks = secureExternalLinks;\n\n// Экспорт по умолчанию\nexport default {\n  basePath,\n  routes,\n  getRoute,\n  loadPage,\n  navigateTo,\n  handleRedirects,\n  initRouter,\n};\n","import { routes, basePath } from \"./router.js\";\r\n\r\n// Управление боковым меню\r\nexport function initSideMenu() {\r\n  // Определение текущей страницы\r\n  const currentPath = window.location.pathname.replace(basePath, \"\") || \"/\";\r\n  const sideMenuLinks = document.querySelectorAll(\".side-menu__link\");\r\n  const mainContent = document.querySelector(\"main\");\r\n\r\n  // Добавление класса active для текущей страницы и обработчиков событий\r\n  sideMenuLinks.forEach((link) => {\r\n    if (link.getAttribute(\"href\") === currentPath) {\r\n      link.classList.add(\"active\");\r\n    }\r\n\r\n    // Удаляем старые обработчики перед добавлением новых\r\n    link.removeEventListener(\"click\", handleSideMenuClick);\r\n    // Добавляем обработчик клика для каждой ссылки\r\n    link.addEventListener(\"click\", handleSideMenuClick);\r\n  });\r\n\r\n  // Добавление класса для контента\r\n  if (mainContent) {\r\n    mainContent.classList.add(\"with-side-menu\");\r\n    // Настраиваем поведение для мобильных устройств\r\n    setupMobileMenu(mainContent);\r\n  }\r\n}\r\n\r\n// Показ/скрытие меню на мобильных устройствах\r\nfunction setupMobileMenu(mainContent) {\r\n  const sideMenu = document.querySelector(\".side-menu\");\r\n  if (sideMenu) {\r\n    const mediaQuery = window.matchMedia(\"(max-width: 992px)\");\r\n\r\n    function handleScreenChange(e) {\r\n      if (e.matches) {\r\n        // Мобильная версия\r\n        mainContent.classList.remove(\"with-side-menu\");\r\n      } else {\r\n        // Десктопная версия\r\n        mainContent.classList.add(\"with-side-menu\");\r\n      }\r\n    }\r\n\r\n    mediaQuery.addListener(handleScreenChange);\r\n    handleScreenChange(mediaQuery);\r\n  }\r\n}\r\n\r\n// Обработчик клика по ссылкам в боковом меню\r\nfunction handleSideMenuClick(e) {\r\n  e.preventDefault();\r\n  const href = this.getAttribute(\"href\");\r\n  const pageContent = document.querySelector(\".page-content\");\r\n\r\n  // Обновляем URL без перезагрузки страницы\r\n  window.history.pushState({}, \"\", href);\r\n\r\n  // Удаляем класс active со всех ссылок\r\n  document.querySelectorAll(\".side-menu__link\").forEach((link) => {\r\n    link.classList.remove(\"active\");\r\n  });\r\n\r\n  // Добавляем класс active текущей ссылке\r\n  this.classList.add(\"active\");\r\n\r\n  // Загружаем новый контент через роутер\r\n  if (routes[href]) {\r\n    // Используем глобальную функцию navigateTo\r\n    if (typeof window.navigateTo === \"function\") {\r\n      window.navigateTo(href);\r\n    } else {\r\n      // Fallback: перезагружаем страницу\r\n      window.location.href = `${basePath}${href}`;\r\n    }\r\n  } else {\r\n    console.error(\"Маршрут не найден:\", href);\r\n    if (pageContent) {\r\n      pageContent.innerHTML = \"<h1>Страница не найдена</h1>\";\r\n    }\r\n  }\r\n}\r\n"],"file":"assets/sideMenu-BdB3PgFm.js"}